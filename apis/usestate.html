<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><link rel="preconnect" href="https://1FCF9AYYAT-dsn.algolia.net"/><link rel="preconnect" href="https://1FCF9AYYAT-dsn.algolia.net"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>useState</title><meta name="description" content="A JavaScript library for building user interfaces"/><meta property="fb:app_id" content="623268441017527"/><meta property="og:type" content="website"/><meta property="og:url" content="https://beta.reactjs.org/apis/usestate"/><meta property="og:title" content="useState"/><meta property="og:description" content="A JavaScript library for building user interfaces"/><meta property="og:image" content="https://beta.reactjs.org/logo-og.png"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site" content="@reactjs"/><meta name="twitter:creator" content="@reactjs"/><meta name="twitter:title" content="useState"/><meta name="twitter:description" content="A JavaScript library for building user interfaces"/><meta name="twitter:image" content="https://beta.reactjs.org/logo-og.png"/><link rel="preload" href="/fonts/Source-Code-Pro-Regular.woff2" as="font" type="font/woff2" crossorigin="anonymous"/><link rel="preload" href="https://conf.reactjs.org/fonts/Optimistic_Display_W_Md.woff2" as="font" type="font/woff2" crossorigin="anonymous"/><link rel="preload" href="https://conf.reactjs.org/fonts/Optimistic_Display_W_Bd.woff2" as="font" type="font/woff2" crossorigin="anonymous"/><meta name="next-head-count" content="21"/><link rel="preload" href="/_next/static/css/a7a6f56a5e5ee1fe.css" as="style"/><link rel="stylesheet" href="/_next/static/css/a7a6f56a5e5ee1fe.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-c122f1be9e27ed72.js" defer=""></script><script src="/_next/static/chunks/framework-b6f9a4f487645eb3.js" defer=""></script><script src="/_next/static/chunks/main-d3b138ad72cc6cbe.js" defer=""></script><script src="/_next/static/chunks/pages/_app-48e9d51fd58b4e3c.js" defer=""></script><script src="/_next/static/chunks/763-33f59ce71f9b41d3.js" defer=""></script><script src="/_next/static/chunks/829-074e13aeb2a07f65.js" defer=""></script><script src="/_next/static/chunks/pages/apis/usestate-2b254c10c413cd18.js" defer=""></script><script src="/_next/static/Q79l4BrFCdc1LuyjlNUDo/_buildManifest.js" defer=""></script><script src="/_next/static/Q79l4BrFCdc1LuyjlNUDo/_ssgManifest.js" defer=""></script><script src="/_next/static/Q79l4BrFCdc1LuyjlNUDo/_middlewareManifest.js" defer=""></script><style id="__jsx-1906412371">.heading.jsx-1906412371{scroll-margin-top:2.5em;
padding-right:1em}
.heading.jsx-1906412371:before{height:6rem;
margin-top:-6rem;
visibility:hidden;
content:''}
.heading.jsx-1906412371 .anchor.jsx-1906412371{height:0px;
width:0px}
.heading.jsx-1906412371 .anchor.jsx-1906412371 svg.jsx-1906412371{display:inline}
.heading.jsx-1906412371 .anchor.jsx-1906412371 svg.jsx-1906412371{visibility:hidden}
.heading.jsx-1906412371:hover .anchor.jsx-1906412371 svg.jsx-1906412371{visibility:visible}
.heading.jsx-1906412371 .anchor.jsx-1906412371:focus svg.jsx-1906412371{visibility:visible}</style><style id="__jsx-3298f0cd3a6d0a22">.toc{max-height:calc(100vh - 7.5rem)}
.toc-link>code{overflow-wrap:break-word;
white-space:pre-wrap;
font-size:90%}</style></head><body class="font-sans antialiased text-lg bg-wash dark:bg-wash-dark text-secondary dark:text-secondary-dark leading-base"><script>
                (function () {
                  function setTheme(newTheme) {
                    window.__theme = newTheme;
                    if (newTheme === 'dark') {
                      document.documentElement.classList.add('dark');
                    } else if (newTheme === 'light') {
                      document.documentElement.classList.remove('dark');
                    }
                  }

                  var preferredTheme;
                  try {
                    preferredTheme = localStorage.getItem('theme');
                  } catch (err) { }

                  window.__setPreferredTheme = function(newTheme) {
                    preferredTheme = newTheme;
                    setTheme(newTheme);
                    try {
                      localStorage.setItem('theme', newTheme);
                    } catch (err) { }
                  };

                  var initialTheme = preferredTheme;
                  var darkQuery = window.matchMedia('(prefers-color-scheme: dark)');

                  if (!initialTheme) {
                    initialTheme = darkQuery.matches ? 'dark' : 'light';
                  }
                  setTheme(initialTheme);

                  darkQuery.addEventListener('change', function (e) {
                    if (!preferredTheme) {
                      setTheme(e.matches ? 'dark' : 'light');
                    }
                  });
                })();
              </script><div id="__next"><div class="h-auto lg:h-screen flex flex-row"><div class="no-bg-scrollbar h-auto lg:h-full lg:overflow-y-scroll fixed flex flex-row lg:flex-col py-0 left-0 right-0 lg:max-w-xs w-full shadow lg:shadow-none z-50"><nav class="sticky top-0 items-center w-full flex lg:block justify-between bg-wash dark:bg-wash-dark pt-0 lg:pt-4 pr-5 lg:px-5 z-50"><div class="xl:w-full xl:max-w-xs flex items-center"><button type="button" aria-label="Menu" class="flex lg:hidden items-center h-full px-4"><svg width="1.33em" height="1.33em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg></button><a class="inline-flex text-l font-normal items-center text-primary dark:text-primary-dark py-1 mr-0 sm:mr-3 whitespace-nowrap" href="/"><svg width="100%" height="100%" viewBox="0 0 410 369" fill="none" xmlns="http://www.w3.org/2000/svg" class="text-sm mr-2 w-8 h-8 text-link dark:text-link-dark"><path d="M204.995 224.552C226.56 224.552 244.042 207.07 244.042 185.506C244.042 163.941 226.56 146.459 204.995 146.459C183.43 146.459 165.948 163.941 165.948 185.506C165.948 207.07 183.43 224.552 204.995 224.552Z" fill="currentColor"></path><path d="M409.99 184.505C409.99 153.707 381.437 126.667 335.996 108.925C343.342 60.6535 334.19 22.3878 307.492 6.98883C283.649 -6.77511 250.631 -0.0395641 214.512 25.9753C211.316 28.2692 208.143 30.7097 204.97 33.2477C201.822 30.7097 198.65 28.2692 195.477 25.9753C159.359 -0.0395641 126.34 -6.79951 102.497 6.98883C75.8237 22.3878 66.6721 60.6291 74.0422 108.852C28.5529 126.618 0 153.682 0 184.505C0 215.303 28.5528 242.342 73.9934 260.084C66.6477 308.356 75.7993 346.621 102.497 362.02C110.575 366.682 119.727 369 129.684 369C149.085 369 171.61 360.215 195.477 343.034C198.674 340.74 201.847 338.3 205.019 335.762C208.167 338.3 211.34 340.74 214.512 343.034C238.38 360.239 260.905 369 280.306 369C290.263 369 299.415 366.682 307.492 362.02C331.335 348.256 342 316.287 337.534 271.993C337.143 268.089 336.631 264.135 335.996 260.109C381.461 242.367 409.99 215.327 409.99 184.505ZM225.934 41.8136C246.238 27.1955 265.127 19.5814 280.306 19.5814C286.871 19.5814 292.728 20.9968 297.731 23.8765C315.204 33.9798 322.672 62.9475 317.327 102.433C299.756 97.0401 280.306 92.9158 259.392 90.2802C246.872 73.8074 233.597 58.9453 220.003 46.2551C221.98 44.7421 223.957 43.229 225.934 41.8136ZM112.259 23.8765C117.262 20.9968 123.119 19.5814 129.684 19.5814C144.863 19.5814 163.752 27.1711 184.056 41.8136C186.033 43.229 188.01 44.7176 189.986 46.2551C176.393 58.9453 163.142 73.783 150.622 90.2558C129.732 92.8914 110.258 97.0401 92.687 102.409C87.3424 62.9475 94.7857 33.9798 112.259 23.8765ZM19.5233 184.505C19.5233 164.322 40.9014 143.359 77.776 128.253C81.9003 146.141 88.0502 165.054 96.1768 184.456C88.0014 203.881 81.8515 222.819 77.7272 240.732C40.9014 225.626 19.5233 204.687 19.5233 184.505ZM184.056 327.196C154.966 348.134 128.805 354.675 112.259 345.133C94.7857 335.029 87.3181 306.062 92.6626 266.576C110.234 271.969 129.684 276.093 150.598 278.729C163.117 295.202 176.393 310.064 189.986 322.754C188.01 324.292 186.033 325.78 184.056 327.196ZM204.995 310.04C180.591 287.685 157.138 257.815 137.347 223.551C132.051 214.4 121.344 191.396 117 182.489C113.535 190.786 110.112 198.398 107.427 206.5C109.623 210.575 118.092 229.213 120.434 233.288C125.071 241.317 129.928 249.127 134.931 256.692C120.898 254.227 107.915 251.055 96.1035 247.321C102.815 217.011 116.213 182.064 137.347 145.458C142.545 136.453 153.838 116.346 159.5 108C150.568 109.147 143.395 108.767 135 110.5C132.56 114.453 122.777 131.645 120.434 135.721C115.749 143.823 111.454 151.925 107.427 159.978C102.546 146.581 98.8124 133.744 96.1524 121.64C125.755 112.293 162.727 106.411 204.995 106.411C215.562 106.411 237.63 106.197 247.49 106.905C242.048 99.7544 237.38 93.2819 231.694 86.888C227.082 86.7416 209.705 86.888 204.995 86.888C195.672 86.888 186.545 87.2053 177.589 87.7422C186.472 77.1752 195.672 67.5111 204.995 58.9697C229.375 81.3239 252.851 111.195 272.643 145.458C277.841 154.463 289.073 175.426 293.49 184.505C296.98 176.207 300.281 168.64 302.99 160.489C300.793 156.389 291.898 139.747 289.555 135.696C284.918 127.667 280.062 119.858 275.059 112.317C289.092 114.782 302.075 117.954 313.886 121.688C307.175 151.998 293.777 186.945 272.643 223.551C267.445 232.556 252.651 253.178 246.99 261.524C255.922 260.377 265.595 258.663 273.99 256.93C276.43 252.976 287.212 237.364 289.555 233.288C294.216 225.235 298.512 217.182 302.489 209.153C307.224 222.185 310.982 234.997 313.715 247.394C284.138 256.741 247.214 262.598 204.995 262.598C194.428 262.598 169.859 261.208 160 260.5C165.442 267.65 171.304 275.095 176.99 281.489C181.602 281.635 200.285 282.121 204.995 282.121C214.317 282.121 223.444 281.804 232.401 281.267C223.493 291.834 214.317 301.498 204.995 310.04ZM297.731 345.133C281.185 354.699 254.999 348.159 225.934 327.196C223.957 325.78 221.98 324.292 220.003 322.754C233.597 310.064 246.848 295.226 259.367 278.753C280.233 276.118 299.659 271.993 317.205 266.625C317.547 269.089 317.888 271.554 318.132 273.97C321.72 309.649 314.277 335.566 297.731 345.133ZM332.262 240.756C328.065 222.599 321.842 203.686 313.813 184.578C321.988 165.152 328.138 146.215 332.262 128.302C369.088 143.408 390.466 164.322 390.466 184.505C390.466 204.687 369.113 225.626 332.262 240.756Z" fill="currentColor"></path></svg>Node Docker SDK</a><div class="lg:w-full leading-loose hidden sm:flex flex-initial items-center h-auto pr-5 lg:pr-5 pt-0.5"><div class="px-1 mb-px bg-highlight dark:bg-highlight-dark rounded text-link dark:text-link-dark uppercase font-bold tracking-wide text-xs whitespace-nowrap">Beta</div></div><div class="block dark:hidden"><button type="button" aria-label="Use Dark Mode" class="hidden lg:flex items-center h-full pr-2"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24"><g fill="none" fill-rule="evenodd" transform="translate(-444 -204)"><path fill="currentColor" fill-rule="nonzero" d="M102,21 C102,18.1017141 103.307179,15.4198295 105.51735,13.6246624 C106.001939,13.2310647 105.821611,12.4522936 105.21334,12.3117518 C104.322006,12.1058078 103.414758,12 102.5,12 C95.8722864,12 90.5,17.3722864 90.5,24 C90.5,30.6277136 95.8722864,36 102.5,36 C106.090868,36 109.423902,34.4109093 111.690274,31.7128995 C112.091837,31.2348572 111.767653,30.5041211 111.143759,30.4810139 C106.047479,30.2922628 102,26.1097349 102,21 Z M102.5,34.5 C96.7007136,34.5 92,29.7992864 92,24 C92,18.2007136 96.7007136,13.5 102.5,13.5 C102.807386,13.5 103.113925,13.5136793 103.419249,13.5407785 C101.566047,15.5446378 100.5,18.185162 100.5,21 C100.5,26.3198526 104.287549,30.7714322 109.339814,31.7756638 L109.516565,31.8092927 C107.615276,33.5209452 105.138081,34.5 102.5,34.5 Z" transform="translate(354.5 192)"></path><polygon points="444 228 468 228 468 204 444 204"></polygon></g></svg></button></div><div class="hidden dark:block"><button type="button" aria-label="Use Light Mode" class="hidden lg:flex items-center h-full pr-2"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"><g fill="none" fill-rule="evenodd" transform="translate(-444 -204)"><g fill="currentColor" transform="translate(354 144)"><path fill-rule="nonzero" d="M108.5 24C108.5 27.5902136 105.590214 30.5 102 30.5 98.4097864 30.5 95.5 27.5902136 95.5 24 95.5 20.4097864 98.4097864 17.5 102 17.5 105.590214 17.5 108.5 20.4097864 108.5 24zM107 24C107 21.2382136 104.761786 19 102 19 99.2382136 19 97 21.2382136 97 24 97 26.7617864 99.2382136 29 102 29 104.761786 29 107 26.7617864 107 24zM101 12.75L101 14.75C101 15.1642136 101.335786 15.5 101.75 15.5 102.164214 15.5 102.5 15.1642136 102.5 14.75L102.5 12.75C102.5 12.3357864 102.164214 12 101.75 12 101.335786 12 101 12.3357864 101 12.75zM95.7255165 14.6323616L96.7485165 16.4038616C96.9556573 16.7625614 97.4143618 16.8854243 97.7730616 16.6782835 98.1317614 16.4711427 98.2546243 16.0124382 98.0474835 15.6537384L97.0244835 13.8822384C96.8173427 13.5235386 96.3586382 13.4006757 95.9999384 13.6078165 95.6412386 13.8149573 95.5183757 14.2736618 95.7255165 14.6323616zM91.8822384 19.0244835L93.6537384 20.0474835C94.0124382 20.2546243 94.4711427 20.1317614 94.6782835 19.7730616 94.8854243 19.4143618 94.7625614 18.9556573 94.4038616 18.7485165L92.6323616 17.7255165C92.2736618 17.5183757 91.8149573 17.6412386 91.6078165 17.9999384 91.4006757 18.3586382 91.5235386 18.8173427 91.8822384 19.0244835zM90.75 25L92.75 25C93.1642136 25 93.5 24.6642136 93.5 24.25 93.5 23.8357864 93.1642136 23.5 92.75 23.5L90.75 23.5C90.3357864 23.5 90 23.8357864 90 24.25 90 24.6642136 90.3357864 25 90.75 25zM92.6323616 30.2744835L94.4038616 29.2514835C94.7625614 29.0443427 94.8854243 28.5856382 94.6782835 28.2269384 94.4711427 27.8682386 94.0124382 27.7453757 93.6537384 27.9525165L91.8822384 28.9755165C91.5235386 29.1826573 91.4006757 29.6413618 91.6078165 30.0000616 91.8149573 30.3587614 92.2736618 30.4816243 92.6323616 30.2744835zM97.0244835 34.1177616L98.0474835 32.3462616C98.2546243 31.9875618 98.1317614 31.5288573 97.7730616 31.3217165 97.4143618 31.1145757 96.9556573 31.2374386 96.7485165 31.5961384L95.7255165 33.3676384C95.5183757 33.7263382 95.6412386 34.1850427 95.9999384 34.3921835 96.3586382 34.5993243 96.8173427 34.4764614 97.0244835 34.1177616zM103 35.25L103 33.25C103 32.8357864 102.664214 32.5 102.25 32.5 101.835786 32.5 101.5 32.8357864 101.5 33.25L101.5 35.25C101.5 35.6642136 101.835786 36 102.25 36 102.664214 36 103 35.6642136 103 35.25zM108.274483 33.3676384L107.251483 31.5961384C107.044343 31.2374386 106.585638 31.1145757 106.226938 31.3217165 105.868239 31.5288573 105.745376 31.9875618 105.952517 32.3462616L106.975517 34.1177616C107.182657 34.4764614 107.641362 34.5993243 108.000062 34.3921835 108.358761 34.1850427 108.481624 33.7263382 108.274483 33.3676384zM112.117762 28.9755165L110.346262 27.9525165C109.987562 27.7453757 109.528857 27.8682386 109.321717 28.2269384 109.114576 28.5856382 109.237439 29.0443427 109.596138 29.2514835L111.367638 30.2744835C111.726338 30.4816243 112.185043 30.3587614 112.392183 30.0000616 112.599324 29.6413618 112.476461 29.1826573 112.117762 28.9755165zM113.25 23L111.25 23C110.835786 23 110.5 23.3357864 110.5 23.75 110.5 24.1642136 110.835786 24.5 111.25 24.5L113.25 24.5C113.664214 24.5 114 24.1642136 114 23.75 114 23.3357864 113.664214 23 113.25 23zM111.367638 17.7255165L109.596138 18.7485165C109.237439 18.9556573 109.114576 19.4143618 109.321717 19.7730616 109.528857 20.1317614 109.987562 20.2546243 110.346262 20.0474835L112.117762 19.0244835C112.476461 18.8173427 112.599324 18.3586382 112.392183 17.9999384 112.185043 17.6412386 111.726338 17.5183757 111.367638 17.7255165zM106.975517 13.8822384L105.952517 15.6537384C105.745376 16.0124382 105.868239 16.4711427 106.226938 16.6782835 106.585638 16.8854243 107.044343 16.7625614 107.251483 16.4038616L108.274483 14.6323616C108.481624 14.2736618 108.358761 13.8149573 108.000062 13.6078165 107.641362 13.4006757 107.182657 13.5235386 106.975517 13.8822384z" transform="translate(0 48)"></path><path d="M98.6123,60.1372 C98.6123,59.3552 98.8753,58.6427 99.3368,58.0942 C99.5293,57.8657 99.3933,57.5092 99.0943,57.5017 C99.0793,57.5012 99.0633,57.5007 99.0483,57.5007 C97.1578,57.4747 95.5418,59.0312 95.5008,60.9217 C95.4578,62.8907 97.0408,64.5002 98.9998,64.5002 C99.7793,64.5002 100.4983,64.2452 101.0798,63.8142 C101.3183,63.6372 101.2358,63.2627 100.9478,63.1897 C99.5923,62.8457 98.6123,61.6072 98.6123,60.1372" transform="translate(3 11)"></path></g><polygon points="444 228 468 228 468 204 444 204"></polygon></g></svg></button></div></div><div class="px-0 pt-2 w-full 2xl:max-w-xs hidden lg:flex items-center self-center border-b-0 lg:border-b border-border dark:border-border-dark"><a class="border-transparent inline-flex w-full items-center border-b-2 justify-center text-base leading-9 px-3 py-0.5 hover:text-link dark:hover:text-link-dark whitespace-nowrap" href="/">Home</a><a class="text-link border-link dark:text-link-dark dark:border-link-dark font-bold inline-flex w-full items-center border-b-2 justify-center text-base leading-9 px-3 py-0.5 hover:text-link dark:hover:text-link-dark whitespace-nowrap" href="/apis">API</a></div><div class="flex my-4 h-10 mx-0 w-full lg:hidden justify-end lg:max-w-sm"><button aria-label="Search" type="button" class="inline-flex md:hidden items-center text-lg p-1 ml-4 lg:ml-6"><svg width="1em" height="1em" viewBox="0 0 20 20" class="align-middle"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" stroke-width="2" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg></button><button type="button" class="hidden md:flex relative pl-4 pr-0.5 py-1 h-10 bg-secondary-button dark:bg-gray-80 outline-none focus:ring focus:outline-none betterhover:hover:bg-opacity-80 pointer items-center shadow-inner text-left w-full text-gray-30 rounded-lg align-middle text-sm"><svg width="1em" height="1em" viewBox="0 0 20 20" class="mr-3 align-middle text-gray-30 shrink-0 group-betterhover:hover:text-gray-70"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" stroke-width="2" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg>Search<span class="ml-auto hidden sm:flex item-center"><kbd class="h-6 w-6 border border-transparent mr-1 bg-wash dark:bg-wash-dark text-gray-30 align-middle p-0 inline-flex justify-center items-center text-xs text-center rounded">⌘</kbd><kbd class="h-6 w-6 border border-transparent mr-1 bg-wash dark:bg-wash-dark text-gray-30 align-middle p-0 inline-flex justify-center items-center text-xs text-center rounded">K</kbd></span></button><div class="block dark:hidden"><button type="button" aria-label="Use Dark Mode" class="flex lg:hidden items-center p-1 h-full ml-4 lg:ml-6"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24"><g fill="none" fill-rule="evenodd" transform="translate(-444 -204)"><path fill="currentColor" fill-rule="nonzero" d="M102,21 C102,18.1017141 103.307179,15.4198295 105.51735,13.6246624 C106.001939,13.2310647 105.821611,12.4522936 105.21334,12.3117518 C104.322006,12.1058078 103.414758,12 102.5,12 C95.8722864,12 90.5,17.3722864 90.5,24 C90.5,30.6277136 95.8722864,36 102.5,36 C106.090868,36 109.423902,34.4109093 111.690274,31.7128995 C112.091837,31.2348572 111.767653,30.5041211 111.143759,30.4810139 C106.047479,30.2922628 102,26.1097349 102,21 Z M102.5,34.5 C96.7007136,34.5 92,29.7992864 92,24 C92,18.2007136 96.7007136,13.5 102.5,13.5 C102.807386,13.5 103.113925,13.5136793 103.419249,13.5407785 C101.566047,15.5446378 100.5,18.185162 100.5,21 C100.5,26.3198526 104.287549,30.7714322 109.339814,31.7756638 L109.516565,31.8092927 C107.615276,33.5209452 105.138081,34.5 102.5,34.5 Z" transform="translate(354.5 192)"></path><polygon points="444 228 468 228 468 204 444 204"></polygon></g></svg></button></div><div class="hidden dark:block"><button type="button" aria-label="Use Light Mode" class="flex lg:hidden items-center p-1 h-full ml-4 lg:ml-6"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"><g fill="none" fill-rule="evenodd" transform="translate(-444 -204)"><g fill="currentColor" transform="translate(354 144)"><path fill-rule="nonzero" d="M108.5 24C108.5 27.5902136 105.590214 30.5 102 30.5 98.4097864 30.5 95.5 27.5902136 95.5 24 95.5 20.4097864 98.4097864 17.5 102 17.5 105.590214 17.5 108.5 20.4097864 108.5 24zM107 24C107 21.2382136 104.761786 19 102 19 99.2382136 19 97 21.2382136 97 24 97 26.7617864 99.2382136 29 102 29 104.761786 29 107 26.7617864 107 24zM101 12.75L101 14.75C101 15.1642136 101.335786 15.5 101.75 15.5 102.164214 15.5 102.5 15.1642136 102.5 14.75L102.5 12.75C102.5 12.3357864 102.164214 12 101.75 12 101.335786 12 101 12.3357864 101 12.75zM95.7255165 14.6323616L96.7485165 16.4038616C96.9556573 16.7625614 97.4143618 16.8854243 97.7730616 16.6782835 98.1317614 16.4711427 98.2546243 16.0124382 98.0474835 15.6537384L97.0244835 13.8822384C96.8173427 13.5235386 96.3586382 13.4006757 95.9999384 13.6078165 95.6412386 13.8149573 95.5183757 14.2736618 95.7255165 14.6323616zM91.8822384 19.0244835L93.6537384 20.0474835C94.0124382 20.2546243 94.4711427 20.1317614 94.6782835 19.7730616 94.8854243 19.4143618 94.7625614 18.9556573 94.4038616 18.7485165L92.6323616 17.7255165C92.2736618 17.5183757 91.8149573 17.6412386 91.6078165 17.9999384 91.4006757 18.3586382 91.5235386 18.8173427 91.8822384 19.0244835zM90.75 25L92.75 25C93.1642136 25 93.5 24.6642136 93.5 24.25 93.5 23.8357864 93.1642136 23.5 92.75 23.5L90.75 23.5C90.3357864 23.5 90 23.8357864 90 24.25 90 24.6642136 90.3357864 25 90.75 25zM92.6323616 30.2744835L94.4038616 29.2514835C94.7625614 29.0443427 94.8854243 28.5856382 94.6782835 28.2269384 94.4711427 27.8682386 94.0124382 27.7453757 93.6537384 27.9525165L91.8822384 28.9755165C91.5235386 29.1826573 91.4006757 29.6413618 91.6078165 30.0000616 91.8149573 30.3587614 92.2736618 30.4816243 92.6323616 30.2744835zM97.0244835 34.1177616L98.0474835 32.3462616C98.2546243 31.9875618 98.1317614 31.5288573 97.7730616 31.3217165 97.4143618 31.1145757 96.9556573 31.2374386 96.7485165 31.5961384L95.7255165 33.3676384C95.5183757 33.7263382 95.6412386 34.1850427 95.9999384 34.3921835 96.3586382 34.5993243 96.8173427 34.4764614 97.0244835 34.1177616zM103 35.25L103 33.25C103 32.8357864 102.664214 32.5 102.25 32.5 101.835786 32.5 101.5 32.8357864 101.5 33.25L101.5 35.25C101.5 35.6642136 101.835786 36 102.25 36 102.664214 36 103 35.6642136 103 35.25zM108.274483 33.3676384L107.251483 31.5961384C107.044343 31.2374386 106.585638 31.1145757 106.226938 31.3217165 105.868239 31.5288573 105.745376 31.9875618 105.952517 32.3462616L106.975517 34.1177616C107.182657 34.4764614 107.641362 34.5993243 108.000062 34.3921835 108.358761 34.1850427 108.481624 33.7263382 108.274483 33.3676384zM112.117762 28.9755165L110.346262 27.9525165C109.987562 27.7453757 109.528857 27.8682386 109.321717 28.2269384 109.114576 28.5856382 109.237439 29.0443427 109.596138 29.2514835L111.367638 30.2744835C111.726338 30.4816243 112.185043 30.3587614 112.392183 30.0000616 112.599324 29.6413618 112.476461 29.1826573 112.117762 28.9755165zM113.25 23L111.25 23C110.835786 23 110.5 23.3357864 110.5 23.75 110.5 24.1642136 110.835786 24.5 111.25 24.5L113.25 24.5C113.664214 24.5 114 24.1642136 114 23.75 114 23.3357864 113.664214 23 113.25 23zM111.367638 17.7255165L109.596138 18.7485165C109.237439 18.9556573 109.114576 19.4143618 109.321717 19.7730616 109.528857 20.1317614 109.987562 20.2546243 110.346262 20.0474835L112.117762 19.0244835C112.476461 18.8173427 112.599324 18.3586382 112.392183 17.9999384 112.185043 17.6412386 111.726338 17.5183757 111.367638 17.7255165zM106.975517 13.8822384L105.952517 15.6537384C105.745376 16.0124382 105.868239 16.4711427 106.226938 16.6782835 106.585638 16.8854243 107.044343 16.7625614 107.251483 16.4038616L108.274483 14.6323616C108.481624 14.2736618 108.358761 13.8149573 108.000062 13.6078165 107.641362 13.4006757 107.182657 13.5235386 106.975517 13.8822384z" transform="translate(0 48)"></path><path d="M98.6123,60.1372 C98.6123,59.3552 98.8753,58.6427 99.3368,58.0942 C99.5293,57.8657 99.3933,57.5092 99.0943,57.5017 C99.0793,57.5012 99.0633,57.5007 99.0483,57.5007 C97.1578,57.4747 95.5418,59.0312 95.5008,60.9217 C95.4578,62.8907 97.0408,64.5002 98.9998,64.5002 C99.7793,64.5002 100.4983,64.2452 101.0798,63.8142 C101.3183,63.6372 101.2358,63.2627 100.9478,63.1897 C99.5923,62.8457 98.6123,61.6072 98.6123,60.1372" transform="translate(3 11)"></path></g><polygon points="444 228 468 228 468 204 444 204"></polygon></g></svg></button></div></div></nav><aside class="lg:grow lg:flex flex-col w-full pt-4 pb-8 lg:pb-0 lg:max-w-xs fixed lg:sticky bg-wash dark:bg-wash-dark z-10 top-0 hidden lg:block" aria-hidden="false"><div class="px-5"><button aria-label="Search" type="button" class="inline-flex md:hidden items-center text-lg p-1 ml-4 lg:ml-6"><svg width="1em" height="1em" viewBox="0 0 20 20" class="align-middle"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" stroke-width="2" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg></button><button type="button" class="hidden md:flex relative pl-4 pr-0.5 py-1 h-10 bg-secondary-button dark:bg-gray-80 outline-none focus:ring focus:outline-none betterhover:hover:bg-opacity-80 pointer items-center shadow-inner text-left w-full text-gray-30 rounded-lg align-middle text-sm"><svg width="1em" height="1em" viewBox="0 0 20 20" class="mr-3 align-middle text-gray-30 shrink-0 group-betterhover:hover:text-gray-70"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" stroke-width="2" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg>Search<span class="ml-auto hidden sm:flex item-center"><kbd class="h-6 w-6 border border-transparent mr-1 bg-wash dark:bg-wash-dark text-gray-30 align-middle p-0 inline-flex justify-center items-center text-xs text-center rounded">⌘</kbd><kbd class="h-6 w-6 border border-transparent mr-1 bg-wash dark:bg-wash-dark text-gray-30 align-middle p-0 inline-flex justify-center items-center text-xs text-center rounded">K</kbd></span></button></div><nav role="navigation" style="--bg-opacity:.2" class="w-full h-screen lg:h-auto grow pr-0 lg:pr-5 pt-6 pb-44 lg:pb-0 lg:py-6 md:pt-4 lg:pt-4 overflow-y-scroll lg:overflow-y-auto scrolling-touch scrolling-gpu"><ul><li><a title="React APIs" class="p-2 pr-2 w-full rounded-none lg:rounded-r-lg text-left hover:bg-gray-5 dark:hover:bg-gray-80 relative flex items-center justify-between pl-5 text-base font-bold dark:text-primary-dark text-primary  text-base text-secondary dark:text-secondary-dark" href="/apis">React APIs<span class="pr-1 text-link"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" class="duration-100 ease-in transition rotate-0" style="min-width:20px;min-height:20px"><g fill="none" fill-rule="evenodd" transform="translate(-446 -398)"><path fill="currentColor" fill-rule="nonzero" d="M95.8838835,240.366117 C95.3957281,239.877961 94.6042719,239.877961 94.1161165,240.366117 C93.6279612,240.854272 93.6279612,241.645728 94.1161165,242.133883 L98.6161165,246.633883 C99.1042719,247.122039 99.8957281,247.122039 100.383883,246.633883 L104.883883,242.133883 C105.372039,241.645728 105.372039,240.854272 104.883883,240.366117 C104.395728,239.877961 103.604272,239.877961 103.116117,240.366117 L99.5,243.982233 L95.8838835,240.366117 Z" transform="translate(356.5 164.5)"></path><polygon points="446 418 466 418 466 398 446 398"></polygon></g></svg></span></a><div class="opacity-100" style="transition:opacity 250ms ease-in-out;animation:nav-fadein 250ms ease-in-out"><div id="react-collapsed-panel-undefined" aria-hidden="false" style="box-sizing:border-box"><ul><li><a title="useState()" aria-current="page" class="p-2 pr-2 w-full rounded-none lg:rounded-r-lg text-left hover:bg-gray-5 dark:hover:bg-gray-80 relative flex items-center justify-between text-sm pl-6 pl-5 text-base text-link dark:text-link-dark text-base text-link dark:text-link-dark bg-highlight dark:bg-highlight-dark border-blue-40 hover:bg-highlight hover:text-link dark:hover:bg-highlight-dark dark:hover:text-link-dark" href="/apis/usestate">useState()</a></li><li><a title="useContext()" class="p-2 pr-2 w-full rounded-none lg:rounded-r-lg text-left hover:bg-gray-5 dark:hover:bg-gray-80 relative flex items-center justify-between text-sm pl-6 pl-5 text-base text-secondary dark:text-secondary-dark" href="/apis/usecontext">useContext()</a></li><li><a title="useRef()" class="p-2 pr-2 w-full rounded-none lg:rounded-r-lg text-left hover:bg-gray-5 dark:hover:bg-gray-80 relative flex items-center justify-between text-sm pl-6 pl-5 text-base text-secondary dark:text-secondary-dark" href="/apis/useref">useRef()</a></li></ul></div></div></li><li><a title="ReactDOM APIs" class="p-2 pr-2 w-full rounded-none lg:rounded-r-lg text-left hover:bg-gray-5 dark:hover:bg-gray-80 relative flex items-center justify-between pl-5 text-base font-bold dark:text-primary-dark text-primary  text-base text-secondary dark:text-secondary-dark" href="/apis/reactdom">ReactDOM APIs<span class="pr-1 text-gray-30"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" class="duration-100 ease-in transition -rotate-90" style="min-width:20px;min-height:20px"><g fill="none" fill-rule="evenodd" transform="translate(-446 -398)"><path fill="currentColor" fill-rule="nonzero" d="M95.8838835,240.366117 C95.3957281,239.877961 94.6042719,239.877961 94.1161165,240.366117 C93.6279612,240.854272 93.6279612,241.645728 94.1161165,242.133883 L98.6161165,246.633883 C99.1042719,247.122039 99.8957281,247.122039 100.383883,246.633883 L104.883883,242.133883 C105.372039,241.645728 105.372039,240.854272 104.883883,240.366117 C104.395728,239.877961 103.604272,239.877961 103.116117,240.366117 L99.5,243.982233 L95.8838835,240.366117 Z" transform="translate(356.5 164.5)"></path><polygon points="446 418 466 418 466 398 446 398"></polygon></g></svg></span></a><div class="opacity-50" style="transition:opacity 250ms ease-in-out;animation:nav-fadein 250ms ease-in-out"><div id="react-collapsed-panel-undefined" aria-hidden="true" style="box-sizing:border-box;display:none;height:0px;overflow:hidden"><ul><li><a title="render()" class="p-2 pr-2 w-full rounded-none lg:rounded-r-lg text-left hover:bg-gray-5 dark:hover:bg-gray-80 relative flex items-center justify-between text-sm pl-6 pl-5 text-base text-secondary dark:text-secondary-dark" href="/apis/render">render()</a></li></ul></div></div></li></ul></nav></aside></div><div class="flex flex-1 w-full h-full self-stretch"><div class="w-full min-w-0"><main class="flex flex-1 self-stretch flex-col items-end justify-around"><article class="h-full mx-auto relative w-full min-w-0"><div class="lg:pt-0 pt-20 pl-0 lg:pl-80 2xl:px-80 "><div class="px-5 sm:px-12 pt-5"><div class="max-w-4xl ml-0 2xl:mx-auto"><div class="flex"><div class="flex mb-3 mt-0.5 items-center"><a class="text-link dark:text-link-dark text-sm tracking-wide font-bold uppercase mr-1 hover:underline" href="/apis">API Reference</a><span class="inline-block mr-1 text-link dark:text-link-dark text-lg"><svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6.86612 13.6161C6.37796 14.1043 6.37796 14.8957 6.86612 15.3839C7.35427 15.872 8.14572 15.872 8.63388 15.3839L13.1339 10.8839C13.622 10.3957 13.622 9.60428 13.1339 9.11612L8.63388 4.61612C8.14572 4.12797 7.35427 4.12797 6.86612 4.61612C6.37796 5.10428 6.37796 5.89573 6.86612 6.38388L10.4822 10L6.86612 13.6161Z" fill="currentColor"></path></svg></span></div><div class="flex mb-3 mt-0.5 items-center"><a class="text-link dark:text-link-dark text-sm tracking-wide font-bold uppercase mr-1 hover:underline" href="/apis">React APIs</a><span class="inline-block mr-1 text-link dark:text-link-dark text-lg"><svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6.86612 13.6161C6.37796 14.1043 6.37796 14.8957 6.86612 15.3839C7.35427 15.872 8.14572 15.872 8.63388 15.3839L13.1339 10.8839C13.622 10.3957 13.622 9.60428 13.1339 9.11612L8.63388 4.61612C8.14572 4.12797 7.35427 4.12797 6.86612 4.61612C6.37796 5.10428 6.37796 5.89573 6.86612 6.38388L10.4822 10L6.86612 13.6161Z" fill="currentColor"></path></svg></span></div></div><h1 class="jsx-1906412371 heading mt-0 text-primary dark:text-primary-dark -mx-.5 break-words text-5xl font-bold leading-tight">useState<a href="#undefined" aria-label="Link for this heading" title="Link for this heading" class="jsx-1906412371 anchor hidden"><svg width="1em" height="1em" viewBox="0 0 13 13" xmlns="http://www.w3.org/2000/svg" class="jsx-1906412371 text-gray-70 ml-2 h-5 w-5"><g fill="currentColor" fill-rule="evenodd" class="jsx-1906412371"><path d="M7.778 7.975a2.5 2.5 0 0 0 .347-3.837L6.017 2.03a2.498 2.498 0 0 0-3.542-.007 2.5 2.5 0 0 0 .006 3.543l1.153 1.15c.07-.29.154-.563.25-.773.036-.077.084-.16.14-.25L3.18 4.85a1.496 1.496 0 0 1 .002-2.12 1.496 1.496 0 0 1 2.12 0l2.124 2.123a1.496 1.496 0 0 1-.333 2.37c.16.246.42.504.685.752z" class="jsx-1906412371"></path><path d="M5.657 4.557a2.5 2.5 0 0 0-.347 3.837l2.108 2.108a2.498 2.498 0 0 0 3.542.007 2.5 2.5 0 0 0-.006-3.543L9.802 5.815c-.07.29-.154.565-.25.774-.036.076-.084.16-.14.25l.842.84c.585.587.59 1.532 0 2.122-.587.585-1.532.59-2.12 0L6.008 7.68a1.496 1.496 0 0 1 .332-2.372c-.16-.245-.42-.503-.685-.75z" class="jsx-1906412371"></path></g></svg></a></h1></div></div><div class="px-5 sm:px-12"><div class="max-w-7xl mx-auto"><div class="max-w-4xl ml-0 2xl:mx-auto"><div class="text-xl text-primary dark:text-primary-dark leading-relaxed"><p class="whitespace-pre-wrap my-4"><code class="inline text-code text-secondary dark:text-secondary-dark px-1 rounded-md no-underline bg-gray-30 bg-opacity-10 py-px">useState</code> is a React Hook that lets you add a <a class="inline text-link dark:text-link-dark break-normal border-b border-link border-opacity-0 hover:border-opacity-100 duration-100 ease-in transition leading-normal" href="/learn/state-a-components-memory">state variable</a> to your component.</p><div><!--$--><div translate="no" class="rounded-lg h-full w-full overflow-x-auto flex items-center bg-wash dark:bg-gray-95 shadow-lg my-8"><div class="sp-wrapper sp-sp-607024663"><div class="sp-stack"><pre class="sp-cm sp-pristine sp-javascript" translate="no"><code class="sp-pre-placeholder">const [state, setState] = useState(initialState)</code></pre></div></div></div><!--/$--></div></div><ul class="ml-6 my-3 list-disc"><li class="leading-relaxed mb-1"><a class="inline text-link dark:text-link-dark break-normal border-b border-link border-opacity-0 hover:border-opacity-100 duration-100 ease-in transition leading-normal" href="#usage">Usage</a><ul class="ml-6 my-3 list-disc"><li class="leading-relaxed mb-1"><a class="inline text-link dark:text-link-dark break-normal border-b border-link border-opacity-0 hover:border-opacity-100 duration-100 ease-in transition leading-normal" href="#adding-state-to-a-component">Adding state to a component</a></li><li class="leading-relaxed mb-1"><a class="inline text-link dark:text-link-dark break-normal border-b border-link border-opacity-0 hover:border-opacity-100 duration-100 ease-in transition leading-normal" href="#updating-state-based-on-the-previous-state">Updating state based on the previous state</a></li><li class="leading-relaxed mb-1"><a class="inline text-link dark:text-link-dark break-normal border-b border-link border-opacity-0 hover:border-opacity-100 duration-100 ease-in transition leading-normal" href="#updating-objects-and-arrays-in-state">Updating objects and arrays in state</a></li><li class="leading-relaxed mb-1"><a class="inline text-link dark:text-link-dark break-normal border-b border-link border-opacity-0 hover:border-opacity-100 duration-100 ease-in transition leading-normal" href="#avoiding-recreating-the-initial-state">Avoiding recreating the initial state</a></li><li class="leading-relaxed mb-1"><a class="inline text-link dark:text-link-dark break-normal border-b border-link border-opacity-0 hover:border-opacity-100 duration-100 ease-in transition leading-normal" href="#resetting-state-with-a-key">Resetting state with a key</a></li><li class="leading-relaxed mb-1"><a class="inline text-link dark:text-link-dark break-normal border-b border-link border-opacity-0 hover:border-opacity-100 duration-100 ease-in transition leading-normal" href="#storing-information-from-previous-renders">Storing information from previous renders</a></li></ul></li><li class="leading-relaxed mb-1"><a class="inline text-link dark:text-link-dark break-normal border-b border-link border-opacity-0 hover:border-opacity-100 duration-100 ease-in transition leading-normal" href="#reference">Reference</a><ul class="ml-6 my-3 list-disc"><li class="leading-relaxed mb-1"><a class="inline text-link dark:text-link-dark break-normal border-b border-link border-opacity-0 hover:border-opacity-100 duration-100 ease-in transition leading-normal" href="#usestate"><code class="inline text-code text-secondary dark:text-secondary-dark px-1 rounded-md no-underline bg-highlight dark:bg-highlight-dark py-0">useState(initialState)</code></a></li><li class="leading-relaxed mb-1"><a class="inline text-link dark:text-link-dark break-normal border-b border-link border-opacity-0 hover:border-opacity-100 duration-100 ease-in transition leading-normal" href="#setstate"><code class="inline text-code text-secondary dark:text-secondary-dark px-1 rounded-md no-underline bg-highlight dark:bg-highlight-dark py-0">set</code> functions, like <code class="inline text-code text-secondary dark:text-secondary-dark px-1 rounded-md no-underline bg-highlight dark:bg-highlight-dark py-0">setSomething(nextState)</code></a></li></ul></li><li class="leading-relaxed mb-1"><a class="inline text-link dark:text-link-dark break-normal border-b border-link border-opacity-0 hover:border-opacity-100 duration-100 ease-in transition leading-normal" href="#troubleshooting">Troubleshooting</a><ul class="ml-6 my-3 list-disc"><li class="leading-relaxed mb-1"><a class="inline text-link dark:text-link-dark break-normal border-b border-link border-opacity-0 hover:border-opacity-100 duration-100 ease-in transition leading-normal" href="#ive-updated-the-state-but-logging-gives-me-the-old-value">I’ve updated the state, but logging gives me the old value</a></li><li class="leading-relaxed mb-1"><a class="inline text-link dark:text-link-dark break-normal border-b border-link border-opacity-0 hover:border-opacity-100 duration-100 ease-in transition leading-normal" href="#ive-updated-the-state-but-the-screen-doesnt-update">I’ve updated the state, but the screen doesn’t update</a></li><li class="leading-relaxed mb-1"><a class="inline text-link dark:text-link-dark break-normal border-b border-link border-opacity-0 hover:border-opacity-100 duration-100 ease-in transition leading-normal" href="#im-getting-an-error-too-many-re-renders">I’m getting an error: “Too many re-renders”</a></li><li class="leading-relaxed mb-1"><a class="inline text-link dark:text-link-dark break-normal border-b border-link border-opacity-0 hover:border-opacity-100 duration-100 ease-in transition leading-normal" href="#my-initializer-or-updater-function-runs-twice">My initializer or updater function runs twice</a></li><li class="leading-relaxed mb-1"><a class="inline text-link dark:text-link-dark break-normal border-b border-link border-opacity-0 hover:border-opacity-100 duration-100 ease-in transition leading-normal" href="#im-trying-to-set-state-to-a-function-but-it-gets-called-instead">I’m trying to set state to a function, but it gets called instead</a></li></ul></li></ul><hr class="my-6 block border-b border-border dark:border-border-dark"/><h2 id="usage" class="jsx-1906412371 heading text-3xl leading-10 text-primary dark:text-primary-dark font-bold my-6">Usage<a href="#usage" aria-label="Link for Usage" title="Link for Usage" class="jsx-1906412371 anchor inline-block"><svg width="1em" height="1em" viewBox="0 0 13 13" xmlns="http://www.w3.org/2000/svg" class="jsx-1906412371 text-gray-70 ml-2 h-5 w-5"><g fill="currentColor" fill-rule="evenodd" class="jsx-1906412371"><path d="M7.778 7.975a2.5 2.5 0 0 0 .347-3.837L6.017 2.03a2.498 2.498 0 0 0-3.542-.007 2.5 2.5 0 0 0 .006 3.543l1.153 1.15c.07-.29.154-.563.25-.773.036-.077.084-.16.14-.25L3.18 4.85a1.496 1.496 0 0 1 .002-2.12 1.496 1.496 0 0 1 2.12 0l2.124 2.123a1.496 1.496 0 0 1-.333 2.37c.16.246.42.504.685.752z" class="jsx-1906412371"></path><path d="M5.657 4.557a2.5 2.5 0 0 0-.347 3.837l2.108 2.108a2.498 2.498 0 0 0 3.542.007 2.5 2.5 0 0 0-.006-3.543L9.802 5.815c-.07.29-.154.565-.25.774-.036.076-.084.16-.14.25l.842.84c.585.587.59 1.532 0 2.122-.587.585-1.532.59-2.12 0L6.008 7.68a1.496 1.496 0 0 1 .332-2.372c-.16-.245-.42-.503-.685-.75z" class="jsx-1906412371"></path></g></svg></a></h2><h3 id="adding-state-to-a-component" class="jsx-1906412371 heading text-2xl leading-9 text-primary dark:text-primary-dark font-bold my-6">Adding state to a component<a href="#adding-state-to-a-component" aria-label="Link for Adding state to a component" title="Link for Adding state to a component" class="jsx-1906412371 anchor inline-block"><svg width="1em" height="1em" viewBox="0 0 13 13" xmlns="http://www.w3.org/2000/svg" class="jsx-1906412371 text-gray-70 ml-2 h-5 w-5"><g fill="currentColor" fill-rule="evenodd" class="jsx-1906412371"><path d="M7.778 7.975a2.5 2.5 0 0 0 .347-3.837L6.017 2.03a2.498 2.498 0 0 0-3.542-.007 2.5 2.5 0 0 0 .006 3.543l1.153 1.15c.07-.29.154-.563.25-.773.036-.077.084-.16.14-.25L3.18 4.85a1.496 1.496 0 0 1 .002-2.12 1.496 1.496 0 0 1 2.12 0l2.124 2.123a1.496 1.496 0 0 1-.333 2.37c.16.246.42.504.685.752z" class="jsx-1906412371"></path><path d="M5.657 4.557a2.5 2.5 0 0 0-.347 3.837l2.108 2.108a2.498 2.498 0 0 0 3.542.007 2.5 2.5 0 0 0-.006-3.543L9.802 5.815c-.07.29-.154.565-.25.774-.036.076-.084.16-.14.25l.842.84c.585.587.59 1.532 0 2.122-.587.585-1.532.59-2.12 0L6.008 7.68a1.496 1.496 0 0 1 .332-2.372c-.16-.245-.42-.503-.685-.75z" class="jsx-1906412371"></path></g></svg></a></h3><p class="whitespace-pre-wrap my-4">Call <code class="inline text-code text-secondary dark:text-secondary-dark px-1 rounded-md no-underline bg-gray-30 bg-opacity-10 py-px">useState</code> at the top level of your component to declare one or more <a class="inline text-link dark:text-link-dark break-normal border-b border-link border-opacity-0 hover:border-opacity-100 duration-100 ease-in transition leading-normal" href="/learn/state-a-components-memory">state variables</a>.</p><div><!--$--><div translate="no" class="rounded-lg h-full w-full overflow-x-auto flex items-center bg-wash dark:bg-gray-95 shadow-lg my-8"><div class="sp-wrapper sp-sp-607024663"><div class="sp-stack"><pre class="sp-cm sp-pristine sp-javascript" translate="no"><code class="sp-pre-placeholder">import { useState } from &#x27;react&#x27;;

function MyComponent() {
  const [age, setAge] = useState(42);
  const [name, setName] = useState(&#x27;Taylor&#x27;);
  // ...</code></pre></div></div></div><!--/$--></div><p class="whitespace-pre-wrap my-4">The convention is to name state variables like <code class="inline text-code text-secondary dark:text-secondary-dark px-1 rounded-md no-underline bg-gray-30 bg-opacity-10 py-px">[something, setSomething]</code> using <a class="inline text-link dark:text-link-dark break-normal border-b border-link border-opacity-0 hover:border-opacity-100 duration-100 ease-in transition leading-normal" href="/learn/a-javascript-refresher#array-destructuring">array destructuring</a>.</p><p class="whitespace-pre-wrap my-4"><code class="inline text-code text-secondary dark:text-secondary-dark px-1 rounded-md no-underline bg-gray-30 bg-opacity-10 py-px">useState</code> returns an array with exactly two items:</p><ol class="ml-6 my-3 list-decimal"><li class="leading-relaxed mb-1">The <span data-step="1" class="code-step bg-opacity-10 dark:bg-opacity-20 relative rounded px-[6px] py-[1.5px] border-b-[2px] border-opacity-60 bg-blue-40 border-blue-40">current state</span> of this state variable, initially set to the <span data-step="3" class="code-step bg-opacity-10 dark:bg-opacity-20 relative rounded px-[6px] py-[1.5px] border-b-[2px] border-opacity-60 bg-green-40 border-green-40">initial state</span> you provided.</li><li class="leading-relaxed mb-1">The <span data-step="2" class="code-step bg-opacity-10 dark:bg-opacity-20 relative rounded px-[6px] py-[1.5px] border-b-[2px] border-opacity-60 bg-yellow-40 border-yellow-40"><code class="inline text-code text-secondary dark:text-secondary-dark px-1 rounded-md no-underline bg-gray-30 bg-opacity-10 py-px">set</code> function</span> that lets you change it to any other value in response to interaction.</li></ol><p class="whitespace-pre-wrap my-4">To update what’s on the screen, call the <code class="inline text-code text-secondary dark:text-secondary-dark px-1 rounded-md no-underline bg-gray-30 bg-opacity-10 py-px">set</code> function with some next state:</p><div><!--$--><div translate="no" class="rounded-lg h-full w-full overflow-x-auto flex items-center bg-wash dark:bg-gray-95 shadow-lg my-8"><div class="sp-wrapper sp-sp-607024663"><div class="sp-stack"><pre class="sp-cm sp-pristine sp-javascript" translate="no"><code class="sp-pre-placeholder">function handleClick() {
  setName(&#x27;Robin&#x27;);
}</code></pre></div></div></div><!--/$--></div><p class="whitespace-pre-wrap my-4">React will store the next state, render your component again with the new values, and update the UI.</p><div class="pt-8 pb-4 px-5 sm:px-8 my-8 relative rounded-none shadow-inner -mx-5 sm:mx-auto sm:rounded-lg bg-yellow-5 dark:bg-yellow-60 dark:bg-opacity-20"><h3 class="mb-2 text-2xl font-bold text-yellow-50 dark:text-yellow-40"><svg class="inline mr-3 mb-1 text-lg text-yellow-50 dark:text-yellow-40" width="1.11em" height="1.11em" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M19 0.398926C19.552 0.398926 20 0.846926 20 1.39893V15.3989C20 15.9509 19.552 16.3989 19 16.3989H4.455L0 19.8989V1.39893C0 0.846926 0.448 0.398926 1 0.398926H19ZM18 2.39893H2V15.7839L3.763 14.3989H18V2.39893ZM8.515 4.81093L8.962 5.49893C7.294 6.40193 7.323 7.85093 7.323 8.16293C7.478 8.14293 7.641 8.13893 7.803 8.15393C8.705 8.23793 9.416 8.97893 9.416 9.89893C9.416 10.8649 8.632 11.6489 7.666 11.6489C7.129 11.6489 6.616 11.4039 6.292 11.0589C5.777 10.5129 5.5 9.89893 5.5 8.90393C5.5 7.15393 6.728 5.58593 8.515 4.81093ZM13.515 4.81093L13.962 5.49893C12.294 6.40193 12.323 7.85093 12.323 8.16293C12.478 8.14293 12.641 8.13893 12.803 8.15393C13.705 8.23793 14.416 8.97893 14.416 9.89893C14.416 10.8649 13.632 11.6489 12.666 11.6489C12.129 11.6489 11.616 11.4039 11.292 11.0589C10.777 10.5129 10.5 9.89893 10.5 8.90393C10.5 7.15393 11.728 5.58593 13.515 4.81093Z" fill="currentColor"></path></svg>Pitfall</h3><div class="relative"><div class="py-2"><p class="whitespace-pre-wrap my-4">Calling the <code class="inline text-code text-secondary dark:text-secondary-dark px-1 rounded-md no-underline bg-gray-30 bg-opacity-10 py-px">set</code> function <a class="inline text-link dark:text-link-dark break-normal border-b border-link border-opacity-0 hover:border-opacity-100 duration-100 ease-in transition leading-normal" href="#ive-updated-the-state-but-logging-gives-me-the-old-value"><strong class="font-bold">does not</strong> change the current state in the already executing code</a>:</p><div><!--$--><div translate="no" class="rounded-lg h-full w-full overflow-x-auto flex items-center bg-wash dark:bg-gray-95 shadow-lg my-8"><div class="sp-wrapper sp-sp-607024663"><div class="sp-stack"><pre class="sp-cm sp-pristine sp-javascript" translate="no"><code class="sp-pre-placeholder">function handleClick() {
  setName(&#x27;Robin&#x27;);
  console.log(name); // Still &quot;Taylor&quot;!
}</code></pre></div></div></div><!--/$--></div><p class="whitespace-pre-wrap my-4">It only affects what <code class="inline text-code text-secondary dark:text-secondary-dark px-1 rounded-md no-underline bg-gray-30 bg-opacity-10 py-px">useState</code> will return starting from the <em>next</em> render.</p></div></div></div></div><div class="max-w-7xl mx-auto py-4"><div class="border-gray-10 bg-card dark:bg-card-dark shadow-inner rounded-none -mx-5 sm:mx-auto sm:rounded-lg"><div class="py-2 px-5 sm:px-8 pb-0 md:pb-0"><h4 id="examples-basic" class="jsx-1906412371 heading mb-2 leading-10 relative text-xl text-purple-50 dark:text-purple-30 text-xl font-bold leading-9 my-4">Basic useState examples<a href="#examples-basic" aria-label="Link for Basic useState examples" title="Link for Basic useState examples" class="jsx-1906412371 anchor inline-block"><svg width="1em" height="1em" viewBox="0 0 13 13" xmlns="http://www.w3.org/2000/svg" class="jsx-1906412371 text-gray-70 ml-2 h-5 w-5"><g fill="currentColor" fill-rule="evenodd" class="jsx-1906412371"><path d="M7.778 7.975a2.5 2.5 0 0 0 .347-3.837L6.017 2.03a2.498 2.498 0 0 0-3.542-.007 2.5 2.5 0 0 0 .006 3.543l1.153 1.15c.07-.29.154-.563.25-.773.036-.077.084-.16.14-.25L3.18 4.85a1.496 1.496 0 0 1 .002-2.12 1.496 1.496 0 0 1 2.12 0l2.124 2.123a1.496 1.496 0 0 1-.333 2.37c.16.246.42.504.685.752z" class="jsx-1906412371"></path><path d="M5.657 4.557a2.5 2.5 0 0 0-.347 3.837l2.108 2.108a2.498 2.498 0 0 0 3.542.007 2.5 2.5 0 0 0-.006-3.543L9.802 5.815c-.07.29-.154.565-.25.774-.036.076-.084.16-.14.25l.842.84c.585.587.59 1.532 0 2.122-.587.585-1.532.59-2.12 0L6.008 7.68a1.496 1.496 0 0 1 .332-2.372c-.16-.245-.42-.503-.685-.75z" class="jsx-1906412371"></path></g></svg></a></h4><div class="flex items-center justify-between"><div class="overflow-hidden"><div class="flex relative transition-transform content-box overflow-x-auto"><button class="py-2 mr-4 text-base border-b-4 duration-100 ease-in transition whitespace-nowrap text-ellipsis text-purple-50 border-purple-50 hover:text-purple-50 dark:text-purple-30 dark:border-purple-30 dark:hover:text-purple-30">1<!-- -->. <!-- -->Counter (number)</button><button class="py-2 mr-4 text-base border-b-4 duration-100 ease-in transition whitespace-nowrap text-ellipsis">2<!-- -->. <!-- -->Text field (string)</button><button class="py-2 mr-4 text-base border-b-4 duration-100 ease-in transition whitespace-nowrap text-ellipsis">3<!-- -->. <!-- -->Checkbox (boolean)</button><button class="py-2 mr-4 text-base border-b-4 duration-100 ease-in transition whitespace-nowrap text-ellipsis">4<!-- -->. <!-- -->Form (two variables)</button></div></div><div class="flex z-10 pb-2 pl-2"><button aria-label="Scroll left" class="bg-secondary-button dark:bg-secondary-button-dark h-8 px-2 rounded-l border-gray-20 border-r text-gray-30"><svg class="rotate-90" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20"><g fill="none" fill-rule="evenodd" transform="translate(-446 -398)"><path fill="currentColor" fill-rule="nonzero" d="M95.8838835,240.366117 C95.3957281,239.877961 94.6042719,239.877961 94.1161165,240.366117 C93.6279612,240.854272 93.6279612,241.645728 94.1161165,242.133883 L98.6161165,246.633883 C99.1042719,247.122039 99.8957281,247.122039 100.383883,246.633883 L104.883883,242.133883 C105.372039,241.645728 105.372039,240.854272 104.883883,240.366117 C104.395728,239.877961 103.604272,239.877961 103.116117,240.366117 L99.5,243.982233 L95.8838835,240.366117 Z" transform="translate(356.5 164.5)"></path><polygon points="446 418 466 418 466 398 446 398"></polygon></g></svg></button><button aria-label="Scroll right" class="bg-secondary-button dark:bg-secondary-button-dark h-8 px-2 rounded-r-lg text-primary dark:text-primary-dark"><svg class="-rotate-90" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20"><g fill="none" fill-rule="evenodd" transform="translate(-446 -398)"><path fill="currentColor" fill-rule="nonzero" d="M95.8838835,240.366117 C95.3957281,239.877961 94.6042719,239.877961 94.1161165,240.366117 C93.6279612,240.854272 93.6279612,241.645728 94.1161165,242.133883 L98.6161165,246.633883 C99.1042719,247.122039 99.8957281,247.122039 100.383883,246.633883 L104.883883,242.133883 C105.372039,241.645728 105.372039,240.854272 104.883883,240.366117 C104.395728,239.877961 103.604272,239.877961 103.116117,240.366117 L99.5,243.982233 L95.8838835,240.366117 Z" transform="translate(356.5 164.5)"></path><polygon points="446 418 466 418 466 398 446 398"></polygon></g></svg></button></div></div></div><div class="p-5 sm:py-8 sm:px-8"><div><h3 class="text-xl text-primary dark:text-primary-dark mb-2"><div class="font-bold block md:inline">Example<!-- --> <!-- -->1<!-- --> <!-- -->of <!-- -->4<span class="text-primary dark:text-primary-dark">: </span></div>Counter (number)</h3><p class="whitespace-pre-wrap my-4">In this example, the <code class="inline text-code text-secondary dark:text-secondary-dark px-1 rounded-md no-underline bg-gray-30 bg-opacity-10 py-px">count</code> state variable holds a number. Clicking the button increments it.</p><!--$--><div class="sandpack-container my-8" translate="no"><div class="shadow-lg dark:shadow-lg-dark rounded-lg"><div class="bg-wash dark:bg-card-dark flex justify-between items-center relative z-10 border-b border-border dark:border-border-dark rounded-t-lg rounded-b-none"><div class="px-4 lg:px-6"><div class="sp-tabs" translate="no"><div aria-label="Select active file" class="sp-tabs-scrollable-container" role="tablist"><button aria-selected="true" class="sp-tab-button" data-active="true" role="tab" title="/App.js" type="button">App.js</button></div></div></div><div class="px-3 flex items-center justify-end grow text-right" translate="yes"><button class="text-sm text-primary dark:text-primary-dark inline-flex items-center hover:text-link duration-100 ease-in transition mx-1" title="Reset Sandbox" type="button"><svg class="inline mb-0.5 ml-1 mr-1 relative top-0.5" width="0.78em" height="0.78em" viewBox="0 0 14 14" xmlns="http://www.w3.org/2000/svg"><path d="M11.3567 11.9929C10.147 13.0412 8.59937 13.6172 6.9987 13.615C3.3167 13.615 0.332031 10.6303 0.332031 6.94828C0.332031 3.26628 3.3167 0.281616 6.9987 0.281616C10.6807 0.281616 13.6654 3.26628 13.6654 6.94828C13.6654 8.37228 13.2187 9.69228 12.4587 10.775L10.332 6.94828H12.332C12.3319 5.71909 11.9072 4.52766 11.1298 3.57554C10.3524 2.62343 9.26994 1.96908 8.06559 1.72319C6.86124 1.4773 5.60892 1.65496 4.52048 2.22613C3.43205 2.79729 2.57431 3.72689 2.09238 4.85767C1.61045 5.98845 1.5339 7.25099 1.87569 8.43171C2.21748 9.61243 2.95663 10.6388 3.96809 11.3373C4.97955 12.0358 6.20123 12.3635 7.42646 12.2649C8.6517 12.1663 9.80527 11.6475 10.692 10.7963L11.3567 11.9929Z" fill="currentColor"></path></svg> Reset</button><a href="https://codesandbox.io/api/v1/sandboxes/define?undefined" rel="noreferrer noopener" target="_blank" title="Open in CodeSandbox" class="text-sm text-primary dark:text-primary-dark inline-flex items-center hover:text-link duration-100 ease-in transition mx-1 ml-3 md:ml-1"><svg width=".8em" height=".8em" viewBox="0 0 13 13" xmlns="http://www.w3.org/2000/svg" class="inline mb-0.5 ml-1 mr-1 relative top-px"><path d="M4.72038 2.94824V4.28158H1.38704V11.6149H8.72038V8.28158H10.0537V12.2816C10.0537 12.4584 9.98347 12.628 9.85845 12.753C9.73343 12.878 9.56386 12.9482 9.38704 12.9482H0.720378C0.543567 12.9482 0.373997 12.878 0.248973 12.753C0.123949 12.628 0.0537109 12.4584 0.0537109 12.2816V3.61491C0.0537109 3.4381 0.123949 3.26853 0.248973 3.1435C0.373997 3.01848 0.543567 2.94824 0.720378 2.94824H4.72038ZM12.0537 0.948242V6.28158H10.7204V3.22358L5.52504 8.41958L4.58238 7.47691L9.77704 2.28158H6.72038V0.948242H12.0537Z" fill="currentColor"></path></svg><span class="hidden md:block">Fork</span></a></div></div><div class="sp-wrapper sp-sp-607024663"><div class="sp-layout sp-custom-layout"><div class="sp-stack"><div class="sp-code-editor"><div aria-describedby="enter-instructions-6414" aria-label="Code Editor for App.js" class="sp-cm sp-pristine sp-javascript" role="group" tabindex="0" translate="no"><pre class="sp-pre-placeholder" style="margin-left:28px">import { useState } from &#x27;react&#x27;;

export default function Counter() {
  const [count, setCount] = useState(0);

  function handleClick() {
    setCount(count + 1);
  }

  return (
    &lt;button onClick={handleClick}&gt;
      You pressed me {count} times
    &lt;/button&gt;
  );
}
</pre><p id="enter-instructions-6414" style="display:none">To enter the code editing mode, press Enter. To exit the edit mode, press Escape</p><p id="exit-instructions-6414" style="display:none">You are editing the code. To exit the edit mode, press Escape</p></div></div></div><div class="sp-stack order-last xl:order-2"><div class="p-0 sm:p-2 md:p-4 lg:p-8 md:bg-card md:dark:bg-wash-dark h-full relative md:rounded-b-lg lg:rounded-b-none"><div style="padding:initial;position:relative"><iframe class="rounded-t-none bg-white md:shadow-md sm:rounded-lg w-full max-w-full absolute opacity-0 pointer-events-none" title="Sandbox Preview" style="height:100%;z-index:-1"></iframe></div></div></div></div></div></div></div><!--/$--></div><div class="flex justify-between items-center mt-4"><button class="bg-purple-50 border-purple-50 hover:bg-purple-50 focus:bg-purple-50 active:bg-purple-50 text-base leading-tight font-bold border rounded-lg py-2 px-4 focus:ring-1 focus:ring-offset-2 focus:ring-link active:bg-link active:border-link active:text-white active:ring-0 active:ring-offset-0 outline-none inline-flex items-center my-1 bg-link border-link text-white hover:bg-link focus:bg-link active:bg-link">Next <!-- -->Example<svg width="1em" height="1em" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg" class="block ml-1.5"><path d="M6.86612 13.6161C6.37796 14.1043 6.37796 14.8957 6.86612 15.3839C7.35427 15.872 8.14572 15.872 8.63388 15.3839L13.1339 10.8839C13.622 10.3957 13.622 9.60428 13.1339 9.11612L8.63388 4.61612C8.14572 4.12797 7.35427 4.12797 6.86612 4.61612C6.37796 5.10428 6.37796 5.89573 6.86612 6.38388L10.4822 10L6.86612 13.6161Z" fill="currentColor"></path></svg></button></div></div></div></div><div class="max-w-4xl ml-0 2xl:mx-auto"><hr class="my-6 block border-b border-border dark:border-border-dark"/><h3 id="updating-state-based-on-the-previous-state" class="jsx-1906412371 heading text-2xl leading-9 text-primary dark:text-primary-dark font-bold my-6">Updating state based on the previous state<a href="#updating-state-based-on-the-previous-state" aria-label="Link for Updating state based on the previous state" title="Link for Updating state based on the previous state" class="jsx-1906412371 anchor inline-block"><svg width="1em" height="1em" viewBox="0 0 13 13" xmlns="http://www.w3.org/2000/svg" class="jsx-1906412371 text-gray-70 ml-2 h-5 w-5"><g fill="currentColor" fill-rule="evenodd" class="jsx-1906412371"><path d="M7.778 7.975a2.5 2.5 0 0 0 .347-3.837L6.017 2.03a2.498 2.498 0 0 0-3.542-.007 2.5 2.5 0 0 0 .006 3.543l1.153 1.15c.07-.29.154-.563.25-.773.036-.077.084-.16.14-.25L3.18 4.85a1.496 1.496 0 0 1 .002-2.12 1.496 1.496 0 0 1 2.12 0l2.124 2.123a1.496 1.496 0 0 1-.333 2.37c.16.246.42.504.685.752z" class="jsx-1906412371"></path><path d="M5.657 4.557a2.5 2.5 0 0 0-.347 3.837l2.108 2.108a2.498 2.498 0 0 0 3.542.007 2.5 2.5 0 0 0-.006-3.543L9.802 5.815c-.07.29-.154.565-.25.774-.036.076-.084.16-.14.25l.842.84c.585.587.59 1.532 0 2.122-.587.585-1.532.59-2.12 0L6.008 7.68a1.496 1.496 0 0 1 .332-2.372c-.16-.245-.42-.503-.685-.75z" class="jsx-1906412371"></path></g></svg></a></h3><p class="whitespace-pre-wrap my-4">Suppose the <code class="inline text-code text-secondary dark:text-secondary-dark px-1 rounded-md no-underline bg-gray-30 bg-opacity-10 py-px">age</code> is <code class="inline text-code text-secondary dark:text-secondary-dark px-1 rounded-md no-underline bg-gray-30 bg-opacity-10 py-px">42</code>. This handler calls <code class="inline text-code text-secondary dark:text-secondary-dark px-1 rounded-md no-underline bg-gray-30 bg-opacity-10 py-px">setAge(age + 1)</code> three times:</p><div><!--$--><div translate="no" class="rounded-lg h-full w-full overflow-x-auto flex items-center bg-wash dark:bg-gray-95 shadow-lg my-8"><div class="sp-wrapper sp-sp-607024663"><div class="sp-stack"><pre class="sp-cm sp-pristine sp-javascript" translate="no"><code class="sp-pre-placeholder">function handleClick() {
  setAge(age + 1); // setAge(42 + 1)
  setAge(age + 1); // setAge(42 + 1)
  setAge(age + 1); // setAge(42 + 1)
}</code></pre></div></div></div><!--/$--></div><p class="whitespace-pre-wrap my-4">However, after one click, <code class="inline text-code text-secondary dark:text-secondary-dark px-1 rounded-md no-underline bg-gray-30 bg-opacity-10 py-px">age</code> will only be <code class="inline text-code text-secondary dark:text-secondary-dark px-1 rounded-md no-underline bg-gray-30 bg-opacity-10 py-px">43</code> rather than <code class="inline text-code text-secondary dark:text-secondary-dark px-1 rounded-md no-underline bg-gray-30 bg-opacity-10 py-px">45</code>! This is because calling the <code class="inline text-code text-secondary dark:text-secondary-dark px-1 rounded-md no-underline bg-gray-30 bg-opacity-10 py-px">set</code> function <a class="inline text-link dark:text-link-dark break-normal border-b border-link border-opacity-0 hover:border-opacity-100 duration-100 ease-in transition leading-normal" href="/learn/state-as-a-snapshot">does not update</a> the <code class="inline text-code text-secondary dark:text-secondary-dark px-1 rounded-md no-underline bg-gray-30 bg-opacity-10 py-px">age</code> state variable in the already running code. So each <code class="inline text-code text-secondary dark:text-secondary-dark px-1 rounded-md no-underline bg-gray-30 bg-opacity-10 py-px">setAge(age + 1)</code> call becomes <code class="inline text-code text-secondary dark:text-secondary-dark px-1 rounded-md no-underline bg-gray-30 bg-opacity-10 py-px">setAge(43)</code>.</p><p class="whitespace-pre-wrap my-4">To solve this problem, <strong class="font-bold">you may pass an <em>updater function</em></strong> to <code class="inline text-code text-secondary dark:text-secondary-dark px-1 rounded-md no-underline bg-gray-30 bg-opacity-10 py-px">setAge</code> instead of the next state:</p><div><!--$--><div translate="no" class="rounded-lg h-full w-full overflow-x-auto flex items-center bg-wash dark:bg-gray-95 shadow-lg my-8"><div class="sp-wrapper sp-sp-607024663"><div class="sp-stack"><pre class="sp-cm sp-pristine sp-javascript" translate="no"><code class="sp-pre-placeholder">function handleClick() {
  setAge(a =&gt; a + 1); // setAge(42 =&gt; 43)
  setAge(a =&gt; a + 1); // setAge(43 =&gt; 44)
  setAge(a =&gt; a + 1); // setAge(44 =&gt; 45)
}</code></pre></div></div></div><!--/$--></div><p class="whitespace-pre-wrap my-4">Here, <code class="inline text-code text-secondary dark:text-secondary-dark px-1 rounded-md no-underline bg-gray-30 bg-opacity-10 py-px">a =&gt; a + 1</code> is your updater function. It takes the <span data-step="1" class="code-step bg-opacity-10 dark:bg-opacity-20 relative rounded px-[6px] py-[1.5px] border-b-[2px] border-opacity-60 bg-blue-40 border-blue-40">pending state</span> and calculates the <span data-step="2" class="code-step bg-opacity-10 dark:bg-opacity-20 relative rounded px-[6px] py-[1.5px] border-b-[2px] border-opacity-60 bg-yellow-40 border-yellow-40">next state</span> from it.</p><p class="whitespace-pre-wrap my-4">React puts your updater functions in a <a class="inline text-link dark:text-link-dark break-normal border-b border-link border-opacity-0 hover:border-opacity-100 duration-100 ease-in transition leading-normal" href="/learn/queueing-a-series-of-state-updates">queue</a>. Then, during the next render, it will call them in the same order:</p><ol class="ml-6 my-3 list-decimal"><li class="leading-relaxed mb-1"><code class="inline text-code text-secondary dark:text-secondary-dark px-1 rounded-md no-underline bg-gray-30 bg-opacity-10 py-px">a =&gt; a + 1</code> will receive <code class="inline text-code text-secondary dark:text-secondary-dark px-1 rounded-md no-underline bg-gray-30 bg-opacity-10 py-px">42</code> as the pending state and return <code class="inline text-code text-secondary dark:text-secondary-dark px-1 rounded-md no-underline bg-gray-30 bg-opacity-10 py-px">43</code> as the next state.</li><li class="leading-relaxed mb-1"><code class="inline text-code text-secondary dark:text-secondary-dark px-1 rounded-md no-underline bg-gray-30 bg-opacity-10 py-px">a =&gt; a + 1</code> will receive <code class="inline text-code text-secondary dark:text-secondary-dark px-1 rounded-md no-underline bg-gray-30 bg-opacity-10 py-px">43</code> as the pending state and return <code class="inline text-code text-secondary dark:text-secondary-dark px-1 rounded-md no-underline bg-gray-30 bg-opacity-10 py-px">44</code> as the next state.</li><li class="leading-relaxed mb-1"><code class="inline text-code text-secondary dark:text-secondary-dark px-1 rounded-md no-underline bg-gray-30 bg-opacity-10 py-px">a =&gt; a + 1</code> will receive <code class="inline text-code text-secondary dark:text-secondary-dark px-1 rounded-md no-underline bg-gray-30 bg-opacity-10 py-px">44</code> as the pending state and return <code class="inline text-code text-secondary dark:text-secondary-dark px-1 rounded-md no-underline bg-gray-30 bg-opacity-10 py-px">45</code> as the next state.</li></ol><p class="whitespace-pre-wrap my-4">There are no other queued updates, so React will store <code class="inline text-code text-secondary dark:text-secondary-dark px-1 rounded-md no-underline bg-gray-30 bg-opacity-10 py-px">45</code> as the current state in the end.</p><p class="whitespace-pre-wrap my-4">By convention, it’s common to name the pending state argument for the first letter of the state variable name, like <code class="inline text-code text-secondary dark:text-secondary-dark px-1 rounded-md no-underline bg-gray-30 bg-opacity-10 py-px">a</code> for <code class="inline text-code text-secondary dark:text-secondary-dark px-1 rounded-md no-underline bg-gray-30 bg-opacity-10 py-px">age</code>. However, you may also call it like <code class="inline text-code text-secondary dark:text-secondary-dark px-1 rounded-md no-underline bg-gray-30 bg-opacity-10 py-px">prevAge</code> or something else that you find clearer.</p><p class="whitespace-pre-wrap my-4">React may <a class="inline text-link dark:text-link-dark break-normal border-b border-link border-opacity-0 hover:border-opacity-100 duration-100 ease-in transition leading-normal" href="#my-initializer-or-updater-function-runs-twice">call your updaters twice</a> in development to verify that they are <a class="inline text-link dark:text-link-dark break-normal border-b border-link border-opacity-0 hover:border-opacity-100 duration-100 ease-in transition leading-normal" href="/learn/keeping-components-pure">pure</a>.</p><div class="my-12 rounded-lg shadow-inner relative dark:bg-opacity-20 dark:bg-purple-60 bg-purple-5"><div class="p-8"><h5 class="mb-4 uppercase font-bold flex items-center text-sm dark:text-purple-30 text-purple-50"><svg class="inline mr-2 dark:text-purple-30 text-purple-40" width="0.78em" height="0.78em" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M7.62728 12.3491V13.6825H6.29395V12.3491H0.960612C0.783801 12.3491 0.614232 12.2789 0.489207 12.1539C0.364183 12.0288 0.293945 11.8593 0.293945 11.6825V1.01579C0.293945 0.838979 0.364183 0.669409 0.489207 0.544385C0.614232 0.419361 0.783801 0.349123 0.960612 0.349123H4.96061C5.339 0.348674 5.71313 0.42896 6.05803 0.584621C6.40292 0.740282 6.71063 0.967734 6.96061 1.25179C7.2106 0.967734 7.51831 0.740282 7.8632 0.584621C8.20809 0.42896 8.58222 0.348674 8.96061 0.349123H12.9606C13.1374 0.349123 13.307 0.419361 13.432 0.544385C13.557 0.669409 13.6273 0.838979 13.6273 1.01579V11.6825C13.6273 11.8593 13.557 12.0288 13.432 12.1539C13.307 12.2789 13.1374 12.3491 12.9606 12.3491H7.62728ZM12.2939 11.0158V1.68246H8.96061C8.60699 1.68246 8.26785 1.82293 8.0178 2.07298C7.76776 2.32303 7.62728 2.66217 7.62728 3.01579V11.0158H12.2939ZM6.29395 11.0158V3.01579C6.29395 2.66217 6.15347 2.32303 5.90342 2.07298C5.65337 1.82293 5.31423 1.68246 4.96061 1.68246H1.62728V11.0158H6.29395Z" fill="currentColor"></path></svg>Deep Dive</h5><div class="mb-4"><h3 class="text-xl font-bold text-primary dark:text-primary-dark">Is using an updater always preferred?</h3></div><button class="bg-purple-50 border-purple-50 hover:bg-purple-40 focus:bg-purple-50 active:bg-purple-50 text-base leading-tight font-bold border rounded-lg py-2 px-4 focus:ring-1 focus:ring-offset-2 focus:ring-link active:bg-link active:border-link active:text-white active:ring-0 active:ring-offset-0 outline-none inline-flex items-center my-1 bg-link border-link text-white hover:bg-link focus:bg-link active:bg-link"><span class="mr-1"><svg class="rotate-0" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20"><g fill="none" fill-rule="evenodd" transform="translate(-446 -398)"><path fill="currentColor" fill-rule="nonzero" d="M95.8838835,240.366117 C95.3957281,239.877961 94.6042719,239.877961 94.1161165,240.366117 C93.6279612,240.854272 93.6279612,241.645728 94.1161165,242.133883 L98.6161165,246.633883 C99.1042719,247.122039 99.8957281,247.122039 100.383883,246.633883 L104.883883,242.133883 C105.372039,241.645728 105.372039,240.854272 104.883883,240.366117 C104.395728,239.877961 103.604272,239.877961 103.116117,240.366117 L99.5,243.982233 L95.8838835,240.366117 Z" transform="translate(356.5 164.5)"></path><polygon points="446 418 466 418 466 398 446 398"></polygon></g></svg></span>Show Details</button></div><div class="p-8 border-t dark:border-purple-60 border-purple-10  hidden"><p class="whitespace-pre-wrap my-4">You might hear a recommendation to always write code like <code class="inline text-code text-secondary dark:text-secondary-dark px-1 rounded-md no-underline bg-gray-30 bg-opacity-10 py-px">setAge(a =&gt; a + 1)</code> if the state you’re setting is calculated from the previous state. There is no harm in it, but it is also not always necessary.</p><p class="whitespace-pre-wrap my-4">In most cases, there is no difference between these two approaches. React always makes sure that for intentional user actions, like clicks, the <code class="inline text-code text-secondary dark:text-secondary-dark px-1 rounded-md no-underline bg-gray-30 bg-opacity-10 py-px">age</code> state variable would be updated before the next click. This means there is no risk of a click handler seeing a “stale” <code class="inline text-code text-secondary dark:text-secondary-dark px-1 rounded-md no-underline bg-gray-30 bg-opacity-10 py-px">age</code> at the beginning of the event handler.</p><p class="whitespace-pre-wrap my-4">However, if you do multiple updates within the same event, updaters can be helpful. They’re also helpful if accessing the state variable itself is inconvenient (you might run into this when optimizing re-renders).</p><p class="whitespace-pre-wrap my-4">If you prefer consistency over slightly more verbose syntax, it’s reasonable to always write an updater if the state you’re setting is calculated from the previous state. If it’s calculated from the previous state of some <em>other</em> state variable, you might want to combine them into one object and <a class="inline text-link dark:text-link-dark break-normal border-b border-link border-opacity-0 hover:border-opacity-100 duration-100 ease-in transition leading-normal" href="/learn/extracting-state-logic-into-a-reducer">use a reducer</a>.</p></div></div></div><div class="max-w-7xl mx-auto py-4"><div class="border-gray-10 bg-card dark:bg-card-dark shadow-inner rounded-none -mx-5 sm:mx-auto sm:rounded-lg"><div class="py-2 px-5 sm:px-8 pb-0 md:pb-0"><h4 id="examples-updater" class="jsx-1906412371 heading mb-2 leading-10 relative text-xl text-purple-50 dark:text-purple-30 text-xl font-bold leading-9 my-4">The difference between passing an updater and passing the next state directly<a href="#examples-updater" aria-label="Link for The difference between passing an updater and passing the next state directly" title="Link for The difference between passing an updater and passing the next state directly" class="jsx-1906412371 anchor inline-block"><svg width="1em" height="1em" viewBox="0 0 13 13" xmlns="http://www.w3.org/2000/svg" class="jsx-1906412371 text-gray-70 ml-2 h-5 w-5"><g fill="currentColor" fill-rule="evenodd" class="jsx-1906412371"><path d="M7.778 7.975a2.5 2.5 0 0 0 .347-3.837L6.017 2.03a2.498 2.498 0 0 0-3.542-.007 2.5 2.5 0 0 0 .006 3.543l1.153 1.15c.07-.29.154-.563.25-.773.036-.077.084-.16.14-.25L3.18 4.85a1.496 1.496 0 0 1 .002-2.12 1.496 1.496 0 0 1 2.12 0l2.124 2.123a1.496 1.496 0 0 1-.333 2.37c.16.246.42.504.685.752z" class="jsx-1906412371"></path><path d="M5.657 4.557a2.5 2.5 0 0 0-.347 3.837l2.108 2.108a2.498 2.498 0 0 0 3.542.007 2.5 2.5 0 0 0-.006-3.543L9.802 5.815c-.07.29-.154.565-.25.774-.036.076-.084.16-.14.25l.842.84c.585.587.59 1.532 0 2.122-.587.585-1.532.59-2.12 0L6.008 7.68a1.496 1.496 0 0 1 .332-2.372c-.16-.245-.42-.503-.685-.75z" class="jsx-1906412371"></path></g></svg></a></h4><div class="flex items-center justify-between"><div class="overflow-hidden"><div class="flex relative transition-transform content-box overflow-x-auto"><button class="py-2 mr-4 text-base border-b-4 duration-100 ease-in transition whitespace-nowrap text-ellipsis text-purple-50 border-purple-50 hover:text-purple-50 dark:text-purple-30 dark:border-purple-30 dark:hover:text-purple-30">1<!-- -->. <!-- -->Passing the updater function</button><button class="py-2 mr-4 text-base border-b-4 duration-100 ease-in transition whitespace-nowrap text-ellipsis">2<!-- -->. <!-- -->Passing the next state directly</button></div></div><div class="flex z-10 pb-2 pl-2"><button aria-label="Scroll left" class="bg-secondary-button dark:bg-secondary-button-dark h-8 px-2 rounded-l border-gray-20 border-r text-gray-30"><svg class="rotate-90" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20"><g fill="none" fill-rule="evenodd" transform="translate(-446 -398)"><path fill="currentColor" fill-rule="nonzero" d="M95.8838835,240.366117 C95.3957281,239.877961 94.6042719,239.877961 94.1161165,240.366117 C93.6279612,240.854272 93.6279612,241.645728 94.1161165,242.133883 L98.6161165,246.633883 C99.1042719,247.122039 99.8957281,247.122039 100.383883,246.633883 L104.883883,242.133883 C105.372039,241.645728 105.372039,240.854272 104.883883,240.366117 C104.395728,239.877961 103.604272,239.877961 103.116117,240.366117 L99.5,243.982233 L95.8838835,240.366117 Z" transform="translate(356.5 164.5)"></path><polygon points="446 418 466 418 466 398 446 398"></polygon></g></svg></button><button aria-label="Scroll right" class="bg-secondary-button dark:bg-secondary-button-dark h-8 px-2 rounded-r-lg text-primary dark:text-primary-dark"><svg class="-rotate-90" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20"><g fill="none" fill-rule="evenodd" transform="translate(-446 -398)"><path fill="currentColor" fill-rule="nonzero" d="M95.8838835,240.366117 C95.3957281,239.877961 94.6042719,239.877961 94.1161165,240.366117 C93.6279612,240.854272 93.6279612,241.645728 94.1161165,242.133883 L98.6161165,246.633883 C99.1042719,247.122039 99.8957281,247.122039 100.383883,246.633883 L104.883883,242.133883 C105.372039,241.645728 105.372039,240.854272 104.883883,240.366117 C104.395728,239.877961 103.604272,239.877961 103.116117,240.366117 L99.5,243.982233 L95.8838835,240.366117 Z" transform="translate(356.5 164.5)"></path><polygon points="446 418 466 418 466 398 446 398"></polygon></g></svg></button></div></div></div><div class="p-5 sm:py-8 sm:px-8"><div><h3 class="text-xl text-primary dark:text-primary-dark mb-2"><div class="font-bold block md:inline">Example<!-- --> <!-- -->1<!-- --> <!-- -->of <!-- -->2<span class="text-primary dark:text-primary-dark">: </span></div>Passing the updater function</h3><p class="whitespace-pre-wrap my-4">This example passes the updater function, so the “+3” button works.</p><!--$--><div class="sandpack-container my-8" translate="no"><div class="shadow-lg dark:shadow-lg-dark rounded-lg"><div class="bg-wash dark:bg-card-dark flex justify-between items-center relative z-10 border-b border-border dark:border-border-dark rounded-t-lg rounded-b-none"><div class="px-4 lg:px-6"><div class="sp-tabs" translate="no"><div aria-label="Select active file" class="sp-tabs-scrollable-container" role="tablist"><button aria-selected="true" class="sp-tab-button" data-active="true" role="tab" title="/App.js" type="button">App.js</button></div></div></div><div class="px-3 flex items-center justify-end grow text-right" translate="yes"><button class="text-sm text-primary dark:text-primary-dark inline-flex items-center hover:text-link duration-100 ease-in transition mx-1" title="Reset Sandbox" type="button"><svg class="inline mb-0.5 ml-1 mr-1 relative top-0.5" width="0.78em" height="0.78em" viewBox="0 0 14 14" xmlns="http://www.w3.org/2000/svg"><path d="M11.3567 11.9929C10.147 13.0412 8.59937 13.6172 6.9987 13.615C3.3167 13.615 0.332031 10.6303 0.332031 6.94828C0.332031 3.26628 3.3167 0.281616 6.9987 0.281616C10.6807 0.281616 13.6654 3.26628 13.6654 6.94828C13.6654 8.37228 13.2187 9.69228 12.4587 10.775L10.332 6.94828H12.332C12.3319 5.71909 11.9072 4.52766 11.1298 3.57554C10.3524 2.62343 9.26994 1.96908 8.06559 1.72319C6.86124 1.4773 5.60892 1.65496 4.52048 2.22613C3.43205 2.79729 2.57431 3.72689 2.09238 4.85767C1.61045 5.98845 1.5339 7.25099 1.87569 8.43171C2.21748 9.61243 2.95663 10.6388 3.96809 11.3373C4.97955 12.0358 6.20123 12.3635 7.42646 12.2649C8.6517 12.1663 9.80527 11.6475 10.692 10.7963L11.3567 11.9929Z" fill="currentColor"></path></svg> Reset</button><a href="https://codesandbox.io/api/v1/sandboxes/define?undefined" rel="noreferrer noopener" target="_blank" title="Open in CodeSandbox" class="text-sm text-primary dark:text-primary-dark inline-flex items-center hover:text-link duration-100 ease-in transition mx-1 ml-3 md:ml-1"><svg width=".8em" height=".8em" viewBox="0 0 13 13" xmlns="http://www.w3.org/2000/svg" class="inline mb-0.5 ml-1 mr-1 relative top-px"><path d="M4.72038 2.94824V4.28158H1.38704V11.6149H8.72038V8.28158H10.0537V12.2816C10.0537 12.4584 9.98347 12.628 9.85845 12.753C9.73343 12.878 9.56386 12.9482 9.38704 12.9482H0.720378C0.543567 12.9482 0.373997 12.878 0.248973 12.753C0.123949 12.628 0.0537109 12.4584 0.0537109 12.2816V3.61491C0.0537109 3.4381 0.123949 3.26853 0.248973 3.1435C0.373997 3.01848 0.543567 2.94824 0.720378 2.94824H4.72038ZM12.0537 0.948242V6.28158H10.7204V3.22358L5.52504 8.41958L4.58238 7.47691L9.77704 2.28158H6.72038V0.948242H12.0537Z" fill="currentColor"></path></svg><span class="hidden md:block">Fork</span></a></div></div><div class="sp-wrapper sp-sp-607024663"><div class="sp-layout sp-custom-layout"><div class="sp-stack"><div class="sp-code-editor"><div aria-describedby="enter-instructions-4708" aria-label="Code Editor for App.js" class="sp-cm sp-pristine sp-javascript" role="group" tabindex="0" translate="no"><pre class="sp-pre-placeholder" style="margin-left:28px">import { useState } from &#x27;react&#x27;;

export default function Counter() {
  const [age, setAge] = useState(42);

  function increment() {
    setAge(a =&gt; a + 1);
  }

  return (
    &lt;&gt;
      &lt;h1&gt;Your age: {age}&lt;/h1&gt;
      &lt;button onClick={() =&gt; {
        increment();
        increment();
        increment();
      }}&gt;+3&lt;/button&gt;
      &lt;button onClick={() =&gt; {
        increment();
      }}&gt;+1&lt;/button&gt;
    &lt;/&gt;
  );
}
</pre><p id="enter-instructions-4708" style="display:none">To enter the code editing mode, press Enter. To exit the edit mode, press Escape</p><p id="exit-instructions-4708" style="display:none">You are editing the code. To exit the edit mode, press Escape</p></div></div></div><div class="sp-stack order-last xl:order-2"><div class="p-0 sm:p-2 md:p-4 lg:p-8 md:bg-card md:dark:bg-wash-dark h-full relative md:rounded-b-lg lg:rounded-b-none"><div style="padding:initial;position:relative"><iframe class="rounded-t-none bg-white md:shadow-md sm:rounded-lg w-full max-w-full absolute opacity-0 pointer-events-none" title="Sandbox Preview" style="height:100%;z-index:-1"></iframe></div></div></div><button translate="yes" class="flex text-base justify-between dark:border-card-dark bg-wash dark:bg-card-dark items-center z-10 rounded-t-none p-1 w-full order-2 xl:order-last border-b-1 relative top-0"><span class="flex p-2 focus:outline-none text-primary dark:text-primary-dark"><svg class="rotate-0 inline mr-1.5 text-xl" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20"><g fill="none" fill-rule="evenodd" transform="translate(-446 -398)"><path fill="currentColor" fill-rule="nonzero" d="M95.8838835,240.366117 C95.3957281,239.877961 94.6042719,239.877961 94.1161165,240.366117 C93.6279612,240.854272 93.6279612,241.645728 94.1161165,242.133883 L98.6161165,246.633883 C99.1042719,247.122039 99.8957281,247.122039 100.383883,246.633883 L104.883883,242.133883 C105.372039,241.645728 105.372039,240.854272 104.883883,240.366117 C104.395728,239.877961 103.604272,239.877961 103.116117,240.366117 L99.5,243.982233 L95.8838835,240.366117 Z" transform="translate(356.5 164.5)"></path><polygon points="446 418 466 418 466 398 446 398"></polygon></g></svg>Show more</span></button></div></div></div></div><!--/$--></div><div class="flex justify-between items-center mt-4"><button class="bg-purple-50 border-purple-50 hover:bg-purple-50 focus:bg-purple-50 active:bg-purple-50 text-base leading-tight font-bold border rounded-lg py-2 px-4 focus:ring-1 focus:ring-offset-2 focus:ring-link active:bg-link active:border-link active:text-white active:ring-0 active:ring-offset-0 outline-none inline-flex items-center my-1 bg-link border-link text-white hover:bg-link focus:bg-link active:bg-link">Next <!-- -->Example<svg width="1em" height="1em" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg" class="block ml-1.5"><path d="M6.86612 13.6161C6.37796 14.1043 6.37796 14.8957 6.86612 15.3839C7.35427 15.872 8.14572 15.872 8.63388 15.3839L13.1339 10.8839C13.622 10.3957 13.622 9.60428 13.1339 9.11612L8.63388 4.61612C8.14572 4.12797 7.35427 4.12797 6.86612 4.61612C6.37796 5.10428 6.37796 5.89573 6.86612 6.38388L10.4822 10L6.86612 13.6161Z" fill="currentColor"></path></svg></button></div></div></div></div><div class="max-w-4xl ml-0 2xl:mx-auto"><hr class="my-6 block border-b border-border dark:border-border-dark"/><h3 id="updating-objects-and-arrays-in-state" class="jsx-1906412371 heading text-2xl leading-9 text-primary dark:text-primary-dark font-bold my-6">Updating objects and arrays in state<a href="#updating-objects-and-arrays-in-state" aria-label="Link for Updating objects and arrays in state" title="Link for Updating objects and arrays in state" class="jsx-1906412371 anchor inline-block"><svg width="1em" height="1em" viewBox="0 0 13 13" xmlns="http://www.w3.org/2000/svg" class="jsx-1906412371 text-gray-70 ml-2 h-5 w-5"><g fill="currentColor" fill-rule="evenodd" class="jsx-1906412371"><path d="M7.778 7.975a2.5 2.5 0 0 0 .347-3.837L6.017 2.03a2.498 2.498 0 0 0-3.542-.007 2.5 2.5 0 0 0 .006 3.543l1.153 1.15c.07-.29.154-.563.25-.773.036-.077.084-.16.14-.25L3.18 4.85a1.496 1.496 0 0 1 .002-2.12 1.496 1.496 0 0 1 2.12 0l2.124 2.123a1.496 1.496 0 0 1-.333 2.37c.16.246.42.504.685.752z" class="jsx-1906412371"></path><path d="M5.657 4.557a2.5 2.5 0 0 0-.347 3.837l2.108 2.108a2.498 2.498 0 0 0 3.542.007 2.5 2.5 0 0 0-.006-3.543L9.802 5.815c-.07.29-.154.565-.25.774-.036.076-.084.16-.14.25l.842.84c.585.587.59 1.532 0 2.122-.587.585-1.532.59-2.12 0L6.008 7.68a1.496 1.496 0 0 1 .332-2.372c-.16-.245-.42-.503-.685-.75z" class="jsx-1906412371"></path></g></svg></a></h3><p class="whitespace-pre-wrap my-4">You can put objects and arrays into state. In React, state is considered read-only, so <strong class="font-bold">you should <em>replace</em> it rather than <em>mutate</em> your existing objects</strong>. For example, if you have a <code class="inline text-code text-secondary dark:text-secondary-dark px-1 rounded-md no-underline bg-gray-30 bg-opacity-10 py-px">form</code> object in state, don’t update it like this:</p><div><!--$--><div translate="no" class="rounded-lg h-full w-full overflow-x-auto flex items-center bg-wash dark:bg-gray-95 shadow-lg my-8"><div class="sp-wrapper sp-sp-607024663"><div class="sp-stack"><pre class="sp-cm sp-pristine sp-javascript" translate="no"><code class="sp-pre-placeholder">// Don&#x27;t mutate an object in state like this:
form.firstName = &#x27;Taylor&#x27;;</code></pre></div></div></div><!--/$--></div><p class="whitespace-pre-wrap my-4">Instead, replace the whole object by creating a new one:</p><div><!--$--><div translate="no" class="rounded-lg h-full w-full overflow-x-auto flex items-center bg-wash dark:bg-gray-95 shadow-lg my-8"><div class="sp-wrapper sp-sp-607024663"><div class="sp-stack"><pre class="sp-cm sp-pristine sp-javascript" translate="no"><code class="sp-pre-placeholder">setForm({
  ...form,
  firstName: &#x27;Taylor&#x27;
});</code></pre></div></div></div><!--/$--></div><p class="whitespace-pre-wrap my-4">Read <a class="inline text-link dark:text-link-dark break-normal border-b border-link border-opacity-0 hover:border-opacity-100 duration-100 ease-in transition leading-normal" href="/learn/updating-objects-in-state">updating objects in state</a> and <a class="inline text-link dark:text-link-dark break-normal border-b border-link border-opacity-0 hover:border-opacity-100 duration-100 ease-in transition leading-normal" href="/learn/updating-arrays-in-state">updating arrays in state</a> to learn more.</p></div><div class="max-w-7xl mx-auto py-4"><div class="border-gray-10 bg-card dark:bg-card-dark shadow-inner rounded-none -mx-5 sm:mx-auto sm:rounded-lg"><div class="py-2 px-5 sm:px-8 pb-0 md:pb-0"><h4 id="examples-objects" class="jsx-1906412371 heading mb-2 leading-10 relative text-xl text-purple-50 dark:text-purple-30 text-xl font-bold leading-9 my-4">Examples of objects and arrays in state<a href="#examples-objects" aria-label="Link for Examples of objects and arrays in state" title="Link for Examples of objects and arrays in state" class="jsx-1906412371 anchor inline-block"><svg width="1em" height="1em" viewBox="0 0 13 13" xmlns="http://www.w3.org/2000/svg" class="jsx-1906412371 text-gray-70 ml-2 h-5 w-5"><g fill="currentColor" fill-rule="evenodd" class="jsx-1906412371"><path d="M7.778 7.975a2.5 2.5 0 0 0 .347-3.837L6.017 2.03a2.498 2.498 0 0 0-3.542-.007 2.5 2.5 0 0 0 .006 3.543l1.153 1.15c.07-.29.154-.563.25-.773.036-.077.084-.16.14-.25L3.18 4.85a1.496 1.496 0 0 1 .002-2.12 1.496 1.496 0 0 1 2.12 0l2.124 2.123a1.496 1.496 0 0 1-.333 2.37c.16.246.42.504.685.752z" class="jsx-1906412371"></path><path d="M5.657 4.557a2.5 2.5 0 0 0-.347 3.837l2.108 2.108a2.498 2.498 0 0 0 3.542.007 2.5 2.5 0 0 0-.006-3.543L9.802 5.815c-.07.29-.154.565-.25.774-.036.076-.084.16-.14.25l.842.84c.585.587.59 1.532 0 2.122-.587.585-1.532.59-2.12 0L6.008 7.68a1.496 1.496 0 0 1 .332-2.372c-.16-.245-.42-.503-.685-.75z" class="jsx-1906412371"></path></g></svg></a></h4><div class="flex items-center justify-between"><div class="overflow-hidden"><div class="flex relative transition-transform content-box overflow-x-auto"><button class="py-2 mr-4 text-base border-b-4 duration-100 ease-in transition whitespace-nowrap text-ellipsis text-purple-50 border-purple-50 hover:text-purple-50 dark:text-purple-30 dark:border-purple-30 dark:hover:text-purple-30">1<!-- -->. <!-- -->Form (object)</button><button class="py-2 mr-4 text-base border-b-4 duration-100 ease-in transition whitespace-nowrap text-ellipsis">2<!-- -->. <!-- -->Form (nested object)</button><button class="py-2 mr-4 text-base border-b-4 duration-100 ease-in transition whitespace-nowrap text-ellipsis">3<!-- -->. <!-- -->List (array)</button><button class="py-2 mr-4 text-base border-b-4 duration-100 ease-in transition whitespace-nowrap text-ellipsis">4<!-- -->. <!-- -->Writing concise update logic with Immer</button></div></div><div class="flex z-10 pb-2 pl-2"><button aria-label="Scroll left" class="bg-secondary-button dark:bg-secondary-button-dark h-8 px-2 rounded-l border-gray-20 border-r text-gray-30"><svg class="rotate-90" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20"><g fill="none" fill-rule="evenodd" transform="translate(-446 -398)"><path fill="currentColor" fill-rule="nonzero" d="M95.8838835,240.366117 C95.3957281,239.877961 94.6042719,239.877961 94.1161165,240.366117 C93.6279612,240.854272 93.6279612,241.645728 94.1161165,242.133883 L98.6161165,246.633883 C99.1042719,247.122039 99.8957281,247.122039 100.383883,246.633883 L104.883883,242.133883 C105.372039,241.645728 105.372039,240.854272 104.883883,240.366117 C104.395728,239.877961 103.604272,239.877961 103.116117,240.366117 L99.5,243.982233 L95.8838835,240.366117 Z" transform="translate(356.5 164.5)"></path><polygon points="446 418 466 418 466 398 446 398"></polygon></g></svg></button><button aria-label="Scroll right" class="bg-secondary-button dark:bg-secondary-button-dark h-8 px-2 rounded-r-lg text-primary dark:text-primary-dark"><svg class="-rotate-90" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20"><g fill="none" fill-rule="evenodd" transform="translate(-446 -398)"><path fill="currentColor" fill-rule="nonzero" d="M95.8838835,240.366117 C95.3957281,239.877961 94.6042719,239.877961 94.1161165,240.366117 C93.6279612,240.854272 93.6279612,241.645728 94.1161165,242.133883 L98.6161165,246.633883 C99.1042719,247.122039 99.8957281,247.122039 100.383883,246.633883 L104.883883,242.133883 C105.372039,241.645728 105.372039,240.854272 104.883883,240.366117 C104.395728,239.877961 103.604272,239.877961 103.116117,240.366117 L99.5,243.982233 L95.8838835,240.366117 Z" transform="translate(356.5 164.5)"></path><polygon points="446 418 466 418 466 398 446 398"></polygon></g></svg></button></div></div></div><div class="p-5 sm:py-8 sm:px-8"><div><h3 class="text-xl text-primary dark:text-primary-dark mb-2"><div class="font-bold block md:inline">Example<!-- --> <!-- -->1<!-- --> <!-- -->of <!-- -->4<span class="text-primary dark:text-primary-dark">: </span></div>Form (object)</h3><p class="whitespace-pre-wrap my-4">In this example, the <code class="inline text-code text-secondary dark:text-secondary-dark px-1 rounded-md no-underline bg-gray-30 bg-opacity-10 py-px">form</code> state variable holds an object. Each input has a change handler that calls <code class="inline text-code text-secondary dark:text-secondary-dark px-1 rounded-md no-underline bg-gray-30 bg-opacity-10 py-px">setForm</code> with the next state of the entire form. The <code class="inline text-code text-secondary dark:text-secondary-dark px-1 rounded-md no-underline bg-gray-30 bg-opacity-10 py-px">{ ...form }</code> spread syntax ensures that the state object is replaced rather than mutated.</p><!--$--><div class="sandpack-container my-8" translate="no"><div class="shadow-lg dark:shadow-lg-dark rounded-lg"><div class="bg-wash dark:bg-card-dark flex justify-between items-center relative z-10 border-b border-border dark:border-border-dark rounded-t-lg rounded-b-none"><div class="px-4 lg:px-6"><div class="sp-tabs" translate="no"><div aria-label="Select active file" class="sp-tabs-scrollable-container" role="tablist"><button aria-selected="true" class="sp-tab-button" data-active="true" role="tab" title="/App.js" type="button">App.js</button></div></div></div><div class="px-3 flex items-center justify-end grow text-right" translate="yes"><button class="text-sm text-primary dark:text-primary-dark inline-flex items-center hover:text-link duration-100 ease-in transition mx-1" title="Reset Sandbox" type="button"><svg class="inline mb-0.5 ml-1 mr-1 relative top-0.5" width="0.78em" height="0.78em" viewBox="0 0 14 14" xmlns="http://www.w3.org/2000/svg"><path d="M11.3567 11.9929C10.147 13.0412 8.59937 13.6172 6.9987 13.615C3.3167 13.615 0.332031 10.6303 0.332031 6.94828C0.332031 3.26628 3.3167 0.281616 6.9987 0.281616C10.6807 0.281616 13.6654 3.26628 13.6654 6.94828C13.6654 8.37228 13.2187 9.69228 12.4587 10.775L10.332 6.94828H12.332C12.3319 5.71909 11.9072 4.52766 11.1298 3.57554C10.3524 2.62343 9.26994 1.96908 8.06559 1.72319C6.86124 1.4773 5.60892 1.65496 4.52048 2.22613C3.43205 2.79729 2.57431 3.72689 2.09238 4.85767C1.61045 5.98845 1.5339 7.25099 1.87569 8.43171C2.21748 9.61243 2.95663 10.6388 3.96809 11.3373C4.97955 12.0358 6.20123 12.3635 7.42646 12.2649C8.6517 12.1663 9.80527 11.6475 10.692 10.7963L11.3567 11.9929Z" fill="currentColor"></path></svg> Reset</button><a href="https://codesandbox.io/api/v1/sandboxes/define?undefined" rel="noreferrer noopener" target="_blank" title="Open in CodeSandbox" class="text-sm text-primary dark:text-primary-dark inline-flex items-center hover:text-link duration-100 ease-in transition mx-1 ml-3 md:ml-1"><svg width=".8em" height=".8em" viewBox="0 0 13 13" xmlns="http://www.w3.org/2000/svg" class="inline mb-0.5 ml-1 mr-1 relative top-px"><path d="M4.72038 2.94824V4.28158H1.38704V11.6149H8.72038V8.28158H10.0537V12.2816C10.0537 12.4584 9.98347 12.628 9.85845 12.753C9.73343 12.878 9.56386 12.9482 9.38704 12.9482H0.720378C0.543567 12.9482 0.373997 12.878 0.248973 12.753C0.123949 12.628 0.0537109 12.4584 0.0537109 12.2816V3.61491C0.0537109 3.4381 0.123949 3.26853 0.248973 3.1435C0.373997 3.01848 0.543567 2.94824 0.720378 2.94824H4.72038ZM12.0537 0.948242V6.28158H10.7204V3.22358L5.52504 8.41958L4.58238 7.47691L9.77704 2.28158H6.72038V0.948242H12.0537Z" fill="currentColor"></path></svg><span class="hidden md:block">Fork</span></a></div></div><div class="sp-wrapper sp-sp-607024663"><div class="sp-layout sp-custom-layout"><div class="sp-stack"><div class="sp-code-editor"><div aria-describedby="enter-instructions-8913" aria-label="Code Editor for App.js" class="sp-cm sp-pristine sp-javascript" role="group" tabindex="0" translate="no"><pre class="sp-pre-placeholder" style="margin-left:28px">import { useState } from &#x27;react&#x27;;

export default function Form() {
  const [form, setForm] = useState({
    firstName: &#x27;Barbara&#x27;,
    lastName: &#x27;Hepworth&#x27;,
    email: &#x27;bhepworth@sculpture.com&#x27;,
  });

  return (
    &lt;&gt;
      &lt;label&gt;
        First name:
        &lt;input
          value={form.firstName}
          onChange={e =&gt; {
            setForm({
              ...form,
              firstName: e.target.value
            });
          }}
        /&gt;
      &lt;/label&gt;
      &lt;label&gt;
        Last name:
        &lt;input
          value={form.lastName}
          onChange={e =&gt; {
            setForm({
              ...form,
              lastName: e.target.value
            });
          }}
        /&gt;
      &lt;/label&gt;
      &lt;label&gt;
        Email:
        &lt;input
          value={form.email}
          onChange={e =&gt; {
            setForm({
              ...form,
              email: e.target.value
            });
          }}
        /&gt;
      &lt;/label&gt;
      &lt;p&gt;
        {form.firstName}{&#x27; &#x27;}
        {form.lastName}{&#x27; &#x27;}
        ({form.email})
      &lt;/p&gt;
    &lt;/&gt;
  );
}
</pre><p id="enter-instructions-8913" style="display:none">To enter the code editing mode, press Enter. To exit the edit mode, press Escape</p><p id="exit-instructions-8913" style="display:none">You are editing the code. To exit the edit mode, press Escape</p></div></div></div><div class="sp-stack order-last xl:order-2"><div class="p-0 sm:p-2 md:p-4 lg:p-8 md:bg-card md:dark:bg-wash-dark h-full relative md:rounded-b-lg lg:rounded-b-none"><div style="padding:initial;position:relative"><iframe class="rounded-t-none bg-white md:shadow-md sm:rounded-lg w-full max-w-full absolute opacity-0 pointer-events-none" title="Sandbox Preview" style="height:100%;z-index:-1"></iframe></div></div></div><button translate="yes" class="flex text-base justify-between dark:border-card-dark bg-wash dark:bg-card-dark items-center z-10 rounded-t-none p-1 w-full order-2 xl:order-last border-b-1 relative top-0"><span class="flex p-2 focus:outline-none text-primary dark:text-primary-dark"><svg class="rotate-0 inline mr-1.5 text-xl" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20"><g fill="none" fill-rule="evenodd" transform="translate(-446 -398)"><path fill="currentColor" fill-rule="nonzero" d="M95.8838835,240.366117 C95.3957281,239.877961 94.6042719,239.877961 94.1161165,240.366117 C93.6279612,240.854272 93.6279612,241.645728 94.1161165,242.133883 L98.6161165,246.633883 C99.1042719,247.122039 99.8957281,247.122039 100.383883,246.633883 L104.883883,242.133883 C105.372039,241.645728 105.372039,240.854272 104.883883,240.366117 C104.395728,239.877961 103.604272,239.877961 103.116117,240.366117 L99.5,243.982233 L95.8838835,240.366117 Z" transform="translate(356.5 164.5)"></path><polygon points="446 418 466 418 466 398 446 398"></polygon></g></svg>Show more</span></button></div></div></div></div><!--/$--></div><div class="flex justify-between items-center mt-4"><button class="bg-purple-50 border-purple-50 hover:bg-purple-50 focus:bg-purple-50 active:bg-purple-50 text-base leading-tight font-bold border rounded-lg py-2 px-4 focus:ring-1 focus:ring-offset-2 focus:ring-link active:bg-link active:border-link active:text-white active:ring-0 active:ring-offset-0 outline-none inline-flex items-center my-1 bg-link border-link text-white hover:bg-link focus:bg-link active:bg-link">Next <!-- -->Example<svg width="1em" height="1em" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg" class="block ml-1.5"><path d="M6.86612 13.6161C6.37796 14.1043 6.37796 14.8957 6.86612 15.3839C7.35427 15.872 8.14572 15.872 8.63388 15.3839L13.1339 10.8839C13.622 10.3957 13.622 9.60428 13.1339 9.11612L8.63388 4.61612C8.14572 4.12797 7.35427 4.12797 6.86612 4.61612C6.37796 5.10428 6.37796 5.89573 6.86612 6.38388L10.4822 10L6.86612 13.6161Z" fill="currentColor"></path></svg></button></div></div></div></div><div class="max-w-4xl ml-0 2xl:mx-auto"><hr class="my-6 block border-b border-border dark:border-border-dark"/><h3 id="avoiding-recreating-the-initial-state" class="jsx-1906412371 heading text-2xl leading-9 text-primary dark:text-primary-dark font-bold my-6">Avoiding recreating the initial state<a href="#avoiding-recreating-the-initial-state" aria-label="Link for Avoiding recreating the initial state" title="Link for Avoiding recreating the initial state" class="jsx-1906412371 anchor inline-block"><svg width="1em" height="1em" viewBox="0 0 13 13" xmlns="http://www.w3.org/2000/svg" class="jsx-1906412371 text-gray-70 ml-2 h-5 w-5"><g fill="currentColor" fill-rule="evenodd" class="jsx-1906412371"><path d="M7.778 7.975a2.5 2.5 0 0 0 .347-3.837L6.017 2.03a2.498 2.498 0 0 0-3.542-.007 2.5 2.5 0 0 0 .006 3.543l1.153 1.15c.07-.29.154-.563.25-.773.036-.077.084-.16.14-.25L3.18 4.85a1.496 1.496 0 0 1 .002-2.12 1.496 1.496 0 0 1 2.12 0l2.124 2.123a1.496 1.496 0 0 1-.333 2.37c.16.246.42.504.685.752z" class="jsx-1906412371"></path><path d="M5.657 4.557a2.5 2.5 0 0 0-.347 3.837l2.108 2.108a2.498 2.498 0 0 0 3.542.007 2.5 2.5 0 0 0-.006-3.543L9.802 5.815c-.07.29-.154.565-.25.774-.036.076-.084.16-.14.25l.842.84c.585.587.59 1.532 0 2.122-.587.585-1.532.59-2.12 0L6.008 7.68a1.496 1.496 0 0 1 .332-2.372c-.16-.245-.42-.503-.685-.75z" class="jsx-1906412371"></path></g></svg></a></h3><p class="whitespace-pre-wrap my-4">React saves the initial state once and ignores it on the next renders.</p><div><!--$--><div translate="no" class="rounded-lg h-full w-full overflow-x-auto flex items-center bg-wash dark:bg-gray-95 shadow-lg my-8"><div class="sp-wrapper sp-sp-607024663"><div class="sp-stack"><pre class="sp-cm sp-pristine sp-javascript" translate="no"><code class="sp-pre-placeholder">function TodoList() {
  const [todos, setTodos] = useState(createInitialTodos());
  // ...</code></pre></div></div></div><!--/$--></div><p class="whitespace-pre-wrap my-4">Although the result of <code class="inline text-code text-secondary dark:text-secondary-dark px-1 rounded-md no-underline bg-gray-30 bg-opacity-10 py-px">createInitialTodos()</code> is only used for the initial render, you’re still calling this function on every render. This can be wasteful if it’s creating large arrays or performing expensive calculations.</p><p class="whitespace-pre-wrap my-4">To solve this, you may <strong class="font-bold">pass it as an <em>initializer</em> function</strong> to <code class="inline text-code text-secondary dark:text-secondary-dark px-1 rounded-md no-underline bg-gray-30 bg-opacity-10 py-px">useState</code> instead:</p><div><!--$--><div translate="no" class="rounded-lg h-full w-full overflow-x-auto flex items-center bg-wash dark:bg-gray-95 shadow-lg my-8"><div class="sp-wrapper sp-sp-607024663"><div class="sp-stack"><pre class="sp-cm sp-pristine sp-javascript" translate="no"><code class="sp-pre-placeholder">function TodoList() {
  const [todos, setTodos] = useState(createInitialTodos);
  // ...</code></pre></div></div></div><!--/$--></div><p class="whitespace-pre-wrap my-4">Notice that you’re passing <code class="inline text-code text-secondary dark:text-secondary-dark px-1 rounded-md no-underline bg-gray-30 bg-opacity-10 py-px">createInitialTodos</code>, which is the <em>function itself</em>, and not <code class="inline text-code text-secondary dark:text-secondary-dark px-1 rounded-md no-underline bg-gray-30 bg-opacity-10 py-px">createInitialTodos()</code>, which is the result of calling it. If you pass a function to <code class="inline text-code text-secondary dark:text-secondary-dark px-1 rounded-md no-underline bg-gray-30 bg-opacity-10 py-px">useState</code>, React will only call it during initialization.</p><p class="whitespace-pre-wrap my-4">React may <a class="inline text-link dark:text-link-dark break-normal border-b border-link border-opacity-0 hover:border-opacity-100 duration-100 ease-in transition leading-normal" href="#my-initializer-or-updater-function-runs-twice">call your initializers twice</a> in development to verify that they are <a class="inline text-link dark:text-link-dark break-normal border-b border-link border-opacity-0 hover:border-opacity-100 duration-100 ease-in transition leading-normal" href="/learn/keeping-components-pure">pure</a>.</p></div><div class="max-w-7xl mx-auto py-4"><div class="border-gray-10 bg-card dark:bg-card-dark shadow-inner rounded-none -mx-5 sm:mx-auto sm:rounded-lg"><div class="py-2 px-5 sm:px-8 pb-0 md:pb-0"><h4 id="examples-initializer" class="jsx-1906412371 heading mb-2 leading-10 relative text-xl text-purple-50 dark:text-purple-30 text-xl font-bold leading-9 my-4">The difference between passing an initializer and passing the initial state directly<a href="#examples-initializer" aria-label="Link for The difference between passing an initializer and passing the initial state directly" title="Link for The difference between passing an initializer and passing the initial state directly" class="jsx-1906412371 anchor inline-block"><svg width="1em" height="1em" viewBox="0 0 13 13" xmlns="http://www.w3.org/2000/svg" class="jsx-1906412371 text-gray-70 ml-2 h-5 w-5"><g fill="currentColor" fill-rule="evenodd" class="jsx-1906412371"><path d="M7.778 7.975a2.5 2.5 0 0 0 .347-3.837L6.017 2.03a2.498 2.498 0 0 0-3.542-.007 2.5 2.5 0 0 0 .006 3.543l1.153 1.15c.07-.29.154-.563.25-.773.036-.077.084-.16.14-.25L3.18 4.85a1.496 1.496 0 0 1 .002-2.12 1.496 1.496 0 0 1 2.12 0l2.124 2.123a1.496 1.496 0 0 1-.333 2.37c.16.246.42.504.685.752z" class="jsx-1906412371"></path><path d="M5.657 4.557a2.5 2.5 0 0 0-.347 3.837l2.108 2.108a2.498 2.498 0 0 0 3.542.007 2.5 2.5 0 0 0-.006-3.543L9.802 5.815c-.07.29-.154.565-.25.774-.036.076-.084.16-.14.25l.842.84c.585.587.59 1.532 0 2.122-.587.585-1.532.59-2.12 0L6.008 7.68a1.496 1.496 0 0 1 .332-2.372c-.16-.245-.42-.503-.685-.75z" class="jsx-1906412371"></path></g></svg></a></h4><div class="flex items-center justify-between"><div class="overflow-hidden"><div class="flex relative transition-transform content-box overflow-x-auto"><button class="py-2 mr-4 text-base border-b-4 duration-100 ease-in transition whitespace-nowrap text-ellipsis text-purple-50 border-purple-50 hover:text-purple-50 dark:text-purple-30 dark:border-purple-30 dark:hover:text-purple-30">1<!-- -->. <!-- -->Passing the initializer function</button><button class="py-2 mr-4 text-base border-b-4 duration-100 ease-in transition whitespace-nowrap text-ellipsis">2<!-- -->. <!-- -->Passing the initial state directly</button></div></div><div class="flex z-10 pb-2 pl-2"><button aria-label="Scroll left" class="bg-secondary-button dark:bg-secondary-button-dark h-8 px-2 rounded-l border-gray-20 border-r text-gray-30"><svg class="rotate-90" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20"><g fill="none" fill-rule="evenodd" transform="translate(-446 -398)"><path fill="currentColor" fill-rule="nonzero" d="M95.8838835,240.366117 C95.3957281,239.877961 94.6042719,239.877961 94.1161165,240.366117 C93.6279612,240.854272 93.6279612,241.645728 94.1161165,242.133883 L98.6161165,246.633883 C99.1042719,247.122039 99.8957281,247.122039 100.383883,246.633883 L104.883883,242.133883 C105.372039,241.645728 105.372039,240.854272 104.883883,240.366117 C104.395728,239.877961 103.604272,239.877961 103.116117,240.366117 L99.5,243.982233 L95.8838835,240.366117 Z" transform="translate(356.5 164.5)"></path><polygon points="446 418 466 418 466 398 446 398"></polygon></g></svg></button><button aria-label="Scroll right" class="bg-secondary-button dark:bg-secondary-button-dark h-8 px-2 rounded-r-lg text-primary dark:text-primary-dark"><svg class="-rotate-90" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20"><g fill="none" fill-rule="evenodd" transform="translate(-446 -398)"><path fill="currentColor" fill-rule="nonzero" d="M95.8838835,240.366117 C95.3957281,239.877961 94.6042719,239.877961 94.1161165,240.366117 C93.6279612,240.854272 93.6279612,241.645728 94.1161165,242.133883 L98.6161165,246.633883 C99.1042719,247.122039 99.8957281,247.122039 100.383883,246.633883 L104.883883,242.133883 C105.372039,241.645728 105.372039,240.854272 104.883883,240.366117 C104.395728,239.877961 103.604272,239.877961 103.116117,240.366117 L99.5,243.982233 L95.8838835,240.366117 Z" transform="translate(356.5 164.5)"></path><polygon points="446 418 466 418 466 398 446 398"></polygon></g></svg></button></div></div></div><div class="p-5 sm:py-8 sm:px-8"><div><h3 class="text-xl text-primary dark:text-primary-dark mb-2"><div class="font-bold block md:inline">Example<!-- --> <!-- -->1<!-- --> <!-- -->of <!-- -->2<span class="text-primary dark:text-primary-dark">: </span></div>Passing the initializer function</h3><p class="whitespace-pre-wrap my-4">This example passes the initializer function, so the <code class="inline text-code text-secondary dark:text-secondary-dark px-1 rounded-md no-underline bg-gray-30 bg-opacity-10 py-px">createInitialTodos</code> function only runs during initialization. It does not run when component re-renders, such as when you type into the input.</p><!--$--><div class="sandpack-container my-8" translate="no"><div class="shadow-lg dark:shadow-lg-dark rounded-lg"><div class="bg-wash dark:bg-card-dark flex justify-between items-center relative z-10 border-b border-border dark:border-border-dark rounded-t-lg rounded-b-none"><div class="px-4 lg:px-6"><div class="sp-tabs" translate="no"><div aria-label="Select active file" class="sp-tabs-scrollable-container" role="tablist"><button aria-selected="true" class="sp-tab-button" data-active="true" role="tab" title="/App.js" type="button">App.js</button></div></div></div><div class="px-3 flex items-center justify-end grow text-right" translate="yes"><button class="text-sm text-primary dark:text-primary-dark inline-flex items-center hover:text-link duration-100 ease-in transition mx-1" title="Reset Sandbox" type="button"><svg class="inline mb-0.5 ml-1 mr-1 relative top-0.5" width="0.78em" height="0.78em" viewBox="0 0 14 14" xmlns="http://www.w3.org/2000/svg"><path d="M11.3567 11.9929C10.147 13.0412 8.59937 13.6172 6.9987 13.615C3.3167 13.615 0.332031 10.6303 0.332031 6.94828C0.332031 3.26628 3.3167 0.281616 6.9987 0.281616C10.6807 0.281616 13.6654 3.26628 13.6654 6.94828C13.6654 8.37228 13.2187 9.69228 12.4587 10.775L10.332 6.94828H12.332C12.3319 5.71909 11.9072 4.52766 11.1298 3.57554C10.3524 2.62343 9.26994 1.96908 8.06559 1.72319C6.86124 1.4773 5.60892 1.65496 4.52048 2.22613C3.43205 2.79729 2.57431 3.72689 2.09238 4.85767C1.61045 5.98845 1.5339 7.25099 1.87569 8.43171C2.21748 9.61243 2.95663 10.6388 3.96809 11.3373C4.97955 12.0358 6.20123 12.3635 7.42646 12.2649C8.6517 12.1663 9.80527 11.6475 10.692 10.7963L11.3567 11.9929Z" fill="currentColor"></path></svg> Reset</button><a href="https://codesandbox.io/api/v1/sandboxes/define?undefined" rel="noreferrer noopener" target="_blank" title="Open in CodeSandbox" class="text-sm text-primary dark:text-primary-dark inline-flex items-center hover:text-link duration-100 ease-in transition mx-1 ml-3 md:ml-1"><svg width=".8em" height=".8em" viewBox="0 0 13 13" xmlns="http://www.w3.org/2000/svg" class="inline mb-0.5 ml-1 mr-1 relative top-px"><path d="M4.72038 2.94824V4.28158H1.38704V11.6149H8.72038V8.28158H10.0537V12.2816C10.0537 12.4584 9.98347 12.628 9.85845 12.753C9.73343 12.878 9.56386 12.9482 9.38704 12.9482H0.720378C0.543567 12.9482 0.373997 12.878 0.248973 12.753C0.123949 12.628 0.0537109 12.4584 0.0537109 12.2816V3.61491C0.0537109 3.4381 0.123949 3.26853 0.248973 3.1435C0.373997 3.01848 0.543567 2.94824 0.720378 2.94824H4.72038ZM12.0537 0.948242V6.28158H10.7204V3.22358L5.52504 8.41958L4.58238 7.47691L9.77704 2.28158H6.72038V0.948242H12.0537Z" fill="currentColor"></path></svg><span class="hidden md:block">Fork</span></a></div></div><div class="sp-wrapper sp-sp-607024663"><div class="sp-layout sp-custom-layout"><div class="sp-stack"><div class="sp-code-editor"><div aria-describedby="enter-instructions-5499" aria-label="Code Editor for App.js" class="sp-cm sp-pristine sp-javascript" role="group" tabindex="0" translate="no"><pre class="sp-pre-placeholder" style="margin-left:28px">import { useState } from &#x27;react&#x27;;

function createInitialTodos() {
  const initialTodos = [];
  for (let i = 0; i &lt; 50; i++) {
    initialTodos.push({
      id: i,
      text: &#x27;Item &#x27; + (i + 1)
    });
  }
  return initialTodos;
}

export default function TodoList() {
  const [todos, setTodos] = useState(createInitialTodos);
  const [text, setText] = useState(&#x27;&#x27;);

  return (
    &lt;&gt;
      &lt;input
        value={text}
        onChange={e =&gt; setText(e.target.value)}
      /&gt;
      &lt;button onClick={() =&gt; {
        setText(&#x27;&#x27;);
        setTodos([{
          id: todos.length,
          text: text
        }, ...todos]);
      }}&gt;Add&lt;/button&gt;
      &lt;ul&gt;
        {todos.map(item =&gt; (
          &lt;li key={item.id}&gt;
            {item.text}
          &lt;/li&gt;
        ))}
      &lt;/ul&gt;
    &lt;/&gt;
  );
}
</pre><p id="enter-instructions-5499" style="display:none">To enter the code editing mode, press Enter. To exit the edit mode, press Escape</p><p id="exit-instructions-5499" style="display:none">You are editing the code. To exit the edit mode, press Escape</p></div></div></div><div class="sp-stack order-last xl:order-2"><div class="p-0 sm:p-2 md:p-4 lg:p-8 md:bg-card md:dark:bg-wash-dark h-full relative md:rounded-b-lg lg:rounded-b-none"><div style="padding:initial;position:relative"><iframe class="rounded-t-none bg-white md:shadow-md sm:rounded-lg w-full max-w-full absolute opacity-0 pointer-events-none" title="Sandbox Preview" style="height:100%;z-index:-1"></iframe></div></div></div><button translate="yes" class="flex text-base justify-between dark:border-card-dark bg-wash dark:bg-card-dark items-center z-10 rounded-t-none p-1 w-full order-2 xl:order-last border-b-1 relative top-0"><span class="flex p-2 focus:outline-none text-primary dark:text-primary-dark"><svg class="rotate-0 inline mr-1.5 text-xl" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20"><g fill="none" fill-rule="evenodd" transform="translate(-446 -398)"><path fill="currentColor" fill-rule="nonzero" d="M95.8838835,240.366117 C95.3957281,239.877961 94.6042719,239.877961 94.1161165,240.366117 C93.6279612,240.854272 93.6279612,241.645728 94.1161165,242.133883 L98.6161165,246.633883 C99.1042719,247.122039 99.8957281,247.122039 100.383883,246.633883 L104.883883,242.133883 C105.372039,241.645728 105.372039,240.854272 104.883883,240.366117 C104.395728,239.877961 103.604272,239.877961 103.116117,240.366117 L99.5,243.982233 L95.8838835,240.366117 Z" transform="translate(356.5 164.5)"></path><polygon points="446 418 466 418 466 398 446 398"></polygon></g></svg>Show more</span></button></div></div></div></div><!--/$--></div><div class="flex justify-between items-center mt-4"><button class="bg-purple-50 border-purple-50 hover:bg-purple-50 focus:bg-purple-50 active:bg-purple-50 text-base leading-tight font-bold border rounded-lg py-2 px-4 focus:ring-1 focus:ring-offset-2 focus:ring-link active:bg-link active:border-link active:text-white active:ring-0 active:ring-offset-0 outline-none inline-flex items-center my-1 bg-link border-link text-white hover:bg-link focus:bg-link active:bg-link">Next <!-- -->Example<svg width="1em" height="1em" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg" class="block ml-1.5"><path d="M6.86612 13.6161C6.37796 14.1043 6.37796 14.8957 6.86612 15.3839C7.35427 15.872 8.14572 15.872 8.63388 15.3839L13.1339 10.8839C13.622 10.3957 13.622 9.60428 13.1339 9.11612L8.63388 4.61612C8.14572 4.12797 7.35427 4.12797 6.86612 4.61612C6.37796 5.10428 6.37796 5.89573 6.86612 6.38388L10.4822 10L6.86612 13.6161Z" fill="currentColor"></path></svg></button></div></div></div></div><div class="max-w-4xl ml-0 2xl:mx-auto"><hr class="my-6 block border-b border-border dark:border-border-dark"/><h3 id="resetting-state-with-a-key" class="jsx-1906412371 heading text-2xl leading-9 text-primary dark:text-primary-dark font-bold my-6">Resetting state with a key<a href="#resetting-state-with-a-key" aria-label="Link for Resetting state with a key" title="Link for Resetting state with a key" class="jsx-1906412371 anchor inline-block"><svg width="1em" height="1em" viewBox="0 0 13 13" xmlns="http://www.w3.org/2000/svg" class="jsx-1906412371 text-gray-70 ml-2 h-5 w-5"><g fill="currentColor" fill-rule="evenodd" class="jsx-1906412371"><path d="M7.778 7.975a2.5 2.5 0 0 0 .347-3.837L6.017 2.03a2.498 2.498 0 0 0-3.542-.007 2.5 2.5 0 0 0 .006 3.543l1.153 1.15c.07-.29.154-.563.25-.773.036-.077.084-.16.14-.25L3.18 4.85a1.496 1.496 0 0 1 .002-2.12 1.496 1.496 0 0 1 2.12 0l2.124 2.123a1.496 1.496 0 0 1-.333 2.37c.16.246.42.504.685.752z" class="jsx-1906412371"></path><path d="M5.657 4.557a2.5 2.5 0 0 0-.347 3.837l2.108 2.108a2.498 2.498 0 0 0 3.542.007 2.5 2.5 0 0 0-.006-3.543L9.802 5.815c-.07.29-.154.565-.25.774-.036.076-.084.16-.14.25l.842.84c.585.587.59 1.532 0 2.122-.587.585-1.532.59-2.12 0L6.008 7.68a1.496 1.496 0 0 1 .332-2.372c-.16-.245-.42-.503-.685-.75z" class="jsx-1906412371"></path></g></svg></a></h3><p class="whitespace-pre-wrap my-4">Typically, you might encounter the <code class="inline text-code text-secondary dark:text-secondary-dark px-1 rounded-md no-underline bg-gray-30 bg-opacity-10 py-px">key</code> attribute when <a class="inline text-link dark:text-link-dark break-normal border-b border-link border-opacity-0 hover:border-opacity-100 duration-100 ease-in transition leading-normal" href="/learn/rendering-lists">rendering lists</a>. However, it also serves another purpose.</p><p class="whitespace-pre-wrap my-4">You can <strong class="font-bold">reset a component’s state by passing a different <code class="inline text-code text-secondary dark:text-secondary-dark px-1 rounded-md no-underline bg-gray-30 bg-opacity-10 py-px">key</code> to a component.</strong> In this example, the Reset button changes the <code class="inline text-code text-secondary dark:text-secondary-dark px-1 rounded-md no-underline bg-gray-30 bg-opacity-10 py-px">version</code> state variable, which we pass as a <code class="inline text-code text-secondary dark:text-secondary-dark px-1 rounded-md no-underline bg-gray-30 bg-opacity-10 py-px">key</code> to the <code class="inline text-code text-secondary dark:text-secondary-dark px-1 rounded-md no-underline bg-gray-30 bg-opacity-10 py-px">Form</code>. When the <code class="inline text-code text-secondary dark:text-secondary-dark px-1 rounded-md no-underline bg-gray-30 bg-opacity-10 py-px">key</code> changes, React re-creates the <code class="inline text-code text-secondary dark:text-secondary-dark px-1 rounded-md no-underline bg-gray-30 bg-opacity-10 py-px">Form</code> component (and all of its children) from scratch, so its state gets reset.</p><p class="whitespace-pre-wrap my-4">Read <a class="inline text-link dark:text-link-dark break-normal border-b border-link border-opacity-0 hover:border-opacity-100 duration-100 ease-in transition leading-normal" href="/learn/preserving-and-resetting-state">preserving and resetting state</a> to learn more.</p></div><!--$--><div class="sandpack-container my-8" translate="no"><div class="shadow-lg dark:shadow-lg-dark rounded-lg"><div class="bg-wash dark:bg-card-dark flex justify-between items-center relative z-10 border-b border-border dark:border-border-dark rounded-t-lg rounded-b-none"><div class="px-4 lg:px-6"><div class="sp-tabs" translate="no"><div aria-label="Select active file" class="sp-tabs-scrollable-container" role="tablist"><button aria-selected="true" class="sp-tab-button" data-active="true" role="tab" title="/App.js" type="button">App.js</button></div></div></div><div class="px-3 flex items-center justify-end grow text-right" translate="yes"><button class="text-sm text-primary dark:text-primary-dark inline-flex items-center hover:text-link duration-100 ease-in transition mx-1" title="Reset Sandbox" type="button"><svg class="inline mb-0.5 ml-1 mr-1 relative top-0.5" width="0.78em" height="0.78em" viewBox="0 0 14 14" xmlns="http://www.w3.org/2000/svg"><path d="M11.3567 11.9929C10.147 13.0412 8.59937 13.6172 6.9987 13.615C3.3167 13.615 0.332031 10.6303 0.332031 6.94828C0.332031 3.26628 3.3167 0.281616 6.9987 0.281616C10.6807 0.281616 13.6654 3.26628 13.6654 6.94828C13.6654 8.37228 13.2187 9.69228 12.4587 10.775L10.332 6.94828H12.332C12.3319 5.71909 11.9072 4.52766 11.1298 3.57554C10.3524 2.62343 9.26994 1.96908 8.06559 1.72319C6.86124 1.4773 5.60892 1.65496 4.52048 2.22613C3.43205 2.79729 2.57431 3.72689 2.09238 4.85767C1.61045 5.98845 1.5339 7.25099 1.87569 8.43171C2.21748 9.61243 2.95663 10.6388 3.96809 11.3373C4.97955 12.0358 6.20123 12.3635 7.42646 12.2649C8.6517 12.1663 9.80527 11.6475 10.692 10.7963L11.3567 11.9929Z" fill="currentColor"></path></svg> Reset</button><a href="https://codesandbox.io/api/v1/sandboxes/define?undefined" rel="noreferrer noopener" target="_blank" title="Open in CodeSandbox" class="text-sm text-primary dark:text-primary-dark inline-flex items-center hover:text-link duration-100 ease-in transition mx-1 ml-3 md:ml-1"><svg width=".8em" height=".8em" viewBox="0 0 13 13" xmlns="http://www.w3.org/2000/svg" class="inline mb-0.5 ml-1 mr-1 relative top-px"><path d="M4.72038 2.94824V4.28158H1.38704V11.6149H8.72038V8.28158H10.0537V12.2816C10.0537 12.4584 9.98347 12.628 9.85845 12.753C9.73343 12.878 9.56386 12.9482 9.38704 12.9482H0.720378C0.543567 12.9482 0.373997 12.878 0.248973 12.753C0.123949 12.628 0.0537109 12.4584 0.0537109 12.2816V3.61491C0.0537109 3.4381 0.123949 3.26853 0.248973 3.1435C0.373997 3.01848 0.543567 2.94824 0.720378 2.94824H4.72038ZM12.0537 0.948242V6.28158H10.7204V3.22358L5.52504 8.41958L4.58238 7.47691L9.77704 2.28158H6.72038V0.948242H12.0537Z" fill="currentColor"></path></svg><span class="hidden md:block">Fork</span></a></div></div><div class="sp-wrapper sp-sp-607024663"><div class="sp-layout sp-custom-layout"><div class="sp-stack"><div class="sp-code-editor"><div aria-describedby="enter-instructions-4569" aria-label="Code Editor for App.js" class="sp-cm sp-pristine sp-javascript" role="group" tabindex="0" translate="no"><pre class="sp-pre-placeholder" style="margin-left:28px">import { useState } from &#x27;react&#x27;;

export default function App() {
  const [version, setVersion] = useState(0);

  function handleReset() {
    setVersion(version + 1);
  }

  return (
    &lt;&gt;
      &lt;button onClick={handleReset}&gt;Reset&lt;/button&gt;
      &lt;Form key={version} /&gt;
    &lt;/&gt;
  );
}

function Form() {
  const [name, setName] = useState(&#x27;Taylor&#x27;);

  return (
    &lt;&gt;
      &lt;input
        value={name}
        onChange={e =&gt; setName(e.target.value)}
      /&gt;
      &lt;p&gt;Hello, {name}.&lt;/p&gt;
    &lt;/&gt;
  );
}
</pre><p id="enter-instructions-4569" style="display:none">To enter the code editing mode, press Enter. To exit the edit mode, press Escape</p><p id="exit-instructions-4569" style="display:none">You are editing the code. To exit the edit mode, press Escape</p></div></div></div><div class="sp-stack order-last xl:order-2"><div class="p-0 sm:p-2 md:p-4 lg:p-8 md:bg-card md:dark:bg-wash-dark h-full relative md:rounded-b-lg lg:rounded-b-none"><div style="padding:initial;position:relative"><iframe class="rounded-t-none bg-white md:shadow-md sm:rounded-lg w-full max-w-full absolute opacity-0 pointer-events-none" title="Sandbox Preview" style="height:100%;z-index:-1"></iframe></div></div></div><button translate="yes" class="flex text-base justify-between dark:border-card-dark bg-wash dark:bg-card-dark items-center z-10 rounded-t-none p-1 w-full order-2 xl:order-last border-b-1 relative top-0"><span class="flex p-2 focus:outline-none text-primary dark:text-primary-dark"><svg class="rotate-0 inline mr-1.5 text-xl" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20"><g fill="none" fill-rule="evenodd" transform="translate(-446 -398)"><path fill="currentColor" fill-rule="nonzero" d="M95.8838835,240.366117 C95.3957281,239.877961 94.6042719,239.877961 94.1161165,240.366117 C93.6279612,240.854272 93.6279612,241.645728 94.1161165,242.133883 L98.6161165,246.633883 C99.1042719,247.122039 99.8957281,247.122039 100.383883,246.633883 L104.883883,242.133883 C105.372039,241.645728 105.372039,240.854272 104.883883,240.366117 C104.395728,239.877961 103.604272,239.877961 103.116117,240.366117 L99.5,243.982233 L95.8838835,240.366117 Z" transform="translate(356.5 164.5)"></path><polygon points="446 418 466 418 466 398 446 398"></polygon></g></svg>Show more</span></button></div></div></div></div><!--/$--><div class="max-w-4xl ml-0 2xl:mx-auto"><hr class="my-6 block border-b border-border dark:border-border-dark"/><h3 id="storing-information-from-previous-renders" class="jsx-1906412371 heading text-2xl leading-9 text-primary dark:text-primary-dark font-bold my-6">Storing information from previous renders<a href="#storing-information-from-previous-renders" aria-label="Link for Storing information from previous renders" title="Link for Storing information from previous renders" class="jsx-1906412371 anchor inline-block"><svg width="1em" height="1em" viewBox="0 0 13 13" xmlns="http://www.w3.org/2000/svg" class="jsx-1906412371 text-gray-70 ml-2 h-5 w-5"><g fill="currentColor" fill-rule="evenodd" class="jsx-1906412371"><path d="M7.778 7.975a2.5 2.5 0 0 0 .347-3.837L6.017 2.03a2.498 2.498 0 0 0-3.542-.007 2.5 2.5 0 0 0 .006 3.543l1.153 1.15c.07-.29.154-.563.25-.773.036-.077.084-.16.14-.25L3.18 4.85a1.496 1.496 0 0 1 .002-2.12 1.496 1.496 0 0 1 2.12 0l2.124 2.123a1.496 1.496 0 0 1-.333 2.37c.16.246.42.504.685.752z" class="jsx-1906412371"></path><path d="M5.657 4.557a2.5 2.5 0 0 0-.347 3.837l2.108 2.108a2.498 2.498 0 0 0 3.542.007 2.5 2.5 0 0 0-.006-3.543L9.802 5.815c-.07.29-.154.565-.25.774-.036.076-.084.16-.14.25l.842.84c.585.587.59 1.532 0 2.122-.587.585-1.532.59-2.12 0L6.008 7.68a1.496 1.496 0 0 1 .332-2.372c-.16-.245-.42-.503-.685-.75z" class="jsx-1906412371"></path></g></svg></a></h3><p class="whitespace-pre-wrap my-4">Usually, you will update state in event handlers. However, in rare cases you might want to adjust state in response to rendering — for example, you might want to change a state variable when a prop changes.</p><p class="whitespace-pre-wrap my-4">In most cases, you don’t need this:</p><ul class="ml-6 my-3 list-disc"><li class="leading-relaxed mb-1"><strong class="font-bold">If the value you need can be computed entirely from the current props or other state, <a class="inline text-link dark:text-link-dark break-normal border-b border-link border-opacity-0 hover:border-opacity-100 duration-100 ease-in transition leading-normal" href="/learn/choosing-the-state-structure#avoid-redundant-state">remove that redundant state altogether</a>.</strong> If you’re worried about recomputing too often, the <a class="inline text-link dark:text-link-dark break-normal border-b border-link border-opacity-0 hover:border-opacity-100 duration-100 ease-in transition leading-normal" href="/apis/usememo"><code class="inline text-code text-secondary dark:text-secondary-dark px-1 rounded-md no-underline bg-highlight dark:bg-highlight-dark py-0">useMemo</code> Hook</a> can help.</li><li class="leading-relaxed mb-1">If you want to reset the entire component tree’s state, <a class="inline text-link dark:text-link-dark break-normal border-b border-link border-opacity-0 hover:border-opacity-100 duration-100 ease-in transition leading-normal" href="#resetting-state-with-a-key">pass a different <code class="inline text-code text-secondary dark:text-secondary-dark px-1 rounded-md no-underline bg-highlight dark:bg-highlight-dark py-0">key</code> to your component.</a></li><li class="leading-relaxed mb-1">If you can, update all the relevant state in the event handlers.</li></ul><p class="whitespace-pre-wrap my-4">In the rare case that none of these apply, there is a pattern you can use to update state based on the values that have been rendered so far, by calling a <code class="inline text-code text-secondary dark:text-secondary-dark px-1 rounded-md no-underline bg-gray-30 bg-opacity-10 py-px">set</code> function while your component is rendering.</p><p class="whitespace-pre-wrap my-4">Here’s an example. This <code class="inline text-code text-secondary dark:text-secondary-dark px-1 rounded-md no-underline bg-gray-30 bg-opacity-10 py-px">CountLabel</code> component displays the <code class="inline text-code text-secondary dark:text-secondary-dark px-1 rounded-md no-underline bg-gray-30 bg-opacity-10 py-px">count</code> prop passed to it:</p><div><!--$--><div translate="no" class="rounded-lg h-full w-full overflow-x-auto flex items-center bg-wash dark:bg-gray-95 shadow-lg my-8"><div class="sp-wrapper sp-sp-607024663"><div class="sp-stack"><pre class="sp-cm sp-pristine sp-javascript" translate="no"><code class="sp-pre-placeholder">export default function CountLabel({ count }) {
  return &lt;h1&gt;{count}&lt;/h1&gt;
}</code></pre></div></div></div><!--/$--></div><p class="whitespace-pre-wrap my-4">Say you want to show whether the counter has <em>increased or decreased</em> since the last change. The <code class="inline text-code text-secondary dark:text-secondary-dark px-1 rounded-md no-underline bg-gray-30 bg-opacity-10 py-px">count</code> prop doesn’t tell you this — you need to keep track of its previous value. Add the <code class="inline text-code text-secondary dark:text-secondary-dark px-1 rounded-md no-underline bg-gray-30 bg-opacity-10 py-px">prevCount</code> state variable to track it. Add another state variable called <code class="inline text-code text-secondary dark:text-secondary-dark px-1 rounded-md no-underline bg-gray-30 bg-opacity-10 py-px">trend</code> to hold whether the count has increased or decreased. Compare <code class="inline text-code text-secondary dark:text-secondary-dark px-1 rounded-md no-underline bg-gray-30 bg-opacity-10 py-px">prevCount</code> with <code class="inline text-code text-secondary dark:text-secondary-dark px-1 rounded-md no-underline bg-gray-30 bg-opacity-10 py-px">count</code>, and if they’re not equal, update both <code class="inline text-code text-secondary dark:text-secondary-dark px-1 rounded-md no-underline bg-gray-30 bg-opacity-10 py-px">prevCount</code> and <code class="inline text-code text-secondary dark:text-secondary-dark px-1 rounded-md no-underline bg-gray-30 bg-opacity-10 py-px">trend</code>. Now you can show both the current count prop and <em>how it has changed since the last render</em>.</p></div><!--$--><div class="sandpack-container my-8" translate="no"><div class="shadow-lg dark:shadow-lg-dark rounded-lg"><div class="bg-wash dark:bg-card-dark flex justify-between items-center relative z-10 border-b border-border dark:border-border-dark rounded-t-lg rounded-b-none"><div class="px-4 lg:px-6"><div class="sp-tabs" translate="no"><div aria-label="Select active file" class="sp-tabs-scrollable-container" role="tablist"><button aria-selected="false" class="sp-tab-button" data-active="false" role="tab" title="/App.js" type="button">App.js</button><button aria-selected="true" class="sp-tab-button" data-active="true" role="tab" title="/CountLabel.js" type="button">CountLabel.js</button></div></div></div><div class="px-3 flex items-center justify-end grow text-right" translate="yes"><button class="text-sm text-primary dark:text-primary-dark inline-flex items-center hover:text-link duration-100 ease-in transition mx-1" title="Reset Sandbox" type="button"><svg class="inline mb-0.5 ml-1 mr-1 relative top-0.5" width="0.78em" height="0.78em" viewBox="0 0 14 14" xmlns="http://www.w3.org/2000/svg"><path d="M11.3567 11.9929C10.147 13.0412 8.59937 13.6172 6.9987 13.615C3.3167 13.615 0.332031 10.6303 0.332031 6.94828C0.332031 3.26628 3.3167 0.281616 6.9987 0.281616C10.6807 0.281616 13.6654 3.26628 13.6654 6.94828C13.6654 8.37228 13.2187 9.69228 12.4587 10.775L10.332 6.94828H12.332C12.3319 5.71909 11.9072 4.52766 11.1298 3.57554C10.3524 2.62343 9.26994 1.96908 8.06559 1.72319C6.86124 1.4773 5.60892 1.65496 4.52048 2.22613C3.43205 2.79729 2.57431 3.72689 2.09238 4.85767C1.61045 5.98845 1.5339 7.25099 1.87569 8.43171C2.21748 9.61243 2.95663 10.6388 3.96809 11.3373C4.97955 12.0358 6.20123 12.3635 7.42646 12.2649C8.6517 12.1663 9.80527 11.6475 10.692 10.7963L11.3567 11.9929Z" fill="currentColor"></path></svg> Reset</button><a href="https://codesandbox.io/api/v1/sandboxes/define?undefined" rel="noreferrer noopener" target="_blank" title="Open in CodeSandbox" class="text-sm text-primary dark:text-primary-dark inline-flex items-center hover:text-link duration-100 ease-in transition mx-1 ml-3 md:ml-1"><svg width=".8em" height=".8em" viewBox="0 0 13 13" xmlns="http://www.w3.org/2000/svg" class="inline mb-0.5 ml-1 mr-1 relative top-px"><path d="M4.72038 2.94824V4.28158H1.38704V11.6149H8.72038V8.28158H10.0537V12.2816C10.0537 12.4584 9.98347 12.628 9.85845 12.753C9.73343 12.878 9.56386 12.9482 9.38704 12.9482H0.720378C0.543567 12.9482 0.373997 12.878 0.248973 12.753C0.123949 12.628 0.0537109 12.4584 0.0537109 12.2816V3.61491C0.0537109 3.4381 0.123949 3.26853 0.248973 3.1435C0.373997 3.01848 0.543567 2.94824 0.720378 2.94824H4.72038ZM12.0537 0.948242V6.28158H10.7204V3.22358L5.52504 8.41958L4.58238 7.47691L9.77704 2.28158H6.72038V0.948242H12.0537Z" fill="currentColor"></path></svg><span class="hidden md:block">Fork</span></a></div></div><div class="sp-wrapper sp-sp-607024663"><div class="sp-layout sp-custom-layout"><div class="sp-stack"><div class="sp-code-editor"><div aria-describedby="enter-instructions-110" aria-label="Code Editor for CountLabel.js" class="sp-cm sp-pristine sp-javascript" role="group" tabindex="0" translate="no"><pre class="sp-pre-placeholder" style="margin-left:28px">import { useState } from &#x27;react&#x27;;

export default function CountLabel({ count }) {
  const [prevCount, setPrevCount] = useState(count);
  const [trend, setTrend] = useState(null);
  if (prevCount !== count) {
    setPrevCount(count);
    setTrend(count &gt; prevCount ? &#x27;increasing&#x27; : &#x27;decreasing&#x27;);
  }
  return (
    &lt;&gt;
      &lt;h1&gt;{count}&lt;/h1&gt;
      {trend &amp;&amp; &lt;p&gt;The count is {trend}&lt;/p&gt;}
    &lt;/&gt;
  );
}
</pre><p id="enter-instructions-110" style="display:none">To enter the code editing mode, press Enter. To exit the edit mode, press Escape</p><p id="exit-instructions-110" style="display:none">You are editing the code. To exit the edit mode, press Escape</p></div></div></div><div class="sp-stack order-last xl:order-2"><div class="p-0 sm:p-2 md:p-4 lg:p-8 md:bg-card md:dark:bg-wash-dark h-full relative md:rounded-b-lg lg:rounded-b-none"><div style="padding:initial;position:relative"><iframe class="rounded-t-none bg-white md:shadow-md sm:rounded-lg w-full max-w-full absolute opacity-0 pointer-events-none" title="Sandbox Preview" style="height:100%;z-index:-1"></iframe></div></div></div><button translate="yes" class="flex text-base justify-between dark:border-card-dark bg-wash dark:bg-card-dark items-center z-10 rounded-t-none p-1 w-full order-2 xl:order-last border-b-1 relative top-0"><span class="flex p-2 focus:outline-none text-primary dark:text-primary-dark"><svg class="rotate-0 inline mr-1.5 text-xl" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20"><g fill="none" fill-rule="evenodd" transform="translate(-446 -398)"><path fill="currentColor" fill-rule="nonzero" d="M95.8838835,240.366117 C95.3957281,239.877961 94.6042719,239.877961 94.1161165,240.366117 C93.6279612,240.854272 93.6279612,241.645728 94.1161165,242.133883 L98.6161165,246.633883 C99.1042719,247.122039 99.8957281,247.122039 100.383883,246.633883 L104.883883,242.133883 C105.372039,241.645728 105.372039,240.854272 104.883883,240.366117 C104.395728,239.877961 103.604272,239.877961 103.116117,240.366117 L99.5,243.982233 L95.8838835,240.366117 Z" transform="translate(356.5 164.5)"></path><polygon points="446 418 466 418 466 398 446 398"></polygon></g></svg>Show more</span></button></div></div></div></div><!--/$--><div class="max-w-4xl ml-0 2xl:mx-auto"><p class="whitespace-pre-wrap my-4">Note that if you call a <code class="inline text-code text-secondary dark:text-secondary-dark px-1 rounded-md no-underline bg-gray-30 bg-opacity-10 py-px">set</code> function while rendering, it must be inside a condition like <code class="inline text-code text-secondary dark:text-secondary-dark px-1 rounded-md no-underline bg-gray-30 bg-opacity-10 py-px">prevCount !== count</code>, and there must be a call like <code class="inline text-code text-secondary dark:text-secondary-dark px-1 rounded-md no-underline bg-gray-30 bg-opacity-10 py-px">setPrevCount(count)</code> inside of the condition. Otherwise, your component would re-render in a loop until it crashes. Also, you can only update the state of the <em>currently rendering</em> component like this. Calling the <code class="inline text-code text-secondary dark:text-secondary-dark px-1 rounded-md no-underline bg-gray-30 bg-opacity-10 py-px">set</code> function of <em>another</em> component during rendering is an error. Finally, your <code class="inline text-code text-secondary dark:text-secondary-dark px-1 rounded-md no-underline bg-gray-30 bg-opacity-10 py-px">set</code> call should still <a class="inline text-link dark:text-link-dark break-normal border-b border-link border-opacity-0 hover:border-opacity-100 duration-100 ease-in transition leading-normal" href="#updating-objects-and-arrays-in-state">update state without mutation</a> — this special case doesn’t mean you can break other rules of <a class="inline text-link dark:text-link-dark break-normal border-b border-link border-opacity-0 hover:border-opacity-100 duration-100 ease-in transition leading-normal" href="/learn/keeping-components-pure">pure functions</a>.</p><p class="whitespace-pre-wrap my-4">This pattern can be hard to understand and is usually best avoided. However, it’s better than updating state in an effect. When you call the <code class="inline text-code text-secondary dark:text-secondary-dark px-1 rounded-md no-underline bg-gray-30 bg-opacity-10 py-px">set</code> function during render, React will re-render that component immediately after your component exits with a <code class="inline text-code text-secondary dark:text-secondary-dark px-1 rounded-md no-underline bg-gray-30 bg-opacity-10 py-px">return</code> statement, and before rendering the children. This way, children don’t need to render twice. The rest of your component function will still execute (and the result will be thrown away), but if your condition is below all the calls to Hooks, you may add <code class="inline text-code text-secondary dark:text-secondary-dark px-1 rounded-md no-underline bg-gray-30 bg-opacity-10 py-px">return null</code> inside it to restart rendering earlier.</p><hr class="my-6 block border-b border-border dark:border-border-dark"/><h2 id="reference" class="jsx-1906412371 heading text-3xl leading-10 text-primary dark:text-primary-dark font-bold my-6">Reference<a href="#reference" aria-label="Link for Reference" title="Link for Reference" class="jsx-1906412371 anchor inline-block"><svg width="1em" height="1em" viewBox="0 0 13 13" xmlns="http://www.w3.org/2000/svg" class="jsx-1906412371 text-gray-70 ml-2 h-5 w-5"><g fill="currentColor" fill-rule="evenodd" class="jsx-1906412371"><path d="M7.778 7.975a2.5 2.5 0 0 0 .347-3.837L6.017 2.03a2.498 2.498 0 0 0-3.542-.007 2.5 2.5 0 0 0 .006 3.543l1.153 1.15c.07-.29.154-.563.25-.773.036-.077.084-.16.14-.25L3.18 4.85a1.496 1.496 0 0 1 .002-2.12 1.496 1.496 0 0 1 2.12 0l2.124 2.123a1.496 1.496 0 0 1-.333 2.37c.16.246.42.504.685.752z" class="jsx-1906412371"></path><path d="M5.657 4.557a2.5 2.5 0 0 0-.347 3.837l2.108 2.108a2.498 2.498 0 0 0 3.542.007 2.5 2.5 0 0 0-.006-3.543L9.802 5.815c-.07.29-.154.565-.25.774-.036.076-.084.16-.14.25l.842.84c.585.587.59 1.532 0 2.122-.587.585-1.532.59-2.12 0L6.008 7.68a1.496 1.496 0 0 1 .332-2.372c-.16-.245-.42-.503-.685-.75z" class="jsx-1906412371"></path></g></svg></a></h2><h3 id="usestate" class="jsx-1906412371 heading text-2xl leading-9 text-primary dark:text-primary-dark font-bold my-6"><code class="inline text-code text-secondary dark:text-secondary-dark px-1 rounded-md no-underline bg-gray-30 bg-opacity-10 py-px">useState(initialState)</code><a href="#usestate" aria-label="Link for this heading" title="Link for this heading" class="jsx-1906412371 anchor inline-block"><svg width="1em" height="1em" viewBox="0 0 13 13" xmlns="http://www.w3.org/2000/svg" class="jsx-1906412371 text-gray-70 ml-2 h-5 w-5"><g fill="currentColor" fill-rule="evenodd" class="jsx-1906412371"><path d="M7.778 7.975a2.5 2.5 0 0 0 .347-3.837L6.017 2.03a2.498 2.498 0 0 0-3.542-.007 2.5 2.5 0 0 0 .006 3.543l1.153 1.15c.07-.29.154-.563.25-.773.036-.077.084-.16.14-.25L3.18 4.85a1.496 1.496 0 0 1 .002-2.12 1.496 1.496 0 0 1 2.12 0l2.124 2.123a1.496 1.496 0 0 1-.333 2.37c.16.246.42.504.685.752z" class="jsx-1906412371"></path><path d="M5.657 4.557a2.5 2.5 0 0 0-.347 3.837l2.108 2.108a2.498 2.498 0 0 0 3.542.007 2.5 2.5 0 0 0-.006-3.543L9.802 5.815c-.07.29-.154.565-.25.774-.036.076-.084.16-.14.25l.842.84c.585.587.59 1.532 0 2.122-.587.585-1.532.59-2.12 0L6.008 7.68a1.496 1.496 0 0 1 .332-2.372c-.16-.245-.42-.503-.685-.75z" class="jsx-1906412371"></path></g></svg></a></h3><p class="whitespace-pre-wrap my-4">Call <code class="inline text-code text-secondary dark:text-secondary-dark px-1 rounded-md no-underline bg-gray-30 bg-opacity-10 py-px">useState</code> at the top level of your component to declare a <a class="inline text-link dark:text-link-dark break-normal border-b border-link border-opacity-0 hover:border-opacity-100 duration-100 ease-in transition leading-normal" href="/learn/state-a-components-memory">state variable</a>.</p><div><!--$--><div translate="no" class="rounded-lg h-full w-full overflow-x-auto flex items-center bg-wash dark:bg-gray-95 shadow-lg my-8"><div class="sp-wrapper sp-sp-607024663"><div class="sp-stack"><pre class="sp-cm sp-pristine sp-javascript" translate="no"><code class="sp-pre-placeholder">import { useState } from &#x27;react&#x27;;

function MyComponent() {
  const [age, setAge] = useState(28);
  const [name, setName] = useState(&#x27;Taylor&#x27;);
  const [todos, setTodos] = useState(() =&gt; createTodos());
  // ...</code></pre></div></div></div><!--/$--></div><p class="whitespace-pre-wrap my-4">The convention is to name state variables like <code class="inline text-code text-secondary dark:text-secondary-dark px-1 rounded-md no-underline bg-gray-30 bg-opacity-10 py-px">[something, setSomething]</code> using <a class="inline text-link dark:text-link-dark break-normal border-b border-link border-opacity-0 hover:border-opacity-100 duration-100 ease-in transition leading-normal" href="/learn/a-javascript-refresher#array-destructuring">array destructuring</a>.</p><p class="whitespace-pre-wrap my-4"><a class="inline text-link dark:text-link-dark break-normal border-b border-link border-opacity-0 hover:border-opacity-100 duration-100 ease-in transition leading-normal" href="#examples-basic">See more examples above.</a></p><h4 id="parameters" class="jsx-1906412371 heading text-xl font-bold leading-9 my-4">Parameters<a href="#parameters" aria-label="Link for Parameters" title="Link for Parameters" class="jsx-1906412371 anchor inline-block"><svg width="1em" height="1em" viewBox="0 0 13 13" xmlns="http://www.w3.org/2000/svg" class="jsx-1906412371 text-gray-70 ml-2 h-5 w-5"><g fill="currentColor" fill-rule="evenodd" class="jsx-1906412371"><path d="M7.778 7.975a2.5 2.5 0 0 0 .347-3.837L6.017 2.03a2.498 2.498 0 0 0-3.542-.007 2.5 2.5 0 0 0 .006 3.543l1.153 1.15c.07-.29.154-.563.25-.773.036-.077.084-.16.14-.25L3.18 4.85a1.496 1.496 0 0 1 .002-2.12 1.496 1.496 0 0 1 2.12 0l2.124 2.123a1.496 1.496 0 0 1-.333 2.37c.16.246.42.504.685.752z" class="jsx-1906412371"></path><path d="M5.657 4.557a2.5 2.5 0 0 0-.347 3.837l2.108 2.108a2.498 2.498 0 0 0 3.542.007 2.5 2.5 0 0 0-.006-3.543L9.802 5.815c-.07.29-.154.565-.25.774-.036.076-.084.16-.14.25l.842.84c.585.587.59 1.532 0 2.122-.587.585-1.532.59-2.12 0L6.008 7.68a1.496 1.496 0 0 1 .332-2.372c-.16-.245-.42-.503-.685-.75z" class="jsx-1906412371"></path></g></svg></a></h4><ul class="ml-6 my-3 list-disc"><li class="leading-relaxed mb-1"><code class="inline text-code text-secondary dark:text-secondary-dark px-1 rounded-md no-underline bg-gray-30 bg-opacity-10 py-px">initialState</code>: The value you want the state to be initially. It can be a value of any type, but there is a special behavior for functions. This argument is ignored after the initial render.<ul class="ml-6 my-3 list-disc"><li class="leading-relaxed mb-1">If you pass a function as <code class="inline text-code text-secondary dark:text-secondary-dark px-1 rounded-md no-underline bg-gray-30 bg-opacity-10 py-px">initialState</code>, it will be treated as an <em>initializer function</em>. It should be pure, should take no arguments, and should return a value of any type. React will call your initializer function when initializing the component, and store its return value as the initial state. <a class="inline text-link dark:text-link-dark break-normal border-b border-link border-opacity-0 hover:border-opacity-100 duration-100 ease-in transition leading-normal" href="#avoiding-recreating-the-initial-state">See an example above.</a></li></ul></li></ul><h4 id="returns" class="jsx-1906412371 heading text-xl font-bold leading-9 my-4">Returns<a href="#returns" aria-label="Link for Returns" title="Link for Returns" class="jsx-1906412371 anchor inline-block"><svg width="1em" height="1em" viewBox="0 0 13 13" xmlns="http://www.w3.org/2000/svg" class="jsx-1906412371 text-gray-70 ml-2 h-5 w-5"><g fill="currentColor" fill-rule="evenodd" class="jsx-1906412371"><path d="M7.778 7.975a2.5 2.5 0 0 0 .347-3.837L6.017 2.03a2.498 2.498 0 0 0-3.542-.007 2.5 2.5 0 0 0 .006 3.543l1.153 1.15c.07-.29.154-.563.25-.773.036-.077.084-.16.14-.25L3.18 4.85a1.496 1.496 0 0 1 .002-2.12 1.496 1.496 0 0 1 2.12 0l2.124 2.123a1.496 1.496 0 0 1-.333 2.37c.16.246.42.504.685.752z" class="jsx-1906412371"></path><path d="M5.657 4.557a2.5 2.5 0 0 0-.347 3.837l2.108 2.108a2.498 2.498 0 0 0 3.542.007 2.5 2.5 0 0 0-.006-3.543L9.802 5.815c-.07.29-.154.565-.25.774-.036.076-.084.16-.14.25l.842.84c.585.587.59 1.532 0 2.122-.587.585-1.532.59-2.12 0L6.008 7.68a1.496 1.496 0 0 1 .332-2.372c-.16-.245-.42-.503-.685-.75z" class="jsx-1906412371"></path></g></svg></a></h4><p class="whitespace-pre-wrap my-4"><code class="inline text-code text-secondary dark:text-secondary-dark px-1 rounded-md no-underline bg-gray-30 bg-opacity-10 py-px">useState</code> returns an array with exactly two values:</p><ol class="ml-6 my-3 list-decimal"><li class="leading-relaxed mb-1">The current state. During the first render, it will match the <code class="inline text-code text-secondary dark:text-secondary-dark px-1 rounded-md no-underline bg-gray-30 bg-opacity-10 py-px">initialState</code> you have passed.</li><li class="leading-relaxed mb-1">The <a class="inline text-link dark:text-link-dark break-normal border-b border-link border-opacity-0 hover:border-opacity-100 duration-100 ease-in transition leading-normal" href="#setstate"><code class="inline text-code text-secondary dark:text-secondary-dark px-1 rounded-md no-underline bg-highlight dark:bg-highlight-dark py-0">set</code> function</a> that lets you update the state to a different value and trigger a re-render.</li></ol><h4 id="caveats" class="jsx-1906412371 heading text-xl font-bold leading-9 my-4">Caveats<a href="#caveats" aria-label="Link for Caveats" title="Link for Caveats" class="jsx-1906412371 anchor inline-block"><svg width="1em" height="1em" viewBox="0 0 13 13" xmlns="http://www.w3.org/2000/svg" class="jsx-1906412371 text-gray-70 ml-2 h-5 w-5"><g fill="currentColor" fill-rule="evenodd" class="jsx-1906412371"><path d="M7.778 7.975a2.5 2.5 0 0 0 .347-3.837L6.017 2.03a2.498 2.498 0 0 0-3.542-.007 2.5 2.5 0 0 0 .006 3.543l1.153 1.15c.07-.29.154-.563.25-.773.036-.077.084-.16.14-.25L3.18 4.85a1.496 1.496 0 0 1 .002-2.12 1.496 1.496 0 0 1 2.12 0l2.124 2.123a1.496 1.496 0 0 1-.333 2.37c.16.246.42.504.685.752z" class="jsx-1906412371"></path><path d="M5.657 4.557a2.5 2.5 0 0 0-.347 3.837l2.108 2.108a2.498 2.498 0 0 0 3.542.007 2.5 2.5 0 0 0-.006-3.543L9.802 5.815c-.07.29-.154.565-.25.774-.036.076-.084.16-.14.25l.842.84c.585.587.59 1.532 0 2.122-.587.585-1.532.59-2.12 0L6.008 7.68a1.496 1.496 0 0 1 .332-2.372c-.16-.245-.42-.503-.685-.75z" class="jsx-1906412371"></path></g></svg></a></h4><ul class="ml-6 my-3 list-disc"><li class="leading-relaxed mb-1"><code class="inline text-code text-secondary dark:text-secondary-dark px-1 rounded-md no-underline bg-gray-30 bg-opacity-10 py-px">useState</code> is a Hook, so you can only call it <strong class="font-bold">at the top level of your component</strong> or your own Hooks. You can’t call it inside loops or conditions. If you need that, extract a new component and move the state into it.</li><li class="leading-relaxed mb-1">In Strict Mode, React will <strong class="font-bold">call your initializer function twice</strong> in order to <a class="inline text-link dark:text-link-dark break-normal border-b border-link border-opacity-0 hover:border-opacity-100 duration-100 ease-in transition leading-normal" href="#my-initializer-or-updater-function-runs-twice">help you find accidental impurities</a>. This is development-only behavior and does not affect production. If your initializer function is pure (as it should be), this should not affect the logic of your component. The result from one of the calls will be ignored.</li></ul><hr class="my-6 block border-b border-border dark:border-border-dark"/><h3 id="setstate" class="jsx-1906412371 heading text-2xl leading-9 text-primary dark:text-primary-dark font-bold my-6"><code class="inline text-code text-secondary dark:text-secondary-dark px-1 rounded-md no-underline bg-gray-30 bg-opacity-10 py-px">set</code> functions, like <code class="inline text-code text-secondary dark:text-secondary-dark px-1 rounded-md no-underline bg-gray-30 bg-opacity-10 py-px">setSomething(nextState)</code><a href="#setstate" aria-label="Link for this heading" title="Link for this heading" class="jsx-1906412371 anchor inline-block"><svg width="1em" height="1em" viewBox="0 0 13 13" xmlns="http://www.w3.org/2000/svg" class="jsx-1906412371 text-gray-70 ml-2 h-5 w-5"><g fill="currentColor" fill-rule="evenodd" class="jsx-1906412371"><path d="M7.778 7.975a2.5 2.5 0 0 0 .347-3.837L6.017 2.03a2.498 2.498 0 0 0-3.542-.007 2.5 2.5 0 0 0 .006 3.543l1.153 1.15c.07-.29.154-.563.25-.773.036-.077.084-.16.14-.25L3.18 4.85a1.496 1.496 0 0 1 .002-2.12 1.496 1.496 0 0 1 2.12 0l2.124 2.123a1.496 1.496 0 0 1-.333 2.37c.16.246.42.504.685.752z" class="jsx-1906412371"></path><path d="M5.657 4.557a2.5 2.5 0 0 0-.347 3.837l2.108 2.108a2.498 2.498 0 0 0 3.542.007 2.5 2.5 0 0 0-.006-3.543L9.802 5.815c-.07.29-.154.565-.25.774-.036.076-.084.16-.14.25l.842.84c.585.587.59 1.532 0 2.122-.587.585-1.532.59-2.12 0L6.008 7.68a1.496 1.496 0 0 1 .332-2.372c-.16-.245-.42-.503-.685-.75z" class="jsx-1906412371"></path></g></svg></a></h3><p class="whitespace-pre-wrap my-4">The <code class="inline text-code text-secondary dark:text-secondary-dark px-1 rounded-md no-underline bg-gray-30 bg-opacity-10 py-px">set</code> function returned by <code class="inline text-code text-secondary dark:text-secondary-dark px-1 rounded-md no-underline bg-gray-30 bg-opacity-10 py-px">useState</code> lets you update the state to a different value and trigger a re-render. You can pass the next state directly, or a function that calculates it from the previous state:</p><div><!--$--><div translate="no" class="rounded-lg h-full w-full overflow-x-auto flex items-center bg-wash dark:bg-gray-95 shadow-lg my-8"><div class="sp-wrapper sp-sp-607024663"><div class="sp-stack"><pre class="sp-cm sp-pristine sp-javascript" translate="no"><code class="sp-pre-placeholder">const [name, setName] = useState(&#x27;Edward&#x27;);

function handleClick() {
  setName(&#x27;Taylor&#x27;);
  setAge(a =&gt; a + 1);
  // ...</code></pre></div></div></div><!--/$--></div><h4 id="setstate-parameters" class="jsx-1906412371 heading text-xl font-bold leading-9 my-4">Parameters<a href="#setstate-parameters" aria-label="Link for Parameters" title="Link for Parameters" class="jsx-1906412371 anchor inline-block"><svg width="1em" height="1em" viewBox="0 0 13 13" xmlns="http://www.w3.org/2000/svg" class="jsx-1906412371 text-gray-70 ml-2 h-5 w-5"><g fill="currentColor" fill-rule="evenodd" class="jsx-1906412371"><path d="M7.778 7.975a2.5 2.5 0 0 0 .347-3.837L6.017 2.03a2.498 2.498 0 0 0-3.542-.007 2.5 2.5 0 0 0 .006 3.543l1.153 1.15c.07-.29.154-.563.25-.773.036-.077.084-.16.14-.25L3.18 4.85a1.496 1.496 0 0 1 .002-2.12 1.496 1.496 0 0 1 2.12 0l2.124 2.123a1.496 1.496 0 0 1-.333 2.37c.16.246.42.504.685.752z" class="jsx-1906412371"></path><path d="M5.657 4.557a2.5 2.5 0 0 0-.347 3.837l2.108 2.108a2.498 2.498 0 0 0 3.542.007 2.5 2.5 0 0 0-.006-3.543L9.802 5.815c-.07.29-.154.565-.25.774-.036.076-.084.16-.14.25l.842.84c.585.587.59 1.532 0 2.122-.587.585-1.532.59-2.12 0L6.008 7.68a1.496 1.496 0 0 1 .332-2.372c-.16-.245-.42-.503-.685-.75z" class="jsx-1906412371"></path></g></svg></a></h4><ul class="ml-6 my-3 list-disc"><li class="leading-relaxed mb-1"><code class="inline text-code text-secondary dark:text-secondary-dark px-1 rounded-md no-underline bg-gray-30 bg-opacity-10 py-px">nextState</code>: The value that you want the state to be. It can be a value of any type, but there is a special behavior for functions.<ul class="ml-6 my-3 list-disc"><li class="leading-relaxed mb-1">If you pass a function as <code class="inline text-code text-secondary dark:text-secondary-dark px-1 rounded-md no-underline bg-gray-30 bg-opacity-10 py-px">nextState</code>, it will be treated as an <em>updater function</em>. It must be pure, should take the pending state as its only argument, and should return the next state. React will put your updater function in a queue and re-render your component. During the next render, React will calculate the next state by applying all of the queued updaters to the previous state. <a class="inline text-link dark:text-link-dark break-normal border-b border-link border-opacity-0 hover:border-opacity-100 duration-100 ease-in transition leading-normal" href="#updating-state-based-on-the-previous-state">See an example above.</a></li></ul></li></ul><h4 id="setstate-returns" class="jsx-1906412371 heading text-xl font-bold leading-9 my-4">Returns<a href="#setstate-returns" aria-label="Link for Returns" title="Link for Returns" class="jsx-1906412371 anchor inline-block"><svg width="1em" height="1em" viewBox="0 0 13 13" xmlns="http://www.w3.org/2000/svg" class="jsx-1906412371 text-gray-70 ml-2 h-5 w-5"><g fill="currentColor" fill-rule="evenodd" class="jsx-1906412371"><path d="M7.778 7.975a2.5 2.5 0 0 0 .347-3.837L6.017 2.03a2.498 2.498 0 0 0-3.542-.007 2.5 2.5 0 0 0 .006 3.543l1.153 1.15c.07-.29.154-.563.25-.773.036-.077.084-.16.14-.25L3.18 4.85a1.496 1.496 0 0 1 .002-2.12 1.496 1.496 0 0 1 2.12 0l2.124 2.123a1.496 1.496 0 0 1-.333 2.37c.16.246.42.504.685.752z" class="jsx-1906412371"></path><path d="M5.657 4.557a2.5 2.5 0 0 0-.347 3.837l2.108 2.108a2.498 2.498 0 0 0 3.542.007 2.5 2.5 0 0 0-.006-3.543L9.802 5.815c-.07.29-.154.565-.25.774-.036.076-.084.16-.14.25l.842.84c.585.587.59 1.532 0 2.122-.587.585-1.532.59-2.12 0L6.008 7.68a1.496 1.496 0 0 1 .332-2.372c-.16-.245-.42-.503-.685-.75z" class="jsx-1906412371"></path></g></svg></a></h4><p class="whitespace-pre-wrap my-4"><code class="inline text-code text-secondary dark:text-secondary-dark px-1 rounded-md no-underline bg-gray-30 bg-opacity-10 py-px">set</code> functions do not have a return value.</p><h4 id="setstate-caveats" class="jsx-1906412371 heading text-xl font-bold leading-9 my-4">Caveats<a href="#setstate-caveats" aria-label="Link for Caveats" title="Link for Caveats" class="jsx-1906412371 anchor inline-block"><svg width="1em" height="1em" viewBox="0 0 13 13" xmlns="http://www.w3.org/2000/svg" class="jsx-1906412371 text-gray-70 ml-2 h-5 w-5"><g fill="currentColor" fill-rule="evenodd" class="jsx-1906412371"><path d="M7.778 7.975a2.5 2.5 0 0 0 .347-3.837L6.017 2.03a2.498 2.498 0 0 0-3.542-.007 2.5 2.5 0 0 0 .006 3.543l1.153 1.15c.07-.29.154-.563.25-.773.036-.077.084-.16.14-.25L3.18 4.85a1.496 1.496 0 0 1 .002-2.12 1.496 1.496 0 0 1 2.12 0l2.124 2.123a1.496 1.496 0 0 1-.333 2.37c.16.246.42.504.685.752z" class="jsx-1906412371"></path><path d="M5.657 4.557a2.5 2.5 0 0 0-.347 3.837l2.108 2.108a2.498 2.498 0 0 0 3.542.007 2.5 2.5 0 0 0-.006-3.543L9.802 5.815c-.07.29-.154.565-.25.774-.036.076-.084.16-.14.25l.842.84c.585.587.59 1.532 0 2.122-.587.585-1.532.59-2.12 0L6.008 7.68a1.496 1.496 0 0 1 .332-2.372c-.16-.245-.42-.503-.685-.75z" class="jsx-1906412371"></path></g></svg></a></h4><ul class="ml-6 my-3 list-disc"><li class="leading-relaxed mb-1"><p class="whitespace-pre-wrap my-4">The <code class="inline text-code text-secondary dark:text-secondary-dark px-1 rounded-md no-underline bg-gray-30 bg-opacity-10 py-px">set</code> function <strong class="font-bold">only updates the state variable for the <em>next</em> render</strong>. If you read the state variable after calling the <code class="inline text-code text-secondary dark:text-secondary-dark px-1 rounded-md no-underline bg-gray-30 bg-opacity-10 py-px">set</code> function, <a class="inline text-link dark:text-link-dark break-normal border-b border-link border-opacity-0 hover:border-opacity-100 duration-100 ease-in transition leading-normal" href="#ive-updated-the-state-but-logging-gives-me-the-old-value">you will still get the old value</a> that was on the screen before your call.</p></li><li class="leading-relaxed mb-1"><p class="whitespace-pre-wrap my-4">If the new value you provide is identical to the current <code class="inline text-code text-secondary dark:text-secondary-dark px-1 rounded-md no-underline bg-gray-30 bg-opacity-10 py-px">state</code>, as determined by an <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/is" target="_blank" rel="nofollow noopener noreferrer" class="inline text-link dark:text-link-dark break-normal border-b border-link border-opacity-0 hover:border-opacity-100 duration-100 ease-in transition leading-normal"><code class="inline text-code text-secondary dark:text-secondary-dark px-1 rounded-md no-underline bg-highlight dark:bg-highlight-dark py-0">Object.is</code></a> comparison, React will <strong class="font-bold">skip re-rendering the component and its children.</strong> This is an optimization. Although in some cases React may still need to call your component before skipping the children, it shouldn’t affect your code.</p></li><li class="leading-relaxed mb-1"><p class="whitespace-pre-wrap my-4">React <a class="inline text-link dark:text-link-dark break-normal border-b border-link border-opacity-0 hover:border-opacity-100 duration-100 ease-in transition leading-normal" href="/learn/queueing-a-series-of-state-updates">batches state updates</a>. It updates the screen <strong class="font-bold">after all the event handlers have run</strong> and have called their <code class="inline text-code text-secondary dark:text-secondary-dark px-1 rounded-md no-underline bg-gray-30 bg-opacity-10 py-px">set</code> functions. This prevents multiple re-renders during a single event. In the rare case that you need to force React to update the screen earlier, for example to access the DOM, you can use <a class="inline text-link dark:text-link-dark break-normal border-b border-link border-opacity-0 hover:border-opacity-100 duration-100 ease-in transition leading-normal" href="/apis/flushsync"><code class="inline text-code text-secondary dark:text-secondary-dark px-1 rounded-md no-underline bg-highlight dark:bg-highlight-dark py-0">flushSync</code></a>.</p></li><li class="leading-relaxed mb-1"><p class="whitespace-pre-wrap my-4">Calling the <code class="inline text-code text-secondary dark:text-secondary-dark px-1 rounded-md no-underline bg-gray-30 bg-opacity-10 py-px">set</code> function <em>during rendering</em> is only allowed from within the currently rendering component. React will discard its output and immediately attempt to render it again with the new state. This pattern is rarely needed, but you can use it to <strong class="font-bold">store information from the previous renders</strong>. <a class="inline text-link dark:text-link-dark break-normal border-b border-link border-opacity-0 hover:border-opacity-100 duration-100 ease-in transition leading-normal" href="#storing-information-from-previous-renders">See an example above.</a></p></li><li class="leading-relaxed mb-1"><p class="whitespace-pre-wrap my-4">In Strict Mode, React will <strong class="font-bold">call your updater function twice</strong> in order to <a class="inline text-link dark:text-link-dark break-normal border-b border-link border-opacity-0 hover:border-opacity-100 duration-100 ease-in transition leading-normal" href="#my-initializer-or-updater-function-runs-twice">help you find accidental impurities</a>. This is development-only behavior and does not affect production. If your updater function is pure (as it should be), this should not affect the logic of your component. The result from one of the calls will be ignored.</p></li></ul><hr class="my-6 block border-b border-border dark:border-border-dark"/><h2 id="troubleshooting" class="jsx-1906412371 heading text-3xl leading-10 text-primary dark:text-primary-dark font-bold my-6">Troubleshooting<a href="#troubleshooting" aria-label="Link for Troubleshooting" title="Link for Troubleshooting" class="jsx-1906412371 anchor inline-block"><svg width="1em" height="1em" viewBox="0 0 13 13" xmlns="http://www.w3.org/2000/svg" class="jsx-1906412371 text-gray-70 ml-2 h-5 w-5"><g fill="currentColor" fill-rule="evenodd" class="jsx-1906412371"><path d="M7.778 7.975a2.5 2.5 0 0 0 .347-3.837L6.017 2.03a2.498 2.498 0 0 0-3.542-.007 2.5 2.5 0 0 0 .006 3.543l1.153 1.15c.07-.29.154-.563.25-.773.036-.077.084-.16.14-.25L3.18 4.85a1.496 1.496 0 0 1 .002-2.12 1.496 1.496 0 0 1 2.12 0l2.124 2.123a1.496 1.496 0 0 1-.333 2.37c.16.246.42.504.685.752z" class="jsx-1906412371"></path><path d="M5.657 4.557a2.5 2.5 0 0 0-.347 3.837l2.108 2.108a2.498 2.498 0 0 0 3.542.007 2.5 2.5 0 0 0-.006-3.543L9.802 5.815c-.07.29-.154.565-.25.774-.036.076-.084.16-.14.25l.842.84c.585.587.59 1.532 0 2.122-.587.585-1.532.59-2.12 0L6.008 7.68a1.496 1.496 0 0 1 .332-2.372c-.16-.245-.42-.503-.685-.75z" class="jsx-1906412371"></path></g></svg></a></h2><h3 id="ive-updated-the-state-but-logging-gives-me-the-old-value" class="jsx-1906412371 heading text-2xl leading-9 text-primary dark:text-primary-dark font-bold my-6">I’ve updated the state, but logging gives me the old value<a href="#ive-updated-the-state-but-logging-gives-me-the-old-value" aria-label="Link for I’ve updated the state, but logging gives me the old value" title="Link for I’ve updated the state, but logging gives me the old value" class="jsx-1906412371 anchor inline-block"><svg width="1em" height="1em" viewBox="0 0 13 13" xmlns="http://www.w3.org/2000/svg" class="jsx-1906412371 text-gray-70 ml-2 h-5 w-5"><g fill="currentColor" fill-rule="evenodd" class="jsx-1906412371"><path d="M7.778 7.975a2.5 2.5 0 0 0 .347-3.837L6.017 2.03a2.498 2.498 0 0 0-3.542-.007 2.5 2.5 0 0 0 .006 3.543l1.153 1.15c.07-.29.154-.563.25-.773.036-.077.084-.16.14-.25L3.18 4.85a1.496 1.496 0 0 1 .002-2.12 1.496 1.496 0 0 1 2.12 0l2.124 2.123a1.496 1.496 0 0 1-.333 2.37c.16.246.42.504.685.752z" class="jsx-1906412371"></path><path d="M5.657 4.557a2.5 2.5 0 0 0-.347 3.837l2.108 2.108a2.498 2.498 0 0 0 3.542.007 2.5 2.5 0 0 0-.006-3.543L9.802 5.815c-.07.29-.154.565-.25.774-.036.076-.084.16-.14.25l.842.84c.585.587.59 1.532 0 2.122-.587.585-1.532.59-2.12 0L6.008 7.68a1.496 1.496 0 0 1 .332-2.372c-.16-.245-.42-.503-.685-.75z" class="jsx-1906412371"></path></g></svg></a></h3><p class="whitespace-pre-wrap my-4">Calling the <code class="inline text-code text-secondary dark:text-secondary-dark px-1 rounded-md no-underline bg-gray-30 bg-opacity-10 py-px">set</code> function <strong class="font-bold">does not change state in the running code</strong>:</p><div><!--$--><div translate="no" class="rounded-lg h-full w-full overflow-x-auto flex items-center bg-wash dark:bg-gray-95 shadow-lg my-8"><div class="sp-wrapper sp-sp-607024663"><div class="sp-stack"><pre class="sp-cm sp-pristine sp-javascript" translate="no"><code class="sp-pre-placeholder">function handleClick() {
  console.log(count);  // 0

  setCount(count + 1); // Request a re-render with 1
  console.log(count);  // Still 0!

  setTimeout(() =&gt; {
    console.log(count); // Also 0!
  }, 5000);
}</code></pre></div></div></div><!--/$--></div><p class="whitespace-pre-wrap my-4">This is because <a class="inline text-link dark:text-link-dark break-normal border-b border-link border-opacity-0 hover:border-opacity-100 duration-100 ease-in transition leading-normal" href="/learn/state-as-a-snapshot">states behaves like a snapshot</a>. Updating state requests another render with the new state value, but does not affect the <code class="inline text-code text-secondary dark:text-secondary-dark px-1 rounded-md no-underline bg-gray-30 bg-opacity-10 py-px">count</code> JavaScript variable in your already-running event handler.</p><p class="whitespace-pre-wrap my-4">If you need to use the next state, you can save it in a variable before passing it to the <code class="inline text-code text-secondary dark:text-secondary-dark px-1 rounded-md no-underline bg-gray-30 bg-opacity-10 py-px">set</code> function:</p><div><!--$--><div translate="no" class="rounded-lg h-full w-full overflow-x-auto flex items-center bg-wash dark:bg-gray-95 shadow-lg my-8"><div class="sp-wrapper sp-sp-607024663"><div class="sp-stack"><pre class="sp-cm sp-pristine sp-javascript" translate="no"><code class="sp-pre-placeholder">const nextCount = count + 1;
setCount(nextCount);

console.log(count);     // 0
console.log(nextCount); // 1</code></pre></div></div></div><!--/$--></div><hr class="my-6 block border-b border-border dark:border-border-dark"/><h3 id="ive-updated-the-state-but-the-screen-doesnt-update" class="jsx-1906412371 heading text-2xl leading-9 text-primary dark:text-primary-dark font-bold my-6">I’ve updated the state, but the screen doesn’t update<a href="#ive-updated-the-state-but-the-screen-doesnt-update" aria-label="Link for I’ve updated the state, but the screen doesn’t update" title="Link for I’ve updated the state, but the screen doesn’t update" class="jsx-1906412371 anchor inline-block"><svg width="1em" height="1em" viewBox="0 0 13 13" xmlns="http://www.w3.org/2000/svg" class="jsx-1906412371 text-gray-70 ml-2 h-5 w-5"><g fill="currentColor" fill-rule="evenodd" class="jsx-1906412371"><path d="M7.778 7.975a2.5 2.5 0 0 0 .347-3.837L6.017 2.03a2.498 2.498 0 0 0-3.542-.007 2.5 2.5 0 0 0 .006 3.543l1.153 1.15c.07-.29.154-.563.25-.773.036-.077.084-.16.14-.25L3.18 4.85a1.496 1.496 0 0 1 .002-2.12 1.496 1.496 0 0 1 2.12 0l2.124 2.123a1.496 1.496 0 0 1-.333 2.37c.16.246.42.504.685.752z" class="jsx-1906412371"></path><path d="M5.657 4.557a2.5 2.5 0 0 0-.347 3.837l2.108 2.108a2.498 2.498 0 0 0 3.542.007 2.5 2.5 0 0 0-.006-3.543L9.802 5.815c-.07.29-.154.565-.25.774-.036.076-.084.16-.14.25l.842.84c.585.587.59 1.532 0 2.122-.587.585-1.532.59-2.12 0L6.008 7.68a1.496 1.496 0 0 1 .332-2.372c-.16-.245-.42-.503-.685-.75z" class="jsx-1906412371"></path></g></svg></a></h3><p class="whitespace-pre-wrap my-4">React will <strong class="font-bold">ignore your update if the next state is equal to the previous state,</strong> as determined by an <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/is" target="_blank" rel="nofollow noopener noreferrer" class="inline text-link dark:text-link-dark break-normal border-b border-link border-opacity-0 hover:border-opacity-100 duration-100 ease-in transition leading-normal"><code class="inline text-code text-secondary dark:text-secondary-dark px-1 rounded-md no-underline bg-highlight dark:bg-highlight-dark py-0">Object.is</code></a> comparison. This usually happens when you change an object or an array in state directly:</p><div><!--$--><div translate="no" class="rounded-lg h-full w-full overflow-x-auto flex items-center bg-wash dark:bg-gray-95 shadow-lg my-8"><div class="sp-wrapper sp-sp-607024663"><div class="sp-stack"><pre class="sp-cm sp-pristine sp-javascript" translate="no"><code class="sp-pre-placeholder">obj.x = 10;
setObj(obj); // Doesn&#x27;t do anything</code></pre></div></div></div><!--/$--></div><p class="whitespace-pre-wrap my-4">You called <code class="inline text-code text-secondary dark:text-secondary-dark px-1 rounded-md no-underline bg-gray-30 bg-opacity-10 py-px">setObj</code> with the same <code class="inline text-code text-secondary dark:text-secondary-dark px-1 rounded-md no-underline bg-gray-30 bg-opacity-10 py-px">obj</code> object, so React bailed out of rendering. To fix this, you need to ensure that you’re always <a class="inline text-link dark:text-link-dark break-normal border-b border-link border-opacity-0 hover:border-opacity-100 duration-100 ease-in transition leading-normal" href="#updating-objects-and-arrays-in-state"><em>replacing</em> objects and arrays in state instead of <em>mutating</em> them</a>:</p><div><!--$--><div translate="no" class="rounded-lg h-full w-full overflow-x-auto flex items-center bg-wash dark:bg-gray-95 shadow-lg my-8"><div class="sp-wrapper sp-sp-607024663"><div class="sp-stack"><pre class="sp-cm sp-pristine sp-javascript" translate="no"><code class="sp-pre-placeholder">setObj({
  ...obj,
  x: 10
});</code></pre></div></div></div><!--/$--></div><hr class="my-6 block border-b border-border dark:border-border-dark"/><h3 id="im-getting-an-error-too-many-re-renders" class="jsx-1906412371 heading text-2xl leading-9 text-primary dark:text-primary-dark font-bold my-6">I’m getting an error: “Too many re-renders”<a href="#im-getting-an-error-too-many-re-renders" aria-label="Link for I’m getting an error: “Too many re-renders”" title="Link for I’m getting an error: “Too many re-renders”" class="jsx-1906412371 anchor inline-block"><svg width="1em" height="1em" viewBox="0 0 13 13" xmlns="http://www.w3.org/2000/svg" class="jsx-1906412371 text-gray-70 ml-2 h-5 w-5"><g fill="currentColor" fill-rule="evenodd" class="jsx-1906412371"><path d="M7.778 7.975a2.5 2.5 0 0 0 .347-3.837L6.017 2.03a2.498 2.498 0 0 0-3.542-.007 2.5 2.5 0 0 0 .006 3.543l1.153 1.15c.07-.29.154-.563.25-.773.036-.077.084-.16.14-.25L3.18 4.85a1.496 1.496 0 0 1 .002-2.12 1.496 1.496 0 0 1 2.12 0l2.124 2.123a1.496 1.496 0 0 1-.333 2.37c.16.246.42.504.685.752z" class="jsx-1906412371"></path><path d="M5.657 4.557a2.5 2.5 0 0 0-.347 3.837l2.108 2.108a2.498 2.498 0 0 0 3.542.007 2.5 2.5 0 0 0-.006-3.543L9.802 5.815c-.07.29-.154.565-.25.774-.036.076-.084.16-.14.25l.842.84c.585.587.59 1.532 0 2.122-.587.585-1.532.59-2.12 0L6.008 7.68a1.496 1.496 0 0 1 .332-2.372c-.16-.245-.42-.503-.685-.75z" class="jsx-1906412371"></path></g></svg></a></h3><p class="whitespace-pre-wrap my-4">You might get an error that says: <code class="inline text-code text-secondary dark:text-secondary-dark px-1 rounded-md no-underline bg-gray-30 bg-opacity-10 py-px">Too many re-renders. React limits the number of renders to prevent an infinite loop.</code> Typically, this means that you’re unconditionally setting state <em>during render</em>, so your component enters a loop: render, set state (which causes a render), render, set state (which causes a render), and so on. Very often, this is caused by a mistake in specifying an event handler:</p><div><!--$--><div translate="no" class="rounded-lg h-full w-full overflow-x-auto flex items-center bg-wash dark:bg-gray-95 shadow-lg my-8"><div class="sp-wrapper sp-sp-607024663"><div class="sp-stack"><pre class="sp-cm sp-pristine sp-javascript" translate="no"><code class="sp-pre-placeholder">// 🚩 Wrong: calls the handler during render
return &lt;button onClick={handleClick()}&gt;Click me&lt;/button&gt;

// ✅ Correct: passes down the event handler
return &lt;button onClick={handleClick}&gt;Click me&lt;/button&gt;

// ✅ Correct: passes down an inline function
return &lt;button onClick={(e) =&gt; handleClick(e)}&gt;Click me&lt;/button&gt;</code></pre></div></div></div><!--/$--></div><p class="whitespace-pre-wrap my-4">If you can’t find the cause of this error, click on the arrow next to the error in the console and look through the JavaScript stack to find the specific <code class="inline text-code text-secondary dark:text-secondary-dark px-1 rounded-md no-underline bg-gray-30 bg-opacity-10 py-px">set</code> function call responsible for the error.</p><hr class="my-6 block border-b border-border dark:border-border-dark"/><h3 id="my-initializer-or-updater-function-runs-twice" class="jsx-1906412371 heading text-2xl leading-9 text-primary dark:text-primary-dark font-bold my-6">My initializer or updater function runs twice<a href="#my-initializer-or-updater-function-runs-twice" aria-label="Link for My initializer or updater function runs twice" title="Link for My initializer or updater function runs twice" class="jsx-1906412371 anchor inline-block"><svg width="1em" height="1em" viewBox="0 0 13 13" xmlns="http://www.w3.org/2000/svg" class="jsx-1906412371 text-gray-70 ml-2 h-5 w-5"><g fill="currentColor" fill-rule="evenodd" class="jsx-1906412371"><path d="M7.778 7.975a2.5 2.5 0 0 0 .347-3.837L6.017 2.03a2.498 2.498 0 0 0-3.542-.007 2.5 2.5 0 0 0 .006 3.543l1.153 1.15c.07-.29.154-.563.25-.773.036-.077.084-.16.14-.25L3.18 4.85a1.496 1.496 0 0 1 .002-2.12 1.496 1.496 0 0 1 2.12 0l2.124 2.123a1.496 1.496 0 0 1-.333 2.37c.16.246.42.504.685.752z" class="jsx-1906412371"></path><path d="M5.657 4.557a2.5 2.5 0 0 0-.347 3.837l2.108 2.108a2.498 2.498 0 0 0 3.542.007 2.5 2.5 0 0 0-.006-3.543L9.802 5.815c-.07.29-.154.565-.25.774-.036.076-.084.16-.14.25l.842.84c.585.587.59 1.532 0 2.122-.587.585-1.532.59-2.12 0L6.008 7.68a1.496 1.496 0 0 1 .332-2.372c-.16-.245-.42-.503-.685-.75z" class="jsx-1906412371"></path></g></svg></a></h3><p class="whitespace-pre-wrap my-4">In <a class="inline text-link dark:text-link-dark break-normal border-b border-link border-opacity-0 hover:border-opacity-100 duration-100 ease-in transition leading-normal" href="/apis/strictmode">Strict Mode</a>, React will call some of your functions twice instead of once:</p><div><!--$--><div translate="no" class="rounded-lg h-full w-full overflow-x-auto flex items-center bg-wash dark:bg-gray-95 shadow-lg my-8"><div class="sp-wrapper sp-sp-607024663"><div class="sp-stack"><pre class="sp-cm sp-pristine sp-javascript" translate="no"><code class="sp-pre-placeholder">function TodoList() {
  // This component function will run twice for every render.

  const [todos, setTodos] = useState(() =&gt; {
    // This initializer function will run twice during initialization.
    return createTodos();
  });

  function handleClick() {
    setTodos(prevTodos =&gt; {
      // This updater function will run twice for every click.
      return [...prevTodos, createTodo()];
    });
  }
  // ...</code></pre></div></div></div><!--/$--></div><p class="whitespace-pre-wrap my-4">This is expected and shouldn’t break your code.</p><p class="whitespace-pre-wrap my-4">This <strong class="font-bold">development-only</strong> behavior helps you <a class="inline text-link dark:text-link-dark break-normal border-b border-link border-opacity-0 hover:border-opacity-100 duration-100 ease-in transition leading-normal" href="/learn/keeping-components-pure">keep components pure</a>. React uses the result of one of the calls, and ignores the result of the other call. As long as your component, initializer, and updater functions are pure, this shouldn’t affect your logic. However, if they are accidentally impure, this helps you notice the mistakes and fix it.</p><p class="whitespace-pre-wrap my-4">For example, this impure updater function mutates an array in state:</p><div><!--$--><div translate="no" class="rounded-lg h-full w-full overflow-x-auto flex items-center bg-wash dark:bg-gray-95 shadow-lg my-8"><div class="sp-wrapper sp-sp-607024663"><div class="sp-stack"><pre class="sp-cm sp-pristine sp-javascript" translate="no"><code class="sp-pre-placeholder">setTodos(prevTodos =&gt; {
  // 🚩 Mistake: mutating state
  prevTodos.push(createTodo());
});</code></pre></div></div></div><!--/$--></div><p class="whitespace-pre-wrap my-4">Because React calls your updater function twice, you’ll see the todo was added twice, so you’ll know that there is a mistake. In this example, you can fix the mistake by <a class="inline text-link dark:text-link-dark break-normal border-b border-link border-opacity-0 hover:border-opacity-100 duration-100 ease-in transition leading-normal" href="#updating-objects-and-arrays-in-state">replacing the array instead of mutating it</a>:</p><div><!--$--><div translate="no" class="rounded-lg h-full w-full overflow-x-auto flex items-center bg-wash dark:bg-gray-95 shadow-lg my-8"><div class="sp-wrapper sp-sp-607024663"><div class="sp-stack"><pre class="sp-cm sp-pristine sp-javascript" translate="no"><code class="sp-pre-placeholder">setTodos(prevTodos =&gt; {
  // ✅ Correct: replacing with new state
  return [...prevTodos, createTodo()];
});</code></pre></div></div></div><!--/$--></div><p class="whitespace-pre-wrap my-4">Now that this updater function is pure, calling it an extra time doesn’t make a difference in behavior. This is why React calling it twice helps you find mistakes. <strong class="font-bold">Only component, initializer, and updater functions need to be pure.</strong> Event handlers don’t need to be pure, so React will never call your event handlers twice.</p><p class="whitespace-pre-wrap my-4">Read <a class="inline text-link dark:text-link-dark break-normal border-b border-link border-opacity-0 hover:border-opacity-100 duration-100 ease-in transition leading-normal" href="/learn/keeping-components-pure">keeping components pure</a> to learn more.</p><hr class="my-6 block border-b border-border dark:border-border-dark"/><h3 id="im-trying-to-set-state-to-a-function-but-it-gets-called-instead" class="jsx-1906412371 heading text-2xl leading-9 text-primary dark:text-primary-dark font-bold my-6">I’m trying to set state to a function, but it gets called instead<a href="#im-trying-to-set-state-to-a-function-but-it-gets-called-instead" aria-label="Link for I’m trying to set state to a function, but it gets called instead" title="Link for I’m trying to set state to a function, but it gets called instead" class="jsx-1906412371 anchor inline-block"><svg width="1em" height="1em" viewBox="0 0 13 13" xmlns="http://www.w3.org/2000/svg" class="jsx-1906412371 text-gray-70 ml-2 h-5 w-5"><g fill="currentColor" fill-rule="evenodd" class="jsx-1906412371"><path d="M7.778 7.975a2.5 2.5 0 0 0 .347-3.837L6.017 2.03a2.498 2.498 0 0 0-3.542-.007 2.5 2.5 0 0 0 .006 3.543l1.153 1.15c.07-.29.154-.563.25-.773.036-.077.084-.16.14-.25L3.18 4.85a1.496 1.496 0 0 1 .002-2.12 1.496 1.496 0 0 1 2.12 0l2.124 2.123a1.496 1.496 0 0 1-.333 2.37c.16.246.42.504.685.752z" class="jsx-1906412371"></path><path d="M5.657 4.557a2.5 2.5 0 0 0-.347 3.837l2.108 2.108a2.498 2.498 0 0 0 3.542.007 2.5 2.5 0 0 0-.006-3.543L9.802 5.815c-.07.29-.154.565-.25.774-.036.076-.084.16-.14.25l.842.84c.585.587.59 1.532 0 2.122-.587.585-1.532.59-2.12 0L6.008 7.68a1.496 1.496 0 0 1 .332-2.372c-.16-.245-.42-.503-.685-.75z" class="jsx-1906412371"></path></g></svg></a></h3><p class="whitespace-pre-wrap my-4">You can’t put a function into state like this:</p><div><!--$--><div translate="no" class="rounded-lg h-full w-full overflow-x-auto flex items-center bg-wash dark:bg-gray-95 shadow-lg my-8"><div class="sp-wrapper sp-sp-607024663"><div class="sp-stack"><pre class="sp-cm sp-pristine sp-javascript" translate="no"><code class="sp-pre-placeholder">const [fn, setFn] = useState(someFunction);

function handleClick() {
  setFn(someOtherFunction);
}</code></pre></div></div></div><!--/$--></div><p class="whitespace-pre-wrap my-4">Because you’re passing a function, React assumes that <code class="inline text-code text-secondary dark:text-secondary-dark px-1 rounded-md no-underline bg-gray-30 bg-opacity-10 py-px">someFunction</code> is an <a class="inline text-link dark:text-link-dark break-normal border-b border-link border-opacity-0 hover:border-opacity-100 duration-100 ease-in transition leading-normal" href="#avoiding-recreating-the-initial-state">initializer function</a>, and that <code class="inline text-code text-secondary dark:text-secondary-dark px-1 rounded-md no-underline bg-gray-30 bg-opacity-10 py-px">someOtherFunction</code> is an <a class="inline text-link dark:text-link-dark break-normal border-b border-link border-opacity-0 hover:border-opacity-100 duration-100 ease-in transition leading-normal" href="#updating-state-based-on-the-previous-state">updater function</a>, so it tries to call them and store the result. To actually <em>store</em> a function, you have to put <code class="inline text-code text-secondary dark:text-secondary-dark px-1 rounded-md no-underline bg-gray-30 bg-opacity-10 py-px">() =&gt;</code> before them in both cases. Then React will store the functions you pass.</p><div><!--$--><div translate="no" class="rounded-lg h-full w-full overflow-x-auto flex items-center bg-wash dark:bg-gray-95 shadow-lg my-8"><div class="sp-wrapper sp-sp-607024663"><div class="sp-stack"><pre class="sp-cm sp-pristine sp-javascript" translate="no"><code class="sp-pre-placeholder">const [fn, setFn] = useState(() =&gt; someFunction);

function handleClick() {
  setFn(() =&gt; someOtherFunction);
}</code></pre></div></div></div><!--/$--></div></div></div><div class="max-w-7xl mx-auto grid grid-cols-1 md:grid-cols-2 gap-4 py-4 md:py-12"><a class="flex gap-x-4 md:gap-x-6 items-center w-full md:w-80 px-4 md:px-5 py-6 border-2 border-transparent text-base leading-base text-link dark:text-link-dark rounded-lg group focus:text-link dark:focus:text-link-dark focus:bg-highlight focus:border-link dark:focus:bg-highlight-dark dark:focus:border-link-dark focus:border-opacity-100 focus:border-2 focus:ring-1 focus:ring-offset-4 focus:ring-blue-40 active:ring-0 active:ring-offset-0 hover:bg-gray-5 dark:hover:bg-gray-80" href="/apis"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" class="duration-100 ease-in transition rotate-90 text-gray-30 dark:text-gray-50 inline group-focus:text-link dark:group-focus:text-link-dark" style="min-width:20px;min-height:20px"><g fill="none" fill-rule="evenodd" transform="translate(-446 -398)"><path fill="currentColor" fill-rule="nonzero" d="M95.8838835,240.366117 C95.3957281,239.877961 94.6042719,239.877961 94.1161165,240.366117 C93.6279612,240.854272 93.6279612,241.645728 94.1161165,242.133883 L98.6161165,246.633883 C99.1042719,247.122039 99.8957281,247.122039 100.383883,246.633883 L104.883883,242.133883 C105.372039,241.645728 105.372039,240.854272 104.883883,240.366117 C104.395728,239.877961 103.604272,239.877961 103.116117,240.366117 L99.5,243.982233 L95.8838835,240.366117 Z" transform="translate(356.5 164.5)"></path><polygon points="446 418 466 418 466 398 446 398"></polygon></g></svg><span><span class="block no-underline text-sm tracking-wide text-secondary dark:text-secondary-dark uppercase font-bold group-focus:text-link dark:group-focus:text-link-dark group-focus:text-opacity-100">Previous</span><span class="block text-lg group-hover:underline">React APIs</span></span></a><a class="flex gap-x-4 md:gap-x-6 items-center w-full md:w-80 px-4 md:px-5 py-6 border-2 border-transparent text-base leading-base text-link dark:text-link-dark rounded-lg group focus:text-link dark:focus:text-link-dark focus:bg-highlight focus:border-link dark:focus:bg-highlight-dark dark:focus:border-link-dark focus:border-opacity-100 focus:border-2 focus:ring-1 focus:ring-offset-4 focus:ring-blue-40 active:ring-0 active:ring-offset-0 hover:bg-gray-5 dark:hover:bg-gray-80 flex-row-reverse justify-self-end text-right" href="/apis/usecontext"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" class="duration-100 ease-in transition -rotate-90 text-gray-30 dark:text-gray-50 inline group-focus:text-link dark:group-focus:text-link-dark" style="min-width:20px;min-height:20px"><g fill="none" fill-rule="evenodd" transform="translate(-446 -398)"><path fill="currentColor" fill-rule="nonzero" d="M95.8838835,240.366117 C95.3957281,239.877961 94.6042719,239.877961 94.1161165,240.366117 C93.6279612,240.854272 93.6279612,241.645728 94.1161165,242.133883 L98.6161165,246.633883 C99.1042719,247.122039 99.8957281,247.122039 100.383883,246.633883 L104.883883,242.133883 C105.372039,241.645728 105.372039,240.854272 104.883883,240.366117 C104.395728,239.877961 103.604272,239.877961 103.116117,240.366117 L99.5,243.982233 L95.8838835,240.366117 Z" transform="translate(356.5 164.5)"></path><polygon points="446 418 466 418 466 398 446 398"></polygon></g></svg><span><span class="block no-underline text-sm tracking-wide text-secondary dark:text-secondary-dark uppercase font-bold group-focus:text-link dark:group-focus:text-link-dark group-focus:text-opacity-100">Next</span><span class="block text-lg group-hover:underline">useContext()</span></span></a></div></div></div><div class="w-full lg:max-w-xs hidden 2xl:block"><nav role="navigation" style="width:inherit;max-width:inherit" class="jsx-3298f0cd3a6d0a22 pt-6 fixed top-0 right-0"><h2 class="jsx-3298f0cd3a6d0a22 mb-3 lg:mb-3 uppercase tracking-wide font-bold text-sm text-secondary dark:text-secondary-dark px-4 w-full">On this page</h2><div class="jsx-3298f0cd3a6d0a22 toc h-full overflow-y-auto pl-4"><ul class="jsx-3298f0cd3a6d0a22 space-y-2 pb-16"><li class="jsx-3298f0cd3a6d0a22 text-sm px-2 rounded-l-lg bg-highlight dark:bg-highlight-dark"><a href="#" class="jsx-3298f0cd3a6d0a22 text-link dark:text-link-dark font-bold block hover:text-link dark:hover:text-link-dark leading-normal py-2">Overview</a></li><li class="jsx-3298f0cd3a6d0a22 text-sm px-2 rounded-l-lg"><a href="#usage" class="jsx-3298f0cd3a6d0a22 text-secondary dark:text-secondary-dark block hover:text-link dark:hover:text-link-dark leading-normal py-2">Usage</a></li><li class="jsx-3298f0cd3a6d0a22 text-sm px-2 rounded-l-lg pl-4"><a href="#adding-state-to-a-component" class="jsx-3298f0cd3a6d0a22 text-secondary dark:text-secondary-dark block hover:text-link dark:hover:text-link-dark leading-normal py-2">Adding state to a component</a></li><li class="jsx-3298f0cd3a6d0a22 text-sm px-2 rounded-l-lg pl-4"><a href="#updating-state-based-on-the-previous-state" class="jsx-3298f0cd3a6d0a22 text-secondary dark:text-secondary-dark block hover:text-link dark:hover:text-link-dark leading-normal py-2">Updating state based on the previous state</a></li><li class="jsx-3298f0cd3a6d0a22 text-sm px-2 rounded-l-lg pl-4"><a href="#updating-objects-and-arrays-in-state" class="jsx-3298f0cd3a6d0a22 text-secondary dark:text-secondary-dark block hover:text-link dark:hover:text-link-dark leading-normal py-2">Updating objects and arrays in state</a></li><li class="jsx-3298f0cd3a6d0a22 text-sm px-2 rounded-l-lg pl-4"><a href="#avoiding-recreating-the-initial-state" class="jsx-3298f0cd3a6d0a22 text-secondary dark:text-secondary-dark block hover:text-link dark:hover:text-link-dark leading-normal py-2">Avoiding recreating the initial state</a></li><li class="jsx-3298f0cd3a6d0a22 text-sm px-2 rounded-l-lg pl-4"><a href="#resetting-state-with-a-key" class="jsx-3298f0cd3a6d0a22 text-secondary dark:text-secondary-dark block hover:text-link dark:hover:text-link-dark leading-normal py-2">Resetting state with a key</a></li><li class="jsx-3298f0cd3a6d0a22 text-sm px-2 rounded-l-lg pl-4"><a href="#storing-information-from-previous-renders" class="jsx-3298f0cd3a6d0a22 text-secondary dark:text-secondary-dark block hover:text-link dark:hover:text-link-dark leading-normal py-2">Storing information from previous renders</a></li><li class="jsx-3298f0cd3a6d0a22 text-sm px-2 rounded-l-lg"><a href="#reference" class="jsx-3298f0cd3a6d0a22 text-secondary dark:text-secondary-dark block hover:text-link dark:hover:text-link-dark leading-normal py-2">Reference</a></li><li class="jsx-3298f0cd3a6d0a22 text-sm px-2 rounded-l-lg pl-4"><a href="#usestate" class="jsx-3298f0cd3a6d0a22 text-secondary dark:text-secondary-dark block hover:text-link dark:hover:text-link-dark leading-normal py-2"><code>useState(initialState)</code></a></li><li class="jsx-3298f0cd3a6d0a22 text-sm px-2 rounded-l-lg pl-4"><a href="#setstate" class="jsx-3298f0cd3a6d0a22 text-secondary dark:text-secondary-dark block hover:text-link dark:hover:text-link-dark leading-normal py-2"><code>set</code> functions, like <code>setSomething(nextState)</code></a></li><li class="jsx-3298f0cd3a6d0a22 text-sm px-2 rounded-l-lg"><a href="#troubleshooting" class="jsx-3298f0cd3a6d0a22 text-secondary dark:text-secondary-dark block hover:text-link dark:hover:text-link-dark leading-normal py-2">Troubleshooting</a></li><li class="jsx-3298f0cd3a6d0a22 text-sm px-2 rounded-l-lg pl-4"><a href="#ive-updated-the-state-but-logging-gives-me-the-old-value" class="jsx-3298f0cd3a6d0a22 text-secondary dark:text-secondary-dark block hover:text-link dark:hover:text-link-dark leading-normal py-2">I’ve updated the state, but logging gives me the old value</a></li><li class="jsx-3298f0cd3a6d0a22 text-sm px-2 rounded-l-lg pl-4"><a href="#ive-updated-the-state-but-the-screen-doesnt-update" class="jsx-3298f0cd3a6d0a22 text-secondary dark:text-secondary-dark block hover:text-link dark:hover:text-link-dark leading-normal py-2">I’ve updated the state, but the screen doesn’t update</a></li><li class="jsx-3298f0cd3a6d0a22 text-sm px-2 rounded-l-lg pl-4"><a href="#im-getting-an-error-too-many-re-renders" class="jsx-3298f0cd3a6d0a22 text-secondary dark:text-secondary-dark block hover:text-link dark:hover:text-link-dark leading-normal py-2">I’m getting an error: “Too many re-renders”</a></li><li class="jsx-3298f0cd3a6d0a22 text-sm px-2 rounded-l-lg pl-4"><a href="#my-initializer-or-updater-function-runs-twice" class="jsx-3298f0cd3a6d0a22 text-secondary dark:text-secondary-dark block hover:text-link dark:hover:text-link-dark leading-normal py-2">My initializer or updater function runs twice</a></li><li class="jsx-3298f0cd3a6d0a22 text-sm px-2 rounded-l-lg pl-4"><a href="#im-trying-to-set-state-to-a-function-but-it-gets-called-instead" class="jsx-3298f0cd3a6d0a22 text-secondary dark:text-secondary-dark block hover:text-link dark:hover:text-link-dark leading-normal py-2">I’m trying to set state to a function, but it gets called instead</a></li></ul></div></nav></div></article><div class="self-stretch w-full sm:pl-0 lg:pl-80 sm:pr-0 2xl:pr-80 pl-0 pr-0"><div class="mx-auto w-full px-5 sm:px-12 md:px-12 pt-10 md:pt-12 lg:pt-10"><hr class="max-w-7xl mx-auto border-border dark:border-border-dark"/></div><footer class="text-secondary dark:text-secondary-dark py-12 px-5 sm:px-12 md:px-12 sm:py-12 md:py-16 lg:py-14"><div class="grid grid-cols-2 sm:grid-cols-2 xl:grid-cols-2 gap-x-12 gap-y-8 max-w-7xl mx-auto items-start"><div class="flex flex-col ml-auto mr-auto"><div><a class="border-b inline-block border-transparent text-md text-secondary dark:text-secondary-dark my-2 font-bold hover:border-gray-10" href="/apis">API Reference</a></div><div><a class="border-b inline-block border-transparent text-sm text-primary dark:text-primary-dark hover:border-gray-10" href="/apis/containers">Containers</a></div><div><a class="border-b inline-block border-transparent text-sm text-primary dark:text-primary-dark hover:border-gray-10" href="/apis/images">Images</a></div><div><a class="border-b inline-block border-transparent text-sm text-primary dark:text-primary-dark hover:border-gray-10" href="/apis/volumes">Volumes</a></div></div><div class="flex flex-col ml-auto mr-auto"><div><a class="border-b inline-block border-transparent text-md text-secondary dark:text-secondary-dark my-2 font-bold hover:border-gray-10" href="/">Community</a></div><div><a class="border-b inline-block border-transparent text-sm text-primary dark:text-primary-dark hover:border-gray-10" href="/community/acknowledgements">GitHub</a></div><div><a class="border-b inline-block border-transparent text-sm text-primary dark:text-primary-dark hover:border-gray-10" href="/community/acknowledgements">Discord</a></div><div><a class="border-b inline-block border-transparent text-sm text-primary dark:text-primary-dark hover:border-gray-10" href="/community/acknowledgements">Acknowledgements</a></div></div></div></footer></div></main></div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{}},"page":"/apis/usestate","query":{},"buildId":"Q79l4BrFCdc1LuyjlNUDo","nextExport":true,"autoExport":true,"isFallback":false,"scriptLoader":[]}</script></body></html>